<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>残剑博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Hexo theme - Icarus">
<meta property="og:type" content="website">
<meta property="og:title" content="残剑博客">
<meta property="og:url" content="http://liuling07.github.io/page/10/index.html">
<meta property="og:site_name" content="残剑博客">
<meta property="og:description" content="Hexo theme - Icarus">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="残剑博客">
<meta name="twitter:description" content="Hexo theme - Icarus">
  
  
    <link rel="icon" href="favicon.png">
  
  
 <link href='//fonts.lug.ustc.edu.cn/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
 <link href="//fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">


  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
  

  

  
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo" style="background-image: url(/css/images/logo.png)"></i><span class="site-title">残剑博客</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/css/images/protrait.jpg"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://liuling07.github.io"></form>
        
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/categories">Categories</a></td>
        
          <td><a class="main-nav-link" href="/tags">Tags</a></td>
        
          <td><a class="main-nav-link" href="/about">About</a></td>
        
        <td>
          
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://liuling07.github.io"></form>
          
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="/css/images/protrait.jpg">
      <h2 id="name">Lauren</h2>
      <h3 id="title">Android Developer</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Shenzhen, China</span>
      <a id="follow" href="https://github.com/liuling07">FOLLOW</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        135
        <span>posts</span>
      </div>
      <div class="article-info-block">
        32
        <span>tags</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="https://github.com/liuling07" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="http://weibo.com/LaurenLiuling/" target="_blank" title="weibo"><i class="fa fa-weibo"></i></a></td>
          
          <td><a href="https://plus.google.com/u/0/107098505138563589748/" target="_blank" title="google-plus"><i class="fa fa-google-plus"></i></a></td>
          
          <td><a href="http://stackoverflow.com/users/5629327/lauren-liuling" target="_blank" title="stack-overflow"><i class="fa fa-stack-overflow"></i></a></td>
          
          <td><a href="https://twitter.com/lauren_liuLing/" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
          
          <td><a href="https://www.facebook.com/lauren.liuling/" target="_blank" title="facebook"><i class="fa fa-facebook"></i></a></td>
          
          <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
        </tr>
      </table>
    </div>
    
    
  </div>
</aside>

      
      <section id="main">
      <article id="post-observer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/observer.html">设计模式之观察者模式</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/observer.html">
      <time datetime="2013-04-20T04:11:00.000Z" itemprop="datePublished">2013-04-20</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　今天放假，又有时间继续啃《java设计模式》这本书了。每次学会一种设计模式内心都会有一种小小的成就感，但是懂是懂了，不知道会不会用。主要是现在没有什么项目经验，设计模式学了也派不上用场。不管怎样，学了总比没学好，以后总会派上用场的。</p>
<p>　　首先，何为观察者模式？观察者模式是关于多个对象想知道一个对象中数据的变化的情况一种模式。比如说现在几乎所有的高校附近都会有大学生兼职中心，也就是兼职中介吧（大一大二的时候还去过，加会员还交了100大洋呢。），兼职中心每天都会把兼职信息通知给所有的会员。这就是一个观察者模式，这里会员也就是观察者，兼职中心就是被观察者，也称作主题。</p>
<p>　　观察者模式结构中包括四种角色：</p>
<p>　　一、主题：主题是一个接口，该接口规定了具体主题需要实现的方法，比如添加、删除观察者以及通知观察者更新数据的方法。</p>
<p>　　二、观察者：观察者也是一个接口，该接口规定了具体观察者用来更新数据的方法。</p>
<p>　　三、具体主题：具体主题是一个实现主题接口的类，该类包含了会经常发生变化的数据。而且还有一个集合，该集合存放的是观察者的引用。</p>
<p>　　四：具体观察者：具体观察者是实现了观察者接口的一个类。具体观察者包含有可以存放具体主题引用的主题接口变量，以便具体观察者让具体主题将自己的引用添加到具体主题的集合中，让自己成为它的观察者，或者让这个具体主题将自己从具体主题的集合中删除，使自己不在时它的观察者。</p>
<p>　　在上面的兼职中心的例子中，兼职中心就是一个具体主题，它可以更新各种兼职信息，并且通知给它的会员，当然还可以增加会员和删除会员。会员就是一个观察者，它关注着兼职中心的信息，能够及时收到兼职中心更新过来的信息。</p>
<p>　　代码如下：</p>
<p>　　1.主题</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Subject {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o);<br></span><span style="color: #008080;">5</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o);<br></span><span style="color: #008080;">6</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers();<br></span><span style="color: #008080;">7</span> }</pre><br></div>

<p>　　2.具体主题</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SeekJobCenter <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Subject {<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    String mess;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> changed;<br></span><span style="color: #008080;"> 8</span>     ArrayList<observer><span style="color: #000000;"> personList;<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> SeekJobCenter() {<br></span><span style="color: #008080;">10</span>         personList = <span style="color: #0000ff;">new</span> ArrayList<observer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span>         mess = “”<span style="color: #000000;">;<br></span><span style="color: #008080;">12</span>         changed = <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">14</span>     <span style="color: #008000;">//</span><span style="color: #008000;">添加求职者</span><br><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o) {<br></span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">if</span>(!<span style="color: #000000;">(personList.contains(o))){<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">            personList.add(o);<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">20</span>     <span style="color: #008000;">//</span><span style="color: #008000;">删除求职者</span><br><span style="color: #008080;">21</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o) {<br></span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(personList.contains(o)){<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">            personList.remove(o);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">26</span>     <span style="color: #008000;">//</span><span style="color: #008000;">通知所有求职者</span><br><span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers() {<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(changed){<br></span><span style="color: #008080;">29</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; personList.size(); i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">30</span>                 Observer o =<span style="color: #000000;"> personList.get(i);<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">                o.hearTelephone(mess);<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">33</span>             changed = <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">36</span>     <span style="color: #008000;">//</span><span style="color: #008000;">刷新信息</span><br><span style="color: #008080;">37</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> giveNewMess(String str){<br></span><span style="color: #008080;">38</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(str.equals(mess)){<br></span><span style="color: #008080;">39</span>             changed = <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">40</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">41</span>             mess =<span style="color: #000000;"> str;<br></span><span style="color: #008080;">42</span>             changed = <span style="color: #0000ff;">true</span><span style="color: #000000;">;<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">45</span><br><span style="color: #008080;">46</span> }</observer></observer></pre><br></div>

<p>　　3.观察者</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> hearTelephone(String mess);<br></span><span style="color: #008080;">5</span> }</pre><br></div>

<p>　　4.具体观察者</p>
<p>　　在该例子中，具体观察者有两个，一个关注兼职中心的所有信息，另一个只关注&ldquo;促销员&rdquo;和&ldquo;发单员&rdquo;的兼职信息。</p>
<p>　　UniversityStudent.java</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.File;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.FileNotFoundException;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.RandomAccessFile;<br></span><span style="color: #008080;"> 7</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> UniversityStudent <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Observer{<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    Subject subject;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    File myFile;<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> UniversityStudent(Subject subject,String fileName) {<br></span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">this</span>.subject =<span style="color: #000000;"> subject;<br></span><span style="color: #008080;">13</span>         subject.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">14</span>         myFile = <span style="color: #0000ff;">new</span><span style="color: #000000;"> File(fileName);<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> hearTelephone(String mess) {<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">18</span>             RandomAccessFile out = <span style="color: #0000ff;">new</span> RandomAccessFile(myFile,”rw”<span style="color: #000000;">);<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">            out.seek(out.length());<br></span><span style="color: #008080;">20</span>             <span style="color: #0000ff;">byte</span>[] b =<span style="color: #000000;"> mess.getBytes();<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">            out.write(b);<br></span><span style="color: #008080;">22</span>             System.out.println(“我是会员一”<span style="color: #000000;">);<br></span><span style="color: #008080;">23</span>             System.out.println(“我向文件”+myFile.getName()+”写入如下内容：”<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">            System.out.println(mess);<br></span><span style="color: #008080;">25</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            e.printStackTrace();<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">29</span><br><span style="color: #008080;">30</span> }</pre><br></div>

<p>　　UniversityStudent2.java</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.File;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.RandomAccessFile;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> UniversityStudent2 <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    Subject subject;<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    File myFile;<br></span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> UniversityStudent2(Subject subject,String fileName) {<br></span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">this</span>.subject =<span style="color: #000000;"> subject;<br></span><span style="color: #008080;">12</span>         subject.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">13</span>         myFile = <span style="color: #0000ff;">new</span><span style="color: #000000;"> File(fileName);<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> hearTelephone(String mess) {<br></span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">17</span>             <span style="color: #0000ff;">boolean</span> boo = mess.contains(“促销员”)||mess.contains(“发单员”<span style="color: #000000;">);<br></span><span style="color: #008080;">18</span>             <span style="color: #0000ff;">if</span><span style="color: #000000;">(boo){<br></span><span style="color: #008080;">19</span>                 RandomAccessFile out = <span style="color: #0000ff;">new</span> RandomAccessFile(myFile,”rw”<span style="color: #000000;">);<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">                out.seek(out.length());<br></span><span style="color: #008080;">21</span>                 <span style="color: #0000ff;">byte</span>[] b =<span style="color: #000000;"> mess.getBytes();<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">                out.write(b);<br></span><span style="color: #008080;">23</span>                 System.out.println(“我是会员二”<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>                 System.out.println(“我向文件”+myFile.getName()+”写入如下内容：”<span style="color: #000000;">);<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">                System.out.println(mess);<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">27</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">            e.printStackTrace();<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">31</span> }</pre><br></div>

<p>下面写一个测试程序：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #008000;">/<em>*</em></span><br><span style="color: #008080;"> 5</span> <span style="color: #008000;">      </span><span style="color: #808080;">@param</span><span style="color: #008000;"> args<br></span><span style="color: #008080;"> 6</span>      <span style="color: #008000;">*/</span><br><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 8</span>         SeekJobCenter center = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SeekJobCenter();<br></span><span style="color: #008080;"> 9</span>         UniversityStudent zhanglin = <span style="color: #0000ff;">new</span> UniversityStudent(center,”zhanglin.txt”<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span>         UniversityStudent2 wangHao = <span style="color: #0000ff;">new</span> UniversityStudent2(center,”wanghao.txt”<span style="color: #000000;">);<br></span><span style="color: #008080;">11</span>         center.giveNewMess(“XX公司需要10个促销员。”<span style="color: #000000;">);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        center.notifyObservers();<br></span><span style="color: #008080;">13</span>         center.giveNewMess(“XX公司需要8个发单员。”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">        center.notifyObservers();<br></span><span style="color: #008080;">15</span>         center.giveNewMess(“XX公司需要9个临时工。”<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        center.notifyObservers();<br></span><span style="color: #008080;">17</span>         center.giveNewMess(“XX公司需要9个临时工。”<span style="color: #000000;">);<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">        center.notifyObservers();<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">20</span><br><span style="color: #008080;">21</span> }</pre><br></div>

<p>　　运行结果如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">我是会员一<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">我向文件zhanglin.txt写入如下内容：<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">XX公司需要10个促销员。<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">我是会员二<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">我向文件wanghao.txt写入如下内容：<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">XX公司需要10个促销员。<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">我是会员一<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">我向文件zhanglin.txt写入如下内容：<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">XX公司需要8个发单员。<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">我是会员二<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">我向文件wanghao.txt写入如下内容：<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">XX公司需要8个发单员。<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">我是会员一<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">我向文件zhanglin.txt写入如下内容：<br></span><span style="color: #008080;">15</span> XX公司需要9个临时工。</pre><br></div>

<p>　　兼职中心这个例子使用的事观察者模式中的&ldquo;推&rdquo;数据方式，也就是说具体主题将变化后的信息全部发送给具体观察者。这种方式往往适用于具体主题认为具体观察者需要这些变化后的全部数据时。</p>
<p>　　设计模式中还有另外一种方式也就是&ldquo;拉&rdquo;数据方式。如果使用这种方式，具体主题信息一更新，它只会通知所有的观察者：&ldquo;我的信息已经更新&rdquo;，具体观察者就可以调用相关方法，获得自己需要的那部分信息。</p>
<p>　　下面看另外一个例子：</p>
<p>　　问题描述：一家商店每天都发布当天打折商品的名字、原价和折后价，有两位顾客对此信息很感兴趣，但是一位顾客只关心打折商品的名称，而另一位顾客只关心原价和折后价。</p>
<p>　　1.主题：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Subject {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o);<br></span><span style="color: #008080;">5</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o);<br></span><span style="color: #008080;">6</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers();<br></span><span style="color: #008080;">7</span> }</pre><br></div>

<p>　　2.具体主题：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ShopSubject <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Subject {<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    String goodsName;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">double</span><span style="color: #000000;"> oldPrice,newPrice;<br></span><span style="color: #008080;"> 8</span>     ArrayList<observer><span style="color: #000000;"> customerList;<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> ShopSubject() {<br></span><span style="color: #008080;">10</span>         customerList = <span style="color: #0000ff;">new</span> ArrayList<observer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o) {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">if</span>(!<span style="color: #000000;">(customerList.contains(o))){<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">            customerList.add(o);<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">17</span><br><span style="color: #008080;">18</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o) {<br></span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(customerList.contains(o)){<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">            customerList.remove(o);<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">23</span><br><span style="color: #008080;">24</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers() {<br></span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; customerList.size(); i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">26</span>             Observer o =<span style="color: #000000;"> customerList.get(i);<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">            o.update();<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">30</span>     <span style="color: #008000;">//</span><span style="color: #008000;">设置打折商品</span><br><span style="color: #008080;">31</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setDiscountGoods(String name,<span style="color: #0000ff;">double</span> oldP,<span style="color: #0000ff;">double</span><span style="color: #000000;"> newP){<br></span><span style="color: #008080;">32</span>         goodsName =<span style="color: #000000;"> name;<br></span><span style="color: #008080;">33</span>         oldPrice =<span style="color: #000000;"> oldP;<br></span><span style="color: #008080;">34</span>         newPrice =<span style="color: #000000;"> newP;<br></span><span style="color: #008080;">35</span>         <span style="color: #008000;">//</span><span style="color: #008000;">设置完通知顾客</span><br><span style="color: #008080;">36</span> <span style="color: #000000;">        notifyObservers();<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">38</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getGoodsName() {<br></span><span style="color: #008080;">39</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> goodsName;<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">41</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">double</span><span style="color: #000000;"> getOldPrice() {<br></span><span style="color: #008080;">42</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> oldPrice;<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">44</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">double</span><span style="color: #000000;"> getNewPrice() {<br></span><span style="color: #008080;">45</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> newPrice;<br></span><span style="color: #008080;">46</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">47</span><br><span style="color: #008080;">48</span><br><span style="color: #008080;">49</span> }</observer></observer></pre><br></div>

<p>　　3.观察者：</p>
<p>　　这里不是由具体主题直接更新数据过来，所以update()方法不需要传参数过来。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> update();<br></span><span style="color: #008080;">5</span> }</pre><br></div>

<p>　　4.具体观察者：</p>
<p>CustomerOne对象的顾客只对打折商品的名字感兴趣，对其他信息不感兴趣。</p>
<p>CustomerOne.java</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> CustomerOne <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    Subject subject;<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">    String goodsName,personName;<br></span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> CustomerOne(Subject subject,String personName) {<br></span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">this</span>.personName =<span style="color: #000000;"> personName;<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">this</span>.subject =<span style="color: #000000;"> subject;<br></span><span style="color: #008080;"> 9</span>         subject.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> update() {<br></span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">if</span>(subject <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> ShopSubject){<br></span><span style="color: #008080;">13</span>             goodsName =<span style="color: #000000;"> ((ShopSubject)subject).getGoodsName();<br></span><span style="color: #008080;">14</span>             System.out.println(personName+”只对打折商品的名字感兴趣：”<span style="color: #000000;">);<br></span><span style="color: #008080;">15</span>             System.out.println(“打折商品的名字是：”+<span style="color: #000000;">goodsName);<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">18</span><br><span style="color: #008080;">19</span> }</pre><br></div>

<p>CustomerTwo的对象的顾客只对商品原价和折后价感兴趣，对商品名称不感兴趣。　　</p>
<p>CustomerTwo.java</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> CustomerTwo <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    Subject subject;<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">    String personName;<br></span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">double</span><span style="color: #000000;"> oldPrice,newPrice;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> CustomerTwo(Subject subject,String personName) {<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">this</span>.personName =<span style="color: #000000;"> personName;<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">this</span>.subject =<span style="color: #000000;"> subject;<br></span><span style="color: #008080;">10</span>         subject.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> update() {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">if</span>(subject <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> ShopSubject){<br></span><span style="color: #008080;">14</span>             oldPrice =<span style="color: #000000;"> ((ShopSubject)subject).getOldPrice();<br></span><span style="color: #008080;">15</span>             newPrice =<span style="color: #000000;"> ((ShopSubject)subject).getNewPrice();<br></span><span style="color: #008080;">16</span>             System.out.println(personName+”只对打折商品的原价和折后价感兴趣：”<span style="color: #000000;">);<br></span><span style="color: #008080;">17</span>             System.out.println(“打折商品的原价是：”+<span style="color: #000000;">oldPrice);<br></span><span style="color: #008080;">18</span>             System.out.println(“打折商品的折后价是：”+<span style="color: #000000;">newPrice);<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span><br><span style="color: #008080;">22</span> }</pre><br></div>

<p>　　下面写一个测试程序：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer1;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         ShopSubject shop = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ShopSubject();<br></span><span style="color: #008080;"> 6</span>         CustomerOne boy  = <span style="color: #0000ff;">new</span> CustomerOne(shop,”小明”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 7</span>         CustomerTwo girl = <span style="color: #0000ff;">new</span> CustomerTwo(shop,”小红”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 8</span>         shop.setDiscountGoods(“Photo数码相机”, 2345.6, 2020.0<span style="color: #000000;">);<br></span><span style="color: #008080;"> 9</span>         shop.setDiscountGoods(“三星手机”, 2999.0, 2499.0<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> }</pre><br></div>

<p>运行结果为：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">小明只对打折商品的名字感兴趣：<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">打折商品的名字是：Photo数码相机<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">小红只对打折商品的原价和折后价感兴趣：<br></span><span style="color: #008080;"> 4</span> 打折商品的原价是：2345.6<br><span style="color: #008080;"> 5</span> 打折商品的折后价是：2020.0<br><span style="color: #008080;"> 6</span> <span style="color: #000000;">小明只对打折商品的名字感兴趣：<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">打折商品的名字是：三星手机<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">小红只对打折商品的原价和折后价感兴趣：<br></span><span style="color: #008080;"> 9</span> 打折商品的原价是：2999.0<br><span style="color: #008080;">10</span> 打折商品的折后价是：2499.0</pre><br></div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">观察者与多主题</span></p>
<p>　　上面两个例子所讲的都是一个具体主题多个观察者的情况。还有一种情况就是一个具体观察者观察多个主题，当观察的任何具体主题的信息发生变化时，该观察者都能得到通知。在使用多主题时，主题应该采用<span style="color: #ff0000;">拉数据方式</span>，<span style="color: #000000;">观察者接口可以将更新数据方法的参数类型设置为主题接口类型，比如update(Subject subject),即具体主题数据发生改变时，将自己的引用传递给具体观察者，然后具体观察者让这个具体主题调用相关方法获得信息。</span></p>
<p><span style="color: #000000;">　　下面是一个简单的多主题例子</span></p>
<p><span style="color: #000000;">　　问题描述：李先生计划去旅游，那么他需要关注旅行社的信息，同时还要关注旅行地区的天气问题。</span></p>
<p><span style="color: #000000;">　　根据观察者模式，李先生就是一个具体观察者，而气象站和旅行社就是他观察的两个具体主题。主要代码如下：</span></p>
<p><span style="color: #000000;">　　1.主题</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Subject {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o);<br></span><span style="color: #008080;">5</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o);<br></span><span style="color: #008080;">6</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers();<br></span><span style="color: #008080;">7</span> }</pre><br></div>

<p><span style="color: #000000;">　　2.观察者</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> update(Subject subject);<br></span><span style="color: #008080;">5</span> }</pre><br></div>

<p><span style="color: #000000;">　　3.具体主题：</span></p>
<p><span style="color: #000000;">TravelAgency.java</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> TravelAgency <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Subject{<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    String tourStartTime;<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    String tourMess;<br></span><span style="color: #008080;"> 8</span>     ArrayList<observer><span style="color: #000000;"> personList;<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> TravelAgency() {<br></span><span style="color: #008080;">10</span>         personList = <span style="color: #0000ff;">new</span> ArrayList<observer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o) {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">if</span>(o == <span style="color: #0000ff;">null</span><span style="color: #000000;">){<br></span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;<br></span><span style="color: #008080;">15</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">16</span>             <span style="color: #0000ff;">if</span>(!<span style="color: #000000;">(personList.contains(o))){<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">                personList.add(o);<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o) {<br></span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(personList.contains(o)){<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">            personList.remove(o);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">25</span><br><span style="color: #008080;">26</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers() {<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; personList.size(); i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">29</span>             Observer o =<span style="color: #000000;"> personList.get(i);<br></span><span style="color: #008080;">30</span>             o.update(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">33</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> giveMess(String time,String mess){<br></span><span style="color: #008080;">34</span>         tourStartTime =<span style="color: #000000;"> time;<br></span><span style="color: #008080;">35</span>         tourMess =<span style="color: #000000;"> mess;<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">        notifyObservers();<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">38</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getTourStartTime() {<br></span><span style="color: #008080;">39</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> tourStartTime;<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">41</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getTourMess() {<br></span><span style="color: #008080;">42</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> tourMess;<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">44</span> }</observer></observer></pre><br></div>

<p><span style="color: #000000;">WeaherStation.java</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> WeaherStation <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Subject{<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    String forecastTime,forcastMess;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> maxPemperature,minTemperature;<br></span><span style="color: #008080;"> 8</span>     ArrayList<observer><span style="color: #000000;"> personList;<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> WeaherStation() {<br></span><span style="color: #008080;">10</span>         personList = <span style="color: #0000ff;">new</span> ArrayList<observer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addObserver(Observer o) {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">if</span>(o == <span style="color: #0000ff;">null</span><span style="color: #000000;">){<br></span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">return</span><span style="color: #000000;">;<br></span><span style="color: #008080;">15</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">16</span>             <span style="color: #0000ff;">if</span>(!<span style="color: #000000;">(personList.contains(o))){<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">                personList.add(o);<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteObserver(Observer o) {<br></span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(personList.contains(o)){<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">            personList.remove(o);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">25</span><br><span style="color: #008080;">26</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> notifyObservers() {<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; personList.size(); i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">29</span>             Observer o =<span style="color: #000000;"> personList.get(i);<br></span><span style="color: #008080;">30</span>             o.update(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">33</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> doForeCast(String t,String mess,<span style="color: #0000ff;">int</span> max,<span style="color: #0000ff;">int</span><span style="color: #000000;"> min){<br></span><span style="color: #008080;">34</span>         forecastTime =<span style="color: #000000;"> t;<br></span><span style="color: #008080;">35</span>         forcastMess =<span style="color: #000000;"> mess;<br></span><span style="color: #008080;">36</span>         minTemperature =<span style="color: #000000;"> min;<br></span><span style="color: #008080;">37</span>         maxPemperature =<span style="color: #000000;"> max;<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">        notifyObservers();<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">40</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getForecastTime() {<br></span><span style="color: #008080;">41</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> forecastTime;<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">43</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getForcastMess() {<br></span><span style="color: #008080;">44</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> forcastMess;<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">46</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getMaxPemperature() {<br></span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> maxPemperature;<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">49</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getMinTemperature() {<br></span><span style="color: #008080;">50</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> minTemperature;<br></span><span style="color: #008080;">51</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">52</span><br><span style="color: #008080;">53</span><br><span style="color: #008080;">54</span> }</observer></observer></pre><br></div>

<p>具体观察者：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Person <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Observer {<br></span><span style="color: #008080;"> 4</span>     Subject subjectOne,subjectTwo; <span style="color: #008000;">//</span><span style="color: #008000;">可依赖的主题</span><br><span style="color: #008080;"> 5</span> <span style="color: #000000;">    String forecastTime,forecastMess;<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    String tourStartTime,tourMess;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> maxTemperature,minTemperature;<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Person(Subject one,Subject two) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">this</span>.subjectOne =<span style="color: #000000;"> one;<br></span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">this</span>.subjectTwo =<span style="color: #000000;"> two;<br></span><span style="color: #008080;">11</span>         subjectOne.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">12</span>         subjectTwo.addObserver(<span style="color: #0000ff;">this</span><span style="color: #000000;">);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> update(Subject subject) {<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">if</span>(subject <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> WeaherStation){<br></span><span style="color: #008080;">16</span>             WeaherStation ws =<span style="color: #000000;"> (WeaherStation)subject;<br></span><span style="color: #008080;">17</span>             forecastTime =<span style="color: #000000;"> ws.getForecastTime();<br></span><span style="color: #008080;">18</span>             forecastMess =<span style="color: #000000;"> ws.getForcastMess();<br></span><span style="color: #008080;">19</span>             maxTemperature =<span style="color: #000000;"> ws.getMaxPemperature();<br></span><span style="color: #008080;">20</span>             minTemperature =<span style="color: #000000;"> ws.getMinTemperature();<br></span><span style="color: #008080;">21</span>             System.out.print(“预报日期：”+forecastTime+”,”<span style="color: #000000;">);<br></span><span style="color: #008080;">22</span>             System.out.print(“天气状况：”+forecastMess+”,”<span style="color: #000000;">);<br></span><span style="color: #008080;">23</span>             System.out.print(“最高温度：”+maxTemperature+”,”<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>             System.out.println(“最低温度：”+minTemperature+”.”<span style="color: #000000;">);<br></span><span style="color: #008080;">25</span>         }<span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(subject <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> TravelAgency){<br></span><span style="color: #008080;">26</span>             TravelAgency ta =<span style="color: #000000;"> (TravelAgency)subject;<br></span><span style="color: #008080;">27</span>             tourStartTime   =<span style="color: #000000;"> ta.getTourStartTime();<br></span><span style="color: #008080;">28</span>             tourMess        =<span style="color: #000000;"> ta.getTourMess();<br></span><span style="color: #008080;">29</span>             System.out.print(“旅游开始日期：”+tourStartTime+”,”<span style="color: #000000;">);<br></span><span style="color: #008080;">30</span>             System.out.println(“旅游信息：”+tourMess+”.”<span style="color: #000000;">);<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">33</span><br><span style="color: #008080;">34</span> }</pre><br></div>

<p>下面写一个测试程序：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.observer2;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         WeaherStation weaherStation = <span style="color: #0000ff;">new</span> WeaherStation();<span style="color: #008000;">//</span><span style="color: #008000;">具体主题</span><br><span style="color: #008080;"> 6</span>         TravelAgency travelAgency   = <span style="color: #0000ff;">new</span> TravelAgency(); <span style="color: #008000;">//</span><span style="color: #008000;">具体主题 </span><br><span style="color: #008080;"> 7</span>         Person boy = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Person(weaherStation,travelAgency);<br><br></span><span style="color: #008080;"> 8</span>         weaherStation.doForeCast(“10日”, “阴有小雨”, 28, 20<span style="color: #000000;">);<br></span><span style="color: #008080;"> 9</span>         travelAgency.giveMess(“10日”, “黄山2日游”<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span>         weaherStation.doForeCast(“11日”, “晴转多云”, 30, 21<span style="color: #000000;">);<br></span><span style="color: #008080;">11</span>         travelAgency.giveMess(“11日”, “丽江1日游”<span style="color: #000000;">);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">13</span><br><span style="color: #008080;">14</span> }</pre><br></div>

<p>运行结果如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> 预报日期：10日,天气状况：阴有小雨,最高温度：28,最低温度：20<span style="color: #000000;">.<br></span><span style="color: #008080;">2</span> <span style="color: #000000;">旅游开始日期：10日,旅游信息：黄山2日游.<br></span><span style="color: #008080;">3</span> 预报日期：11日,天气状况：晴转多云,最高温度：30,最低温度：21<span style="color: #000000;">.<br></span><span style="color: #008080;">4</span> 旅游开始日期：11日,旅游信息：丽江1日游.</pre><br></div>

<p>&nbsp;</p>
<p>适合使用观察者模式的情况：</p>
<p>　　①、当一个对象的数据更新时需要通知其他的对象，但这个对象又不希望和被通知的那些对象形成紧耦合。</p>
<p>　　②、当一个对象的数据更新时，这个对象需要让其他对象也各自更新自己的数据，但这个对象不知道具体有多少个对象要更新数据。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/observer.html" data-id="ciiy5f4ro004fq1d0i2ytfph5" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/observer.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-thread-coordinate" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/thread-coordinate.html">java笔记六：线程间的协调</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/thread-coordinate.html">
      <time datetime="2013-04-17T05:02:00.000Z" itemprop="datePublished">2013-04-17</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　<span style="color: #000000;">　昨天重新学习了<a href="http://www.cnblogs.com/liuling/archive/2013/04/16/thread.html" target="_blank" rel="external">java多线程的使用</a>，多线程的难点就在线程之间的协调。在《操作系统》一课中，我们学习了进程，其实多线程和多进程一样，都会涉及到多个进程或者线程对某一资源共享访问的问题，当多个线程都需要修改这个资源的时候就会出现线程安全问题。</span></p>
<p><span style="color: #000000;">　　比如说在银行开个账户会有一个存折和一张卡，如果某一天同一时间丈夫拿着存折去柜台取钱，而妻子拿着银行卡去ATM取钱。当丈夫查询余额里面有3000元，正准备取2000元，这时候妻子也到ATM里面查询也有3000，也取2000元。其实银行不可能让我们这么做，如果这样的话那我们天天取钱去了，还搞什么工作啊。其实在丈夫查询的时候已经对该账号上了锁，另外的银行卡要取钱的话必须等待该锁被释放。下面用一个程序模拟这个例子：</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sync;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> TestSync2 <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable{<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> BankCard bc = <span style="color: #0000ff;">new</span><span style="color: #000000;"> BankCard();<br></span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 6</span>         TestSync2 test = <span style="color: #0000ff;">new</span><span style="color: #000000;"> TestSync2();<br></span><span style="color: #008080;"> 7</span>         Thread wife = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(test);<br></span><span style="color: #008080;"> 8</span>         Thread husband = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(test);<br></span><span style="color: #008080;"> 9</span>         wife.setName(“wife”<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span>         husband.setName(“husband”<span style="color: #000000;">);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        wife.start();<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        husband.start();<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">15</span>         bc.getMoney(Thread.currentThread().getName(), 2000<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">18</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> BankCard{<br></span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> money = 3000;<span style="color: #008000;">//</span><span style="color: #008000;">模拟账户余额</span><br><span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">synchronized</span> <span style="color: #0000ff;">void</span> getMoney(String name,<span style="color: #0000ff;">int</span><span style="color: #000000;"> m){<br></span><span style="color: #008080;">21</span>         <span style="color: #008000;">//</span><span style="color: #008000;">synchronized(this){</span><br><span style="color: #008080;">22</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">23</span>                 Thread.sleep(1<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">27</span>             <span style="color: #0000ff;">if</span>(money &gt;<span style="color: #000000;"> m){<br></span><span style="color: #008080;">28</span>                 System.out.println(name+”取走了”+m+”元”<span style="color: #000000;">);<br></span><span style="color: #008080;">29</span>                 money = money -<span style="color: #000000;"> m;<br></span><span style="color: #008080;">30</span>             }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">31</span>                 System.out.println(“对不起，您的余额不足！”<span style="color: #000000;">);<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">33</span>         <span style="color: #008000;">//</span><span style="color: #008000;">}</span><br><span style="color: #008080;">34</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">35</span> }</pre><br></div>

<p><span style="color: #000000;">　　上面的例子如果在getMoney()方法上面不加synchronized关键字的话，输出结果为：</span></p>
<p><span style="color: #000000;">wife取走了2000元</span><br><span style="color: #000000;">husband取走了2000元</span></p>
<p><span style="color: #000000;">　　而加上synchronized后，输出结果为：</span></p>
<p><span style="color: #000000;">wife取走了2000元</span><br><span style="color: #000000;">对不起，您的余额不足！</span></p>
<p><span style="color: #000000;">　　上面两种情况说明，如果多个线程同时访问某个资源，而不给该资源枷锁的话，就会出现问题。而加上synchronized关键字后就可以避免这种错误发生了。它能够保证只有一个线程能够访问getMoney()这个方法，其他药访问该方法的线程必须等待。</span></p>
<p><span style="color: #000000;">锁住某个资源可以用synchronized关键字来修饰一个方法或者同步代码块，这样能保证同一时间只能由一个线程访问该资源。</span></p>
<p>&nbsp; 　　<span style="color: #000000;">①、当两个并发线程访问同一个对象object中的这个synchronized(this)同步代码块时，一个时间内只能有一个线程得到执行。另一个线程必须等待当前线程执行完这个代码块以后才能执行该代码块。</span></p>
<p><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;　 ②、然而，当一个线程访问object的一个synchronized(this)同步代码块时，另一个线程仍然可以访问该object中的非synchronized(this)同步代码块。</span></p>
<p><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ③、尤其关键的是，当一个线程访问object的一个synchronized(this)同步代码块时，其他线程对object中所有其它synchronized(this)同步代码块的访问将被阻塞。</span></p>
<p><span style="color: #000000;">　　我们都知道，操作系统中多个进程之间如果不进行协调就很容易出现死锁的情况，死锁的四个条件：互斥、占有等待、非剥夺、循环等待。我们只要破坏其中一个条件就能避免死锁发生。线程之间也容易出现死锁，下面这个例子就演示了死锁的情况：</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sync;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> com.thread.SleepTest;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> TestDeadLock <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable{<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span> flag = 1<span style="color: #000000;">;<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">static</span> Object o1 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Object();<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">static</span> Object o2 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Object();<br></span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        System.out.println(flag);<br></span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">if</span>(flag == 1<span style="color: #000000;">){<br></span><span style="color: #008080;">13</span>             <span style="color: #0000ff;">synchronized</span><span style="color: #000000;"> (o1) {<br></span><span style="color: #008080;">14</span>                 <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">15</span>                     Thread.sleep(1000<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span>                 } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">                    e.printStackTrace();<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">19</span>                 <span style="color: #0000ff;">synchronized</span><span style="color: #000000;"> (o2) {<br></span><span style="color: #008080;">20</span>                     System.out.println(“1”<span style="color: #000000;">);<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">if</span>(flag == 0<span style="color: #000000;">){<br></span><span style="color: #008080;">25</span>             <span style="color: #0000ff;">synchronized</span> (o2) {<span style="color: #008000;">//</span><span style="color: #008000;">锁住某个对象，相当于占有该对象不让其他人使用</span><br><span style="color: #008080;">26</span>                 <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">27</span>                     Thread.sleep(1000<span style="color: #000000;">);<br></span><span style="color: #008080;">28</span>                 } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">                    e.printStackTrace();<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">31</span>                 <span style="color: #0000ff;">synchronized</span><span style="color: #000000;"> (o1) {<br></span><span style="color: #008080;">32</span>                     System.out.println(“0”<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">37</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">38</span>         TestDeadLock t1 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> TestDeadLock();<br></span><span style="color: #008080;">39</span>         TestDeadLock t2 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> TestDeadLock();<br></span><span style="color: #008080;">40</span>         t1.flag = 1<span style="color: #000000;">;<br></span><span style="color: #008080;">41</span>         t2.flag = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">42</span>         <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(t1).start();<br></span><span style="color: #008080;">43</span>         <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(t2).start();<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">45</span> }</pre><br></div>

<p><span style="color: #000000;">　　运行程序输出1&nbsp;&nbsp;&nbsp; 0后就进入死锁状态，该程序永远也不会停止，因为两个线程同时处于等待状态。线程t1锁住了o1对象，等待o2对象，而线程t2锁住o2等待o2对象，谁也不让谁，这就进入了一个循环占有等待的情况了，死锁也就出现了。</span></p>
<p><span style="color: #000000;">　　所以，如果多个线程如果不进行协调的话很容易出现死锁的问题。操作系统中使用进程调度来协调各个进程，那么java重如何对各个线程进行协调呢？</span></p>
<p><span style="color: #000000;">　　java中主要使用Object类中的wait()、notify()、notifyAll()方法来协调各个线程。典型的例子有哲学家吃饭问题、生产者和消费者问题、理发师问题。下面一个用一个例子来演示生产者和消费者问题。</span></p>
<p><span style="color: #000000;">　　问题描述：生产者负责做馒头，做好馒头后放进指定的篓子里面，消费者消费该篓子里面的馒头。篓子里只能装一定量的馒头，满了以后生产者必须进入等待状态，消费者吃完馒头后也必须进入等待状态。</span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sync;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ProductAndConsumer {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         Basket b = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Basket();<br></span><span style="color: #008080;"> 6</span>         Product p = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Product(b);<br></span><span style="color: #008080;"> 7</span>         Consumer c = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Consumer(b);<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(p).start();<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread(c).start();<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">12</span><br><span style="color: #008080;">13</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ManTou{<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> ManTou(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {<br></span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">19</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {<br></span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">return</span> “ManTou”+<span style="color: #000000;">id;<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">23</span><br><span style="color: #008080;">24</span> <span style="color: #008000;">//</span><span style="color: #008000;">装馒头的篮子</span><br><span style="color: #008080;">25</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Basket{<br></span><span style="color: #008080;">26</span>     <span style="color: #0000ff;">int</span> index = 0; <span style="color: #008000;">//</span><span style="color: #008000;">相当于栈顶指针</span><br><span style="color: #008080;">27</span>     ManTou[] manTous = <span style="color: #0000ff;">new</span> ManTou[6<span style="color: #000000;">];<br></span><span style="color: #008080;">28</span>     <span style="color: #008000;">//</span><span style="color: #008000;">往篮子里面放馒头</span><br><span style="color: #008080;">29</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">synchronized</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> push(ManTou m){<br></span><span style="color: #008080;">30</span>         <span style="color: #0000ff;">while</span>(index ==<span style="color: #000000;"> manTous.length){<br></span><span style="color: #008080;">31</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">32</span>                 <span style="color: #0000ff;">this</span><span style="color: #000000;">.wait();<br></span><span style="color: #008080;">33</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.notify();<br></span><span style="color: #008080;">38</span>         manTous[index] =<span style="color: #000000;"> m;<br></span><span style="color: #008080;">39</span>         index++<span style="color: #000000;">;<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">41</span>     <span style="color: #008000;">//</span><span style="color: #008000;">往篮子里面取馒头</span><br><span style="color: #008080;">42</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">synchronized</span><span style="color: #000000;"> ManTou pop(){<br></span><span style="color: #008080;">43</span>         <span style="color: #0000ff;">while</span>(index == 0<span style="color: #000000;">){<br></span><span style="color: #008080;">44</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">45</span>                 <span style="color: #0000ff;">this</span><span style="color: #000000;">.wait();<br></span><span style="color: #008080;">46</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">47</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">49</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">50</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.notify();<br></span><span style="color: #008080;">51</span>         index–<span style="color: #000000;">;<br></span><span style="color: #008080;">52</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> manTous[index];<br></span><span style="color: #008080;">53</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">54</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">55</span> <span style="color: #008000;">//</span><span style="color: #008000;">生产者</span><br><span style="color: #008080;">56</span> <span style="color: #0000ff;">class</span> Product <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable{<br></span><span style="color: #008080;">57</span> <span style="color: #000000;">    Basket basket;<br></span><span style="color: #008080;">58</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Product(Basket basket) {<br></span><span style="color: #008080;">59</span>         <span style="color: #0000ff;">this</span>.basket =<span style="color: #000000;"> basket;<br></span><span style="color: #008080;">60</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">61</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">62</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 20; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">63</span>             ManTou m = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ManTou(i);<br></span><span style="color: #008080;">64</span> <span style="color: #000000;">            basket.push(m);<br></span><span style="color: #008080;">65</span>             System.out.println(“生产了”+<span style="color: #000000;">m);<br></span><span style="color: #008080;">66</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">67</span>                 Thread.sleep(1<span style="color: #000000;">);<br></span><span style="color: #008080;">68</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">69</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">70</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">71</span><br><span style="color: #008080;">72</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">73</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">74</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">75</span><br><span style="color: #008080;">76</span> <span style="color: #008000;">//</span><span style="color: #008000;">消费者</span><br><span style="color: #008080;">77</span> <span style="color: #0000ff;">class</span> Consumer <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable{<br></span><span style="color: #008080;">78</span> <span style="color: #000000;">    Basket basket;<br></span><span style="color: #008080;">79</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Consumer(Basket basket) {<br></span><span style="color: #008080;">80</span>         <span style="color: #0000ff;">this</span>.basket =<span style="color: #000000;"> basket;<br></span><span style="color: #008080;">81</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">82</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">83</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 20; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">84</span>             ManTou m =<span style="color: #000000;"> basket.pop();<br></span><span style="color: #008080;">85</span>             System.out.println(“消费了”+<span style="color: #000000;">m);<br></span><span style="color: #008080;">86</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">87</span>                 Thread.sleep((<span style="color: #0000ff;">int</span>)(Math.random()*1000<span style="color: #000000;">));<br></span><span style="color: #008080;">88</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">89</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">90</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">91</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">92</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">93</span> }</pre><br></div>

<p><span style="color: #000000;">　　wait()、notify()、notifyAll()方法的作用：</span></p>
<p><span style="color: #000000;">　　　　wait():导致当前的线程等待，直到其他线程调用此对象的 <a href="http://www.cnblogs.com/java/lang/Object.html#notify(" target="_blank" rel="external"><code>notify()</code></a>) 方法或 <a href="http://www.cnblogs.com/java/lang/Object.html#notifyAll(" target="_blank" rel="external"><code>notifyAll()</code></a>) 方法。</span></p>
<p><span style="color: #000000;">　　　　notify():唤醒在此对象监视器上等待的单个线程。</span></p>
<p>　　　　notifyAll():唤醒在此对象监视器上等待的所有线程。</p>
<p><span style="color: #000000;">　　wait()与sleep()的区别：</span></p>
<p><span style="color: #000000;">　　　　两个方法的共同点就是让当前线程进入等待状态。</span></p>
<p><span style="color: #000000;">　　　　不同点：</span></p>
<p><span style="color: #000000;">　　　　wait()之后，锁就不归我所有了，必须等醒过来后才能拥有该锁，并且必须要有人唤醒它才会醒过来<br>　　　　sleep()不同，锁还是归我所有，一段时间后会自动醒过来</span></p>
<p><span style="color: #000000;">　　</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/thread-coordinate.html" data-id="ciiy5f4p5000iq1d08fpy9rgr" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/thread-coordinate.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程/">多线程</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-java-multi-thread" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/java-multi-thread.html">java笔记五：多线程的使用</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/java-multi-thread.html">
      <time datetime="2013-04-16T06:54:00.000Z" itemprop="datePublished">2013-04-16</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　以前学习基础的时候学习了一段时间的多线程，上课的时候老师也讲过一遍，那时候感觉学的似懂非懂。因为到现在很长一段时间没有用到多线程的知识，所以现在基本上忘了差不多了。但是下个星期要面试了，所以今天特意又研究了一下多线程，免得被问到多线程问题时什么都不记得了那就麻烦了。现在对java比较熟悉了，所以再一次学习多线程知识，感觉没有那么难了（记得刚接触多线程的时候，感觉非常吃力）。</p>
<p>　　首先讲一下进程和线程的区别：</p>
<p>　　　　进程：每个进程都有独立的代码和数据空间（进程上下文），进程间的切换会有较大的开销，一个进程包含1–n个线程。</p>
<p>　　　　线程：同一类线程共享代码和数据空间，每个线程有独立的运行栈和程序计数器(PC)，线程切换开销小。</p>
<p>　　　　线程和进程一样分为五个阶段：创建、就绪、运行、阻塞、终止。</p>
<p>　　　　多进程是指操作系统能同时运行多个任务（程序）。</p>
<p>　　　　多线程是指在同一程序中有多个顺序流在执行。</p>
<p>　　在java中创建一个线程有两种方法：</p>
<p>　　　　①实现java.lang.Runnable接口，重写run()方法，启动：new Thread(this).start()。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.thread;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ThreadTest1 {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         Runnable1 r = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Runnable1();<br></span><span style="color: #008080;"> 6</span>         <span style="color: #008000;">//</span><span style="color: #008000;">r.run();并不是线程开启，而是简单的方法调用</span><br><span style="color: #008080;"> 7</span>         Thread t = <span style="color: #0000ff;">new</span> Thread(r);<span style="color: #008000;">//</span><span style="color: #008000;">创建线程<br></span><span style="color: #008080;"> 8</span>         <span style="color: #008000;">//</span><span style="color: #008000;">t.run(); </span><span style="color: #008000;">//</span><span style="color: #008000;">如果该线程是使用独立的 Runnable 运行对象构造的，则调用该 Runnable 对象的 run 方法；否则，该方法不执行任何操作并返回。</span><br><span style="color: #008080;"> 9</span>         t.start(); <span style="color: #008000;">//</span><span style="color: #008000;">线程开启</span><br><span style="color: #008080;">10</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 100; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">11</span>             System.out.println(“main:”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">15</span> <span style="color: #0000ff;">class</span> Runnable1 <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Runnable{<br></span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 100; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">18</span>             System.out.println(“Thread—–:”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span> }</pre><br></div>

<p>　　要注意的是：</p>
<p>　　　　1.r.run()并不是启动线程，而是简单的方法调用。</p>
<p>　　　　2.Thread也有run()方法，如果该线程是使用独立的 Runnable 运行对象构造的，则调用该 Runnable 对象的 run 方法；否则，该方法不执行任何操作并返回。</p>
<p>　　　　3.并不是一启动线程（调用start()方法）就执行这个线程，而是进入就绪状态，什么时候运行要看CUP。</p>
<p>　　　　②继承java.lang.Thread类，重写run()方法。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.thread;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestThread2 {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         Thread1 t = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread1();<br></span><span style="color: #008080;"> 6</span>         <span style="color: #008000;">//</span><span style="color: #008000;">t.run(); </span><span style="color: #008000;">//</span><span style="color: #008000;">这里也不能直接调用方法</span><br><span style="color: #008080;"> 7</span> <span style="color: #000000;">        t.start();<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 100; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;"> 9</span>             System.out.println(“main:”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">13</span><br><span style="color: #008080;">14</span> <span style="color: #008000;">//</span><span style="color: #008000;">尽量使用实现Runnnable接口，因为接口比较灵活</span><br><span style="color: #008080;">15</span> <span style="color: #0000ff;">class</span> Thread1 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Thread{<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">17</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 100; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">19</span>             System.out.println(“Thread—–:”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">22</span> }</pre><br></div>

<p>虽然两种方法都可行，但是最好还是用第一种方法，因为使用接口灵活性好，java中时单继承、多实现。</p>
<p>Thread类中常用的方法有：</p>
<p>　　①sleep(long millis):&nbsp;在指定的毫秒数内让当前正在执行的线程休眠（暂停执行）。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.thread;<br></span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Date;<br></span><span style="color: #008080;"> 3</span> <span style="color: #008000;">/<em>*</em></span><br><span style="color: #008080;"> 4</span> <span style="color: #008000;">  sleep()指在指定的毫秒数内让当前正在执行的线程休眠（暂停执行）。<br></span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> <em> </em></span><span style="color: #808080;">@author</span><span style="color: #008000;"> Administrator<br></span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> <br></span><span style="color: #008080;"> 7</span>  <span style="color: #008000;">*/</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> SleepTest {<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">10</span>         Thread2 t = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Thread2();<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        t.start();<br></span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">13</span>             Thread.sleep(10000); <span style="color: #008000;">//</span><span style="color: #008000;">主线程睡眠10秒钟</span><br><span style="color: #008080;">14</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">            e.printStackTrace();<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">主线程睡眠10秒钟后结束t线程<br></span><span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">t.interrupt(); </span><span style="color: #008000;">//</span><span style="color: #008000;">这种结束方式比较粗暴，如果t线程打开了某个资源还没来得及关闭也就是run方法还没有执行完就强制结束线程，会导致资源无法关闭<br></span><span style="color: #008080;">19</span>         <span style="color: #008000;">//</span><span style="color: #008000;">t.stop();也是结束某个线程，这种方式比interrupt()更粗暴</span><br><span style="color: #008080;">20</span>         t.flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">23</span> <span style="color: #0000ff;">class</span> Thread2 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Thread{<br></span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">boolean</span> flag = <span style="color: #0000ff;">true</span>; <span style="color: #008000;">//</span><span style="color: #008000;">用这种方式结束线程很不错，用一个变量控制run方法什么时候不再执行，不会出现run方法没有执行完毕就结束</span><br><span style="color: #008080;">25</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">26</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> run() { <span style="color: #008000;">//</span><span style="color: #008000;">run方法一结束，整个线程就终止了</span><br><span style="color: #008080;">27</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(flag){<br></span><span style="color: #008080;">28</span>             System.out.println(“—“+<span style="color: #0000ff;">new</span> Date()+”—“<span style="color: #000000;">);<br></span><span style="color: #008080;">29</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">30</span>                 sleep(1000<span style="color: #000000;">);<br></span><span style="color: #008080;">31</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">32</span>                 <span style="color: #0000ff;">return</span><span style="color: #000000;">;<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">36</span> }</pre><br></div>

<p>&nbsp;</p>
<p>　　②join():指等待t线程终止。也可以理解为将t线程合并到当前线程来，等待t线程结束后再往下执行。相当于方法调用</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.thread;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Date;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #008000;">/<em></em></span><br><span style="color: #008080;"> 6</span> <span style="color: #008000;">  t.join()方法指等待t线程终止。也可以理解为将t线程合并到当前线程来，等待t线程结束后再往下执行。相当于方法调用<br></span><span style="color: #008080;"> 7</span>  <span style="color: #008000;">*/</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestJoin {<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">10</span>         Thread t = <span style="color: #0000ff;">new</span> Thread3(“abc”<span style="color: #000000;">);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        t.start();<br></span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 20; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">13</span>             System.out.println(“我是main线程”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">if</span>(i==10<span style="color: #000000;">){<br></span><span style="color: #008080;">15</span>                 <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">                    t.join();<br></span><span style="color: #008080;">17</span>                 } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e1) {<br></span><span style="color: #008080;">18</span>                     <span style="color: #008000;">//</span><span style="color: #008000;"> TODO Auto-generated catch block</span><br><span style="color: #008080;">19</span> <span style="color: #000000;">                    e1.printStackTrace();<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">22</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">23</span>                 Thread.sleep(1000<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">30</span> <span style="color: #0000ff;">class</span> Thread3 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Thread{<br></span><span style="color: #008080;">31</span>     <span style="color: #0000ff;">public</span> Thread3(String s) { <span style="color: #008000;">//</span><span style="color: #008000;">给该线程取一个名字，用getName()方法可以去到该名字</span><br><span style="color: #008080;">32</span>         <span style="color: #0000ff;">super</span><span style="color: #000000;">(s);<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">35</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">36</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 20; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">37</span>             System.out.println(“我是”+getName()+”线程”<span style="color: #000000;">);<br></span><span style="color: #008080;">38</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">39</span>                 sleep(1000<span style="color: #000000;">);<br></span><span style="color: #008080;">40</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (InterruptedException e) {<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">                e.printStackTrace();<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">45</span> }</pre><br></div>

<p>运行该程序结果为：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">我是abc线程<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">我是main线程<br></span><span style="color: #008080;">40</span> 我是main线程</pre><br></div>

<p>可以看到从第22行起就开始顺序执行了，因为i=10的时候就将该形成合并了。</p>
<p>　　③yield():暂停当前正在执行的线程对象，并执行其他线程。</p>
<p>　　④setPriority():&nbsp;更改线程的优先级。</p>
<p>　　　　MIN_PRIORITY = 1<br>&nbsp; 　　&nbsp;&nbsp;&nbsp;NORM_PRIORITY = 5<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;MAX_PRIORITY = 10</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.thread;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span><br><span style="color: #008080;"> 4</span> <span style="color: #008000;">/<em></em></span><span style="color: #008000;">t.yield()暂停当前正在执行的线程对象，并执行其他线程。<br></span><span style="color: #008080;"> 5</span> <span style="color: #008000;"> <br></span><span style="color: #008080;"> 6</span> <span style="color: #008000;"> <em> MIN_PRIORITY 1<br></em></span><span style="color: #008080;"> 7</span> <span style="color: #008000;">  NORM_PRIORITY 5<br></span><span style="color: #008080;"> 8</span> <span style="color: #008000;"> <em> MAX_PRIORITY 10<br></em></span><span style="color: #008080;"> 9</span>  <span style="color: #008000;">/</span><br><span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestYield {<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">12</span>         Thread4 t1 = <span style="color: #0000ff;">new</span> Thread4(“t1”<span style="color: #000000;">);<br></span><span style="color: #008080;">13</span>         Thread4 t2 = <span style="color: #0000ff;">new</span> Thread4(“t2”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">        t1.setPriority(Thread.MAX_PRIORITY);<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">        t2.setPriority(Thread.MIN_PRIORITY);<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        System.out.println(t1.getPriority());<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">        System.out.println(t2.getPriority());<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">        t1.start();<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        t2.start();<br></span><span style="color: #008080;">20</span><br><span style="color: #008080;">21</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">23</span> <span style="color: #0000ff;">class</span> Thread4 <span style="color: #0000ff;">extends</span><span style="color: #000000;"> Thread{<br></span><span style="color: #008080;">24</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Thread4(String s) {<br></span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">super</span><span style="color: #000000;">(s);<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">28</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 1000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">30</span>             System.out.println(“我是”+getName()+”线程”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">31</span>             <span style="color: #0000ff;">if</span>(i%10 == 0<span style="color: #000000;">){<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">                yield();<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">36</span> }</pre><br></div>

<p>由于运行结果太长就没有贴上来了，运行该程序，可以看到t1和t2两个进程每次当i为10的倍数时都会让给其他线程执行。</p>
<p>　　⑤interrupt():中断某个线程，这种结束方式比较粗暴，如果t线程打开了某个资源还没来得及关闭也就是run方法还没有执行完就强制结束线程，会导致资源无法关闭</p>
<p>　　要想结束进程最好的办法就是用sleep()函数的例子程序里那样，在线程类里面用以个boolean型变量来控制run()方法什么时候结束，run()方法一结束，该线程也就结束了。</p>
<p>　　⑥还有很多的方法就不一一列举了………</p>
<p>　　当然，多线程难点不在这些，多线程的难点在于多线程之间的协调。关于多线程的协调待续……..</p>
<p>&nbsp;</p>
<p>　　</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/java-multi-thread.html" data-id="ciiy5f4ub008cq1d0rzz421et" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/java-multi-thread.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程/">多线程</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-java-set" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/java-set.html">java笔记四：Set接口</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/java-set.html">
      <time datetime="2013-04-16T00:30:00.000Z" itemprop="datePublished">2013-04-16</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　Set不保存重复的元素。Set中最常被使用的是测试归属性，你可以很容易的询问某个对象是否在某个Set中。Set具有与Collection完全一样的接口，因此没有任何额外的功能。实际上Set就是Collection，只是行为不同。</p>
<p>　　实现了Set接口的主要有HashSet、TreeSet、LinkedHashSet这几个共同点就是每个相同的项只保存一份。他们也有不同点，区别如下：</p>
<p>　　1.HashSet：</p>
<p>　　HashSet使用的是相当复杂的方式来存储元素的，使用HashSet能够最快的获取集合中的元素，效率非常高（以空间换时间）。会根据hashcode和equals来庞端是否是同一个对象，如果hashcode一样，并且equals返回true，则是同一个对象，不能重复存放。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.set;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.HashSet;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Set;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Student{<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> Student(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.id+””<span style="color: #000000;">;<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> hashCode() {<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.id;<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> equals(Object obj) {<br></span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">if</span> (obj <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> Student){<br></span><span style="color: #008080;">22</span>             Student  stu =<span style="color: #000000;"> (Student) obj;<br></span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">if</span> (stu.id == <span style="color: #0000ff;">this</span><span style="color: #000000;">.id)<br></span><span style="color: #008080;">24</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">26</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">29</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HashSetTest {<br></span><span style="color: #008080;">30</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">31</span>         Set<student> set = <span style="color: #0000ff;">new</span> HashSet<student><span style="color: #000000;">();<br></span><span style="color: #008080;">32</span>         Student s1 = <span style="color: #0000ff;">new</span> Student(1<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span>         Student s2 = <span style="color: #0000ff;">new</span> Student(1<span style="color: #000000;">);<br></span><span style="color: #008080;">34</span>         Student s3 = <span style="color: #0000ff;">new</span> Student(2<span style="color: #000000;">);<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        set.add(s1);<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">        set.add(s2);<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">        set.add(s3);<br></span><span style="color: #008080;">38</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Student s : set) {<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">            System.out.println(s);<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">42</span> }</student></student></pre><br></div>

<p>正如上例所示，重写了hashCode()和equals()方法来区分同意对象后，就不能存放同以对象了。如果注释这两个方法，则所有Student对象视为不同对象，都可以存放。</p>
<p>&nbsp;</p>
<p>　　2.TreeSet</p>
<p>　　TreeSet也不能存放重复对象，但是TreeSet会自动排序，如果存放的对象不能排序则会报错，所以存放的对象必须指定排序规则。排序规则包括自然排序和客户排序。</p>
<p>　　①自然排序：TreeSet要添加哪个对象就在哪个对象类上面实现java.lang.Comparable接口，并且重写comparaTo()方法，返回0则表示是同一个对象，否则为不同对象。</p>
<p>　　②客户排序：建立一个第三方类并实现java.util.Comparator接口。并重写方法。定义集合形式为TreeSet ts = new TreeSet(new 第三方类());</p>
<p>下面一个例子用TreeSet存放自然排序的对象：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.set;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Set;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.TreeSet;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">class</span> Student1 <span style="color: #0000ff;">implements</span> Comparable<student1><span style="color: #000000;">{<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> Student1(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.id+””<span style="color: #000000;">;<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> hashCode() {<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.id;<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> equals(Object obj) {<br></span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">if</span> (obj <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> Student1){<br></span><span style="color: #008080;">22</span>             Student1  stu =<span style="color: #000000;"> (Student1) obj;<br></span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">if</span> (stu.id == <span style="color: #0000ff;">this</span><span style="color: #000000;">.id)<br></span><span style="color: #008080;">24</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">26</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">28</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> compareTo(Student1 o) {<br></span><span style="color: #008080;">29</span>         <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">this</span>.id-<span style="color: #000000;">o.id);<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">32</span><br><span style="color: #008080;">33</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TreeSetTest {<br></span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">35</span>         Set<student1> set = <span style="color: #0000ff;">new</span> TreeSet<student1><span style="color: #000000;">();<br></span><span style="color: #008080;">36</span>         Student1 s1 = <span style="color: #0000ff;">new</span> Student1(5<span style="color: #000000;">);<br></span><span style="color: #008080;">37</span>         Student1 s2 = <span style="color: #0000ff;">new</span> Student1(1<span style="color: #000000;">);<br></span><span style="color: #008080;">38</span>         Student1 s3 = <span style="color: #0000ff;">new</span> Student1(2<span style="color: #000000;">);<br></span><span style="color: #008080;">39</span>         Student1 s4 = <span style="color: #0000ff;">new</span> Student1(4<span style="color: #000000;">);<br></span><span style="color: #008080;">40</span>         Student1 s5 = <span style="color: #0000ff;">new</span> Student1(3<span style="color: #000000;">);<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">        set.add(s1);<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">        set.add(s2);<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">        set.add(s3);<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">        set.add(s4);<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">        set.add(s5);<br></span><span style="color: #008080;">46</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Student1 s : set) {<br></span><span style="color: #008080;">47</span> <span style="color: #000000;">            System.out.println(s);<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">49</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">50</span><br><span style="color: #008080;">51</span> }</student1></student1></student1></pre><br></div>

<p>输出结果为：<br>1<br>2<br>3<br>4<br>5</p>
<p>下面一个例子用TreeSet存放客户排序的对象：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.set;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Set;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.TreeSet;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">class</span> MySort <span style="color: #0000ff;">implements</span> java.util.Comparator<student2><span style="color: #000000;">{<br></span><span style="color: #008080;"> 7</span><br><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> compare(Student2 o1, Student2 o2) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">return</span> o2.id-<span style="color: #000000;">o1.id;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">12</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Student2{<br></span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span> Student2(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {<br></span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.id+””<span style="color: #000000;">;<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">22</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> hashCode() {<br></span><span style="color: #008080;">23</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.id;<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">26</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> equals(Object obj) {<br></span><span style="color: #008080;">27</span>         <span style="color: #0000ff;">if</span> (obj <span style="color: #0000ff;">instanceof</span><span style="color: #000000;"> Student2){<br></span><span style="color: #008080;">28</span>             Student2  stu =<span style="color: #000000;"> (Student2) obj;<br></span><span style="color: #008080;">29</span>             <span style="color: #0000ff;">if</span> (stu.id == <span style="color: #0000ff;">this</span><span style="color: #000000;">.id)<br></span><span style="color: #008080;">30</span>                 <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">32</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">35</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TreeSetTest2 {<br></span><span style="color: #008080;">36</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">37</span>         Set<student2> set = <span style="color: #0000ff;">new</span> TreeSet<student2>(<span style="color: #0000ff;">new</span><span style="color: #000000;"> MySort());<br></span><span style="color: #008080;">38</span>         Student2 s1 = <span style="color: #0000ff;">new</span> Student2(5<span style="color: #000000;">);<br></span><span style="color: #008080;">39</span>         Student2 s2 = <span style="color: #0000ff;">new</span> Student2(1<span style="color: #000000;">);<br></span><span style="color: #008080;">40</span>         Student2 s3 = <span style="color: #0000ff;">new</span> Student2(2<span style="color: #000000;">);<br></span><span style="color: #008080;">41</span>         Student2 s4 = <span style="color: #0000ff;">new</span> Student2(4<span style="color: #000000;">);<br></span><span style="color: #008080;">42</span>         Student2 s5 = <span style="color: #0000ff;">new</span> Student2(3<span style="color: #000000;">);<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">        set.add(s1);<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">        set.add(s2);<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">        set.add(s3);<br></span><span style="color: #008080;">46</span> <span style="color: #000000;">        set.add(s4);<br></span><span style="color: #008080;">47</span> <span style="color: #000000;">        set.add(s5);<br></span><span style="color: #008080;">48</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Student2 s : set) {<br></span><span style="color: #008080;">49</span> <span style="color: #000000;">            System.out.println(s);<br></span><span style="color: #008080;">50</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">51</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">52</span><br><span style="color: #008080;">53</span> }</student2></student2></student2></pre><br></div>

<p>输出结果为：<br>5<br>4<br>3<br>2<br>1</p>
<p>大家都知道List存放时按照插入顺序排序的，其实也可以用自然排序和客户排序对List集合排序，大家请看：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.set;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Collections;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">class</span> MySort1 <span style="color: #0000ff;">implements</span> java.util.Comparator<student3><span style="color: #000000;">{<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> compare(Student3 o1, Student3 o2) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">return</span> o2.id-<span style="color: #000000;">o1.id;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">12</span> <span style="color: #0000ff;">class</span> Student3 <span style="color: #0000ff;">implements</span> Comparable<student3><span style="color: #000000;">{<br></span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">public</span> Student3(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {<br></span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.id+””<span style="color: #000000;">;<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> compareTo(Student3 o) {<br></span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">return</span> (<span style="color: #0000ff;">this</span>.id-<span style="color: #000000;">o.id);<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">25</span><br><span style="color: #008080;">26</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ListSort {<br></span><span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">28</span>         List<student3> list = <span style="color: #0000ff;">new</span> ArrayList<student3><span style="color: #000000;">();<br></span><span style="color: #008080;">29</span>         Student3 s1 = <span style="color: #0000ff;">new</span> Student3(5<span style="color: #000000;">);<br></span><span style="color: #008080;">30</span>         Student3 s2 = <span style="color: #0000ff;">new</span> Student3(1<span style="color: #000000;">);<br></span><span style="color: #008080;">31</span>         Student3 s3 = <span style="color: #0000ff;">new</span> Student3(2<span style="color: #000000;">);<br></span><span style="color: #008080;">32</span>         Student3 s4 = <span style="color: #0000ff;">new</span> Student3(4<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span>         Student3 s5 = <span style="color: #0000ff;">new</span> Student3(3<span style="color: #000000;">);<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        list.add(s1);<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        list.add(s2);<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">        list.add(s3);<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">        list.add(s4);<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">        list.add(s5);<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">        System.out.println(list);<br></span><span style="color: #008080;">40</span>         <span style="color: #008000;">//</span><span style="color: #008000;">自然排序：</span><br><span style="color: #008080;">41</span> <span style="color: #000000;">        Collections.sort(list);<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">        System.out.println(list);<br></span><span style="color: #008080;">43</span>         <span style="color: #008000;">//</span><span style="color: #008000;">客户排序</span><br><span style="color: #008080;">44</span>         Collections.sort(list, <span style="color: #0000ff;">new</span><span style="color: #000000;"> MySort1());<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">        System.out.println(list);<br></span><span style="color: #008080;">46</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">47</span> }</student3></student3></student3></student3></pre><br></div>

<p>输出结果为：<br>[5, 1, 2, 4, 3]<br>[1, 2, 3, 4, 5]<br>[5, 4, 3, 2, 1]</p>
<p>&nbsp;</p>
<p>　　3.LinkedHashSet</p>
<p>　　LinkedHashSet按照插入顺序保存对象，同时还保存了HashSet的查询速度。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/java-set.html" data-id="ciiy5f4u3007yq1d0d813dzud" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/java-set.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-design-pattern-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/design-pattern-command.html">设计模式之命令模式</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/design-pattern-command.html">
      <time datetime="2013-04-15T04:41:00.000Z" itemprop="datePublished">2013-04-15</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　在许多设计中，经常设计一个对象请求另一个对象执行某一个操作。如果请求者无法或者不希望直接和被请求者打交道，即请求对象无法或者不希望含有被请求者的引用，那么可以使用命令模式。命令模式里称提出请求的对象为请求者，被请求者的对象为接收者。在命令模式中，当一个对象请求另一个对象调用其方法时，不和被请求者直接打交道，而是把这种&ldquo;请求&rdquo;封装到一个&ldquo;命令&rdquo;对象中，封装的手段将&ldquo;请求&rdquo;封装到&ldquo;命令&rdquo;对象的一个方法中。命令模式的核心就是使用命令对象来封装方法调用。</p>
<p>　　例如，在军队作战时，指挥官要命令三连偷袭敌人。但是指挥官这时无法或者不希望和三连直接取得联系，那么指挥官可以发出一个命令，把该命令的执行者设置为三连。这样指挥官只要和命令打交道。</p>
<p>　　命令模式包含四种角色：</p>
<p>　　接收者：接收者是一个类的实例，该实例负责执行与请求相关的操作。</p>
<p>　　命令接口：命令式一个接口，规定了用来封装&ldquo;请求&rdquo;的若干个方法，比如execute()、undo()等方法。</p>
<p>　　具体命令：具体命令式实现了命令接口的类的实例，包含命令接口的方法。并且包含接受者的引用，指明那个对象去执行该命令。</p>
<p>　　请求者：请求者是包含命令接口变量类的实例，该接口变量可以存放任何具体命令的引用。请求者负责调用具体命令，让具体命令执行那些封装了的请求方法。</p>
<p>下面看军队作战的例子：</p>
<p>　　1.命令接收者：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command;<br></span><span style="color: #008080;">2</span> <span style="color: #008000;">//</span><span style="color: #008000;">命令接收者、执行者</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CompanyArmy {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> sneakAttack(){<br></span><span style="color: #008080;">5</span>         System.out.println(“我们知道如何袭击敌人，保证完成任务”<span style="color: #000000;">);<br></span><span style="color: #008080;">6</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">7</span> }</pre><br></div>

<p>　　2.命令接口：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command;<br></span><span style="color: #008080;">2</span> <span style="color: #008000;">//</span><span style="color: #008000;">命令接口</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Command {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> execute();<br></span><span style="color: #008080;">5</span> }</pre><br></div>

<p>　　3.具体命令：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command;<br></span><span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;">具体命令</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ConcreteCommand <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Command{<br></span><span style="color: #008080;"> 4</span>     CompanyArmy army;  <span style="color: #008000;">//</span><span style="color: #008000;">含有接收者的引用</span><br><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> ConcreteCommand(CompanyArmy army) {<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">this</span>.army =<span style="color: #000000;"> army;<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> execute() {   <span style="color: #008000;">//</span><span style="color: #008000;">封装着指挥官的请求</span><br><span style="color: #008080;"> 9</span>         army.sneakAttack();   <span style="color: #008000;">//</span><span style="color: #008000;">偷袭敌人</span><br><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> }</pre><br></div>

<p>　　4.请求者：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command;<br></span><span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;">请求者，也就是命令发送者</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ArmySuperior {<br></span><span style="color: #008080;"> 4</span>     Command command;     <span style="color: #008000;">//</span><span style="color: #008000;">存放具体命令的引用</span><br><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setCommand(Command command){<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">this</span>.command =<span style="color: #000000;"> command;<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> startExecuteCommand(){<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        command.execute();<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> }</pre><br></div>

<p>　　命令模式所需要的四个角色已经建立好了，下面测试一下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         CompanyArmy army = <span style="color: #0000ff;">new</span> CompanyArmy();   <span style="color: #008000;">//</span><span style="color: #008000;">创建命令接收者</span><br><span style="color: #008080;"> 6</span>         Command command = <span style="color: #0000ff;">new</span> ConcreteCommand(army);<span style="color: #008000;">//</span><span style="color: #008000;">创建一个具体命令并且指定接收者</span><br><span style="color: #008080;"> 7</span>         ArmySuperior superior = <span style="color: #0000ff;">new</span> ArmySuperior();    <span style="color: #008000;">//</span><span style="color: #008000;">创建命令请求者</span><br><span style="color: #008080;"> 8</span>         superior.setCommand(command);   <span style="color: #008000;">//</span><span style="color: #008000;">给请求者设置一个具体命令</span><br><span style="color: #008080;"> 9</span>         superior.startExecuteCommand();   <span style="color: #008000;">//</span><span style="color: #008000;">开始执行命令</span><br><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span> }</pre><br></div>

<p>　　这样就可以实现指挥官不直接和命令执行者，只需要发送一个命令，该命令就会找到指定的执行者去执行。这样大大降低了程序的耦合度。另外还有一个好处就是，要想发送另外一个命令只要再创建一个具体的命令即可，不需要修改其他代码，增强了程序的扩展性。</p>
<p>　　使用命令模式还有一个好处，就是可以撤销所执行的操作。也就是请求者发送一个请求，接收者执行后，还可以撤销该操作。以下使用一个简单的例子说明怎样在具体的命令中实现undo()方法。问题如下：</p>
<p>　　请求者请求在硬盘建立一个目录，请求成功后海可以撤销请求。这就要求接收者不仅可以在硬盘上建立目录，海可以删除上一次建立的目录。</p>
<p>　　1接收者：要包含两个方法，建立目录和删除目录</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command1;<br></span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.File;<br></span><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">命令接收者</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> MakeDir {<br></span><span style="color: #008080;"> 5</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建目录</span><br><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> createDir(String name){<br></span><span style="color: #008080;"> 7</span>         File dir = <span style="color: #0000ff;">new</span><span style="color: #000000;"> File(name);<br></span><span style="color: #008080;"> 8</span> <span style="color: #000000;">        dir.mkdir();<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">10</span>     <span style="color: #008000;">//</span><span style="color: #008000;">删除目录</span><br><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> deleteDir(String name){<br></span><span style="color: #008080;">12</span>         File dir = <span style="color: #0000ff;">new</span><span style="color: #000000;"> File(name);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">        dir.delete();<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">15</span> }</pre><br></div>

<p>&nbsp;</p>
<p>　　2.命令接口</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command1;<br></span><span style="color: #008080;">2</span> <span style="color: #008000;">//</span><span style="color: #008000;">包含撤销的命令接口</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Command {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> execute(String name);<br></span><span style="color: #008080;">5</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> undo();<br></span><span style="color: #008080;">6</span> }</pre><br></div>

<p>&nbsp;</p>
<p>　　3.具体命令</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command1;<br></span><span style="color: #008080;"> 2</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">具体命令</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ConcreteCommand <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Command {<br></span><span style="color: #008080;"> 5</span>     ArrayList<string><span style="color: #000000;"> dirNameList;<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    MakeDir makeDir;<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> ConcreteCommand(MakeDir makeDir) {<br></span><span style="color: #008080;"> 8</span>         dirNameList = <span style="color: #0000ff;">new</span> ArrayList<string><span style="color: #000000;">();<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">this</span>.makeDir =<span style="color: #000000;"> makeDir;<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> execute(String name) {<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        makeDir.createDir(name);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">        dirNameList.add(name);<br></span><span style="color: #008080;">14</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> undo() {<br></span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">if</span>(dirNameList.size()&gt;0<span style="color: #000000;">){<br></span><span style="color: #008080;">17</span>             makeDir.deleteDir(dirNameList.get(dirNameList.size()-1<span style="color: #000000;">));<br></span><span style="color: #008080;">18</span>             dirNameList.remove(dirNameList.size()-1<span style="color: #000000;">);<br></span><span style="color: #008080;">19</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">20</span>             System.out.println(“没有需要撤销的操作！”<span style="color: #000000;">);<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">23</span> }</string></string></pre><br></div>

<p>&nbsp;</p>
<p>　　4.请求者</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command1;<br></span><span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;">请求者</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RequestMakeDir {<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    Command command;<br></span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setCommand(Command command) {<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">this</span>.command =<span style="color: #000000;"> command;<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> startExecuteCommand(String name){<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        command.execute(name);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> undoCommand(){<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        command.undo();<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">14</span> }</pre><br></div>

<p>　　包含撤销的命令模式的四个角色创建好了，下面写一个测试类：</p>
<div class="cnblogs_code"><br><pre><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.command1;<br><br></span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br>    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br>        MakeDir makeDir </span>= <span style="color: #0000ff;">new</span> MakeDir();  <span style="color: #008000;">//</span><span style="color: #008000;">创建接收者</span><br>        Command command = <span style="color: #0000ff;">new</span> ConcreteCommand(makeDir);<span style="color: #008000;">//</span><span style="color: #008000;">创建具体命令并且指定接收者</span><br>        RequestMakeDir request = <span style="color: #0000ff;">new</span> RequestMakeDir(); <span style="color: #008000;">//</span><span style="color: #008000;">创建请求者</span><br>        request.setCommand(command);   <span style="color: #008000;">//</span><span style="color: #008000;">设置命令</span><br>        request.startExecuteCommand(“haha”);  <span style="color: #008000;">//</span><span style="color: #008000;">创建目录</span><br>        request.startExecuteCommand(“hahaa”<span style="color: #000000;">);<br>        request.undoCommand();  </span><span style="color: #008000;">//</span><span style="color: #008000;">撤销</span><br><span style="color: #000000;">        request.undoCommand();<br>    }<br>}</span></pre><br></div>

<p>　　这样就可以创建目录和撤销操作了。</p>
<p>　　</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/design-pattern-command.html" data-id="ciiy5f4wh00c3q1d0n046t0lj" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/design-pattern-command.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-java-list" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/java-list.html">java笔记三：List接口</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/java-list.html">
      <time datetime="2013-04-14T21:23:00.000Z" itemprop="datePublished">2013-04-15</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　List承诺可以将元素维护在特定的序列中。List接口在Collection的基础上添加了大量的方法，使得可以在List的中间插入和删除元素。List与 set 不同，列表通常允许重复的元素。并且存放的顺序与插入的顺序一致。</p>
<p>　　List接口的常用方法有：</p>
<p>　　<code>**[add](http://www.cnblogs.com/java/util/List.html#add(E))**([E](http://www.cnblogs.com/java/util/List.html &quot;List 中的类型参数&quot;) o)</code>&nbsp;&nbsp; :将指定对象加入到列表中。</p>
<p>　　<code>**[add](http://www.cnblogs.com/java/util/List.html#add(int, E))**(int index, [E](http://www.cnblogs.com/java/util/List.html &quot;List 中的类型参数&quot;) element)</code>&nbsp; ：将对象加入到指定位置处。</p>
<p>　　<code>**[addAll](http://www.cnblogs.com/java/util/List.html#addAll(java.util.Collection))**([Collection](http://www.cnblogs.com/java/util/Collection.html &quot;java.util 中的接口&quot;)&lt;? extends [E](http://www.cnblogs.com/java/util/List.html &quot;List 中的类型参数&quot;)&gt; c)</code>&nbsp; ：追加指定 collection 中的所有元素到此列表的结尾，顺序是指定 collection 的迭代器返回这些元素的顺序（可选操作）。</p>
<p>　　<code>**[addAll](http://www.cnblogs.com/java/util/List.html#addAll(int, java.util.Collection))**(int index, [Collection](http://www.cnblogs.com/java/util/Collection.html &quot;java.util 中的接口&quot;)&lt;? extends [E](http://www.cnblogs.com/java/util/List.html &quot;List 中的类型参数&quot;)&gt; c) ：将指定 collection 中的所有元素都插入到列表中的指定位置（可选操作）。</code></p>
<p>　　<code>**[remove](http://www.cnblogs.com/java/util/List.html#remove(int))**(int index)</code> ：移除某个位置上的元素。</p>
<p>　　<code>**[remove](http://www.cnblogs.com/java/util/List.html#remove(java.lang.Object))**([Object](http://www.cnblogs.com/java/lang/Object.html &quot;java.lang 中的类&quot;) o)</code> ：&nbsp;移除列表中出现的首个指定元素。</p>
<p>　　<code>**[set](http://www.cnblogs.com/java/util/List.html#set(int, E))**(int index, [E](http://www.cnblogs.com/java/util/List.html &quot;List 中的类型参数&quot;) element) ：用指定元素替换列表中指定位置的元素。</code></p>
<p>　　<code>**[size](http://www.cnblogs.com/java/util/List.html#size())**()</code> ：返回列表大小。<br>　　…….</p>
<p>　　常用的有两种List类型：ArrayList和LinkedList。</p>
<p>　　一、ArrayList</p>
<p>　　ArrayList擅长于随即访问元素，因为它像数组一样提供了下标，可以根据下标直接访问,所以可以将ArrayList看作可扩充自身尺寸的数组。但是在ArrayList的中间插入和移除元素时较慢。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.list;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Iterator;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ArrayListTest {<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 9</span>         List<string> list = <span style="color: #0000ff;">new</span> ArrayList<string><span style="color: #000000;">();<br></span><span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;">添加元素</span><br><span style="color: #008080;">11</span>         list.add(“aaa”<span style="color: #000000;">);<br></span><span style="color: #008080;">12</span>         list.add(“bbb”<span style="color: #000000;">);<br></span><span style="color: #008080;">13</span>         list.add(“aaa”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span>         list.add(“ddd”<span style="color: #000000;">);<br></span><span style="color: #008080;">15</span>         list.add(“ccc”<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span>         list.add(<span style="color: #0000ff;">null</span><span style="color: #000000;">);<br></span><span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">遍历</span><br><span style="color: #008080;">18</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String string : list) {<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">            System.out.println(string);<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">21</span>         System.out.println(“—————“<span style="color: #000000;">);<br></span><span style="color: #008080;">22</span>         <span style="color: #008000;">//</span><span style="color: #008000;">修改</span><br><span style="color: #008080;">23</span>         list.set(1, “bbb2”<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>         <span style="color: #008000;">//</span><span style="color: #008000;">删除</span><br><span style="color: #008080;">25</span>         list.remove(“ccc”<span style="color: #000000;">);<br></span><span style="color: #008080;">26</span>         <span style="color: #008000;">//</span><span style="color: #008000;">迭代器遍历</span><br><span style="color: #008080;">27</span>         Iterator<string> iterator =<span style="color: #000000;"> list.iterator();<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(iterator.hasNext()){<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">            System.out.println(iterator.next());<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">31</span>         System.out.println(“————–”<span style="color: #000000;">);<br></span><span style="color: #008080;">32</span>         list.clear(); <span style="color: #008000;">//</span><span style="color: #008000;">清空列表</span><br><span style="color: #008080;">33</span>         System.out.println(“清空后list的大小”+list.size());<span style="color: #008000;">//</span><span style="color: #008000;">打印大小</span><br><span style="color: #008080;">34</span>         List<string> list2 = <span style="color: #0000ff;">new</span> ArrayList<string><span style="color: #000000;">();<br></span><span style="color: #008080;">35</span>         list2.add(“a”<span style="color: #000000;">);<br></span><span style="color: #008080;">36</span>         list2.add(“b”<span style="color: #000000;">);<br></span><span style="color: #008080;">37</span>         <span style="color: #008000;">//</span><span style="color: #008000;">将list2添加到list中</span><br><span style="color: #008080;">38</span> <span style="color: #000000;">        list.addAll(list2);<br></span><span style="color: #008080;">39</span>         <span style="color: #008000;">//</span><span style="color: #008000;">遍历</span><br><span style="color: #008080;">40</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (String string : list) {<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">            System.out.println(string);<br></span><span style="color: #008080;">42</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">44</span> }</string></string></string></string></string></pre><br></div>

<p>输出结果为:</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #000000;">aaa<br></span><span style="color: #008080;"> 2</span> <span style="color: #000000;">bbb<br></span><span style="color: #008080;"> 3</span> <span style="color: #000000;">aaa<br></span><span style="color: #008080;"> 4</span> <span style="color: #000000;">ddd<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">ccc<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">null</span><br><span style="color: #008080;"> 7</span> —————<br><span style="color: #008080;"> 8</span> <span style="color: #000000;">aaa<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">bbb2<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">aaa<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">ddd<br></span><span style="color: #008080;">12</span> <span style="color: #0000ff;">null</span><br><span style="color: #008080;">13</span> ————–<br><span style="color: #008080;">14</span> <span style="color: #000000;">清空后list的大小0<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">a<br></span><span style="color: #008080;">16</span> b</pre><br></div>

<p>由输出结果的1-5行可以看出，list存放元素的顺序与加入的顺序一致。</p>
<p>　　二、LinkedList</p>
<p>　　LinkedList通过代价较低的在List中间进行插入和删除操作，提供了优化的顺序访问。但是在随即访问方面相对比较慢。</p>
<p>　　下面举个例子来演示LinkedList和ArrayList随即访问的速度：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.list;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.LinkedList;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Random;<br></span><span style="color: #008080;"> 7</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> LinkedListTest {<br></span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">10</span>         List<integer> arraylist = <span style="color: #0000ff;">new</span> ArrayList<integer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 5000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">            arraylist.add(i);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">14</span>         List<integer> linkedlist = <span style="color: #0000ff;">new</span> LinkedList<integer><span style="color: #000000;">();<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 5000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">            linkedlist.add(i);<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">18</span>         Random rand = <span style="color: #0000ff;">new</span> Random(5000<span style="color: #000000;">);<br></span><span style="color: #008080;">19</span>         <span style="color: #008000;">//</span><span style="color: #008000;">随机访问arrayList</span><br><span style="color: #008080;">20</span>         <span style="color: #0000ff;">long</span> start =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">long</span> i = 0; i &lt; 500000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">22</span>             arraylist.get(rand.nextInt(5000<span style="color: #000000;">));<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">long</span> end =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">25</span>         System.out.println(“arrayList随机访问时间：”+(end -<span style="color: #000000;"> start));<br></span><span style="color: #008080;">26</span>         <span style="color: #008000;">//</span><span style="color: #008000;">随机访问arrayList</span><br><span style="color: #008080;">27</span>         start =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">long</span> i = 0; i &lt; 500000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">29</span>             linkedlist.get(rand.nextInt(5000<span style="color: #000000;">));<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">31</span>         end =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">32</span>         System.out.println(“linkedlist随机访问时间：”+(end -<span style="color: #000000;"> start));<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">34</span> }</integer></integer></integer></integer></pre><br></div>

<p>程序运行结果为：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> arrayList随机访问时间：20<br><span style="color: #008080;">2</span> linkedlist随机访问时间：2282</pre><br></div>

<p>很明显ArrayList随即访问比LinkedList快的多，因为LinkedList是以链表的现实存储的。</p>
<p>　　</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/java-list.html" data-id="ciiy5f4ud008gq1d0iwzw5nzm" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/java-list.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-e7-ae-97-e6-b3-95-e7-9a-84-e6-97-b6-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6-e5-92-8c-e7-a9-ba-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/e7-ae-97-e6-b3-95-e7-9a-84-e6-97-b6-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6-e5-92-8c-e7-a9-ba-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6.html">算法的时间复杂度和空间复杂度</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/e7-ae-97-e6-b3-95-e7-9a-84-e6-97-b6-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6-e5-92-8c-e7-a9-ba-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6.html">
      <time datetime="2013-04-14T04:48:00.000Z" itemprop="datePublished">2013-04-14</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/数据结构和算法/">数据结构和算法</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>常用的算法的时间复杂度和空间复杂度</p>
<div class="xspace-itemmessage" style="font: 13px/19px Verdana, Geneva, Arial, Helvetica, sans-serif; color: #4b4b4b; text-transform: none; text-indent: 0px; letter-spacing: normal; word-spacing: 0px; white-space: normal; orphans: 2; widows: 2; font-size-adjust: none; font-stretch: normal; background-color: #ffffff; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"><br><br>&nbsp;<br><br><table style="border: 1px solid #c0c0c0; width: 587px; height: 1px; border-collapse: collapse;" border="1"><br><tbody><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" valign="middle" width="587" height="37"><br><br><span style="line-height: 18px;">排序法</span><br><br></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" width="587" height="37"><span style="line-height: 18px;">最差时间分析</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" width="587" height="37"><span style="line-height: 18px;">平均时间复杂度</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" width="587" height="37"><span style="color: #555555; line-height: 18px;">稳定度</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" width="587" height="37"><span style="color: #555555; line-height: 18px;">空间复杂度</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="42"><span style="line-height: 18px;">冒泡排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="42"><span style="line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="42"><span style="color: #555555; line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="42"><span style="color: #555555; line-height: 18px;">稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="42"><span style="color: #555555; line-height: 18px;">O(1)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">快速排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(n<em>log<sub>2</sub>n)</em></span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">不稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(log<sub>2</sub>n)~O(n)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">选择排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(1)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">二叉树排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(nlog<sub>2</sub>n)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">不一顶</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(n)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><br><br><span style="line-height: 18px;">插入排序</span><br><br></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(n<sup>2</sup>)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(1)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">堆排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O(n<em>log<sub>2</sub>n)</em></span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(nlog<sub>2</sub>n)</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">不稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(1)</span></td><br></tr><br><tr><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">希尔排序</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="line-height: 18px;">O</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">不稳定</span></td><br><td style="padding: 3px; border: 1px solid #c0c0c0; color: #454545; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: 12px; border-collapse: collapse; word-break: normal !important;" align="center" width="587" height="39"><span style="color: #555555; line-height: 18px;">O(1)</span></td><br></tr><br></tbody><br></table><br><br>&nbsp;<br><br>1、时间复杂度<span class="Apple-converted-space">&nbsp;</span> （1）时间频度 一个算法执行所耗费的时间，从理论上是不能算出来的，必须上机运行测试才能知道。但我们不可能也没有必要对每个算法都上机测试，只需知道哪个算法花费的时间多，哪个算法花费的时间少就可以了。并且一个算法花费的时间与算法中语句的执行次数成正比例，哪个算法中语句执行次数多，它花费时间就多。一个算法中的语句执行次数称为语句频度或时间频度。记为T(n)。<span class="Apple-converted-space">&nbsp;</span> （2）时间复杂度 在刚才提到的时间频度中，n称为问题的规模，当n不断变化时，时间频度T(n)也会不断变化。但有时我们想知道它变化时呈现什么规律。为此，我们引入时间复杂度概念。 一般情况下，算法中基本操作重复执行的次数是问题规模n的某个函数，用T(n)表示，若有某个辅助函数f(n),使得当n趋近于无穷大时，T（n)/f(n)的极限值为不等于零的常数，则称f(n)是T(n)的同数量级函数。记作T(n)=Ｏ(f(n)),称Ｏ(f(n)) 为算法的渐进时间复杂度，简称时间复杂度。<span class="Apple-converted-space">&nbsp;</span> 在各种不同算法中，若<span style="color: red; line-height: 19px;">算法中语句执行次数为一个常数，则时间复杂度为O(1),</span>另外，在时间频度不相同时，时间复杂度有可能相同，如T(n)=n2+3n+4与T(n)=4n2+2n+1它们的频度不同，但时间复杂度相同，都为O(n2)。 按数量级递增排列，常见的时间复杂度有：常数阶O(1),对数阶O(log2n),线性阶O(n), 线性对数阶O(nlog2n),平方阶O(n2)，立方阶O(n3),…， k次方阶O(nk),指数阶O(2n)。随着问题规模n的不断增大，上述时间复杂度不断增大，算法的执行效率越低。 2、空间复杂度 与时间复杂度类似，空间复杂度是指算法在计算机内执行时所需存储空间的度量。记作: S(n)=O(f(n)) 我们一般所讨论的是除正常占用内存开销外的辅助存储单元规模。讨论方法与时间复杂度类似，不再赘述。<span class="Apple-converted-space">&nbsp;</span> （3）渐进时间复杂度评价算法时间性能 　　主要用算法时间复杂度的数量级(即算法的渐近时间复杂度)评价一个算法的时间性能。<span class="Apple-converted-space">&nbsp;</span><br><br>2、类似于时间复杂度的讨论，一个算法的空间复杂度(Space Complexity)S(n)定义为该算法所耗费的存储空间，它也是问题规模n的函数。渐近空间复杂度也常常简称为空间复杂度。<span class="Apple-converted-space">&nbsp;</span> 空间复杂度(Space Complexity)是对一个算法在运行过程中临时占用存储空间大小的量度。一个算法在计算机存储器上所占用的存储空间，包括存储算法本身所占用的存储空间，算法的输入输出数据所占用的存储空间和算法在运行过程中临时占用的存储空间这三个方面。算法的输入输出数据所占用的存储空间是由要解决的问题决定的，是通过参数表由调用函数传递而来的，它不随本算法的不同而改变。存储算法本身所占用的存储空间与算法书写的长短成正比，要压缩这方面的存储空间，就必须编写出较短的算法。算法在运行过程中临时占用的存储空间随算法的不同而异，有的算法只需要占用少量的临时工作单元，而且不随问题规模的大小而改变，我们称这种算法是&ldquo;就地\”进行的，是节省存储的算法，如这一节介绍过的几个算法都是如此；有的算法需要占用的临时工作单元数与解决问题的规模n有关，它随着n的增大而增大，当n较大时，将占用较多的存储单元.<br><br>如<span style="color: red; line-height: 19px;">当一个算法的空间复杂度为一个常量，即不随被处理数据量n的大小而改变时，可表示为O(1)；</span>当一个算法的空间复杂度与以2为底的n的对数成正比时，可表示为o(log2n)；当一个算法的空I司复杂度与n成线性比例关系时，可表示为o(n).若形参为数组，则只需要为它分配一个存储由实参传送来的一个地址指针的空间，即一个机器字长空间；若形参为引用方式，则也只需要为其分配存储一个地址的空间，用它来存储对应实参变量的地址，以便由系统自动引用实参变量。<span class="Apple-converted-space">&nbsp;</span><br><br></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/e7-ae-97-e6-b3-95-e7-9a-84-e6-97-b6-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6-e5-92-8c-e7-a9-ba-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6.html" data-id="ciiy5f4w500bjq1d0bppcsgiu" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/e7-ae-97-e6-b3-95-e7-9a-84-e6-97-b6-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6-e5-92-8c-e7-a9-ba-e9-97-b4-e5-a4-8d-e6-9d-82-e5-ba-a6.html#ds-thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
</article>



    
      <article id="post-design-pattern-iterator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/design-pattern-iterator.html">迭代器模式</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/design-pattern-iterator.html">
      <time datetime="2013-04-14T04:28:00.000Z" itemprop="datePublished">2013-04-14</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　迭代器模式遍历集合的成熟模式，迭代器模式的关键是将遍历集合的任务交给一个叫做迭代器的对象，它的工作时遍历并选择序列中的对象，而客户端程序员不必知道或关心该集合序列底层的结构。</p>
<p>　　迭代器模式的结构中包括四种角色。</p>
<p>　　一、集合：一个接口，规定了具体集合需要实现的操作。</p>
<p>　　二、具体集合：具体集合石实现了集合接口的一个实例，具体的集合按照一定的结构存储对象。具体集合应该有一个方法，该方法返回一个针对该集合的具体迭代器。</p>
<p>　　三、迭代器：一个接口，规定了遍历具体集合的方法，比如next()方法。</p>
<p>　　四、具体迭代器：实现了迭代器接口的类的实例。具体迭代器在实现迭代器接口所规定的遍历集合的方法时，比如next()方法，要保证首次调用将按着集合的数据结构找到该集合的一个对象，并且每当找到集合中的一个对象，立即根据该集合的存储结构得到待遍历的后继对象的引用，并保证一次调用next()方法可以遍历集合。</p>
<p>　　下列应用程序中，使用了迭代器模式中所涉及的类。该应用程序模拟点钞，使用HashSet类的实例，即一个集合模拟保险箱HashSet类的实例调用iterator()方法返回一个迭代器，用该迭代器模拟点钞机，而且在点钞过程中销毁假钞。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.iterator;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Collection;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.HashSet;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Iterator;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Application {<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">int</span> n = 20<span style="color: #000000;">;<br></span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">int</span> sum = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">11</span>         Collection<renminmony> set = <span style="color: #0000ff;">new</span> HashSet<renminmony>();<span style="color: #008000;">//</span><span style="color: #008000;">集合对象</span><br><span style="color: #008080;">12</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=1;i&lt;=n;i++<span style="color: #000000;">){<br></span><span style="color: #008080;">13</span>             <span style="color: #0000ff;">if</span>(i==n/2 || i==n/5 || i==n/6<span style="color: #000000;">){<br></span><span style="color: #008080;">14</span>                 set.add(<span style="color: #0000ff;">new</span> RenMinMony(100,<span style="color: #0000ff;">false</span><span style="color: #000000;">));<br></span><span style="color: #008080;">15</span>             }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">16</span>                 set.add(<span style="color: #0000ff;">new</span> RenMinMony(100,<span style="color: #0000ff;">true</span><span style="color: #000000;">));<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">19</span>         Iterator<renminmony> iterator =<span style="color: #000000;"> set.iterator();<br></span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">int</span> jia = 0, zhen = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">21</span>         System.out.println(“保险箱共有”+set.size()+”张人民币！”<span style="color: #000000;">);<br></span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">int</span> k = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">23</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(iterator.hasNext()){<br></span><span style="color: #008080;">24</span>             RenMinMony money =<span style="color: #000000;"> iterator.next();<br></span><span style="color: #008080;">25</span>             k++<span style="color: #000000;">;<br></span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">if</span>(money.isTure() == <span style="color: #0000ff;">false</span><span style="color: #000000;">){<br></span><span style="color: #008080;">27</span>                 System.out.println(“第”+k+”张是假币，被销毁”<span style="color: #000000;">);<br></span><span style="color: #008080;">28</span>                 iterator.remove();<span style="color: #008000;">//</span><span style="color: #008000;">移除掉最近一次本next()返回的对象</span><br><span style="color: #008080;">29</span>                 k++<span style="color: #000000;">;<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">32</span>         System.out.println(“保险箱现有真人民币”+set.size()+”张，总价值是：”<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span>         iterator =<span style="color: #000000;"> set.iterator();<br></span><span style="color: #008080;">34</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(iterator.hasNext()){<br></span><span style="color: #008080;">35</span>             RenMinMony money =<span style="color: #000000;"> iterator.next();<br></span><span style="color: #008080;">36</span>             sum = sum +<span style="color: #000000;"> money.getValue();<br></span><span style="color: #008080;">37</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">38</span>         System.out.println(sum+”元”<span style="color: #000000;">);<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">}<br></span><span style="color: #008080;">41</span><br><span style="color: #008080;">42</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RenMinMony{<br></span><span style="color: #008080;">43</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> value;<br></span><span style="color: #008080;">44</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isTure;<br></span><span style="color: #008080;">45</span>     <span style="color: #0000ff;">public</span> RenMinMony(<span style="color: #0000ff;">int</span> value,<span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isTure) {<br></span><span style="color: #008080;">46</span>         <span style="color: #0000ff;">this</span>.value =<span style="color: #000000;"> value;<br></span><span style="color: #008080;">47</span>         <span style="color: #0000ff;">this</span>.isTure =<span style="color: #000000;"> isTure;<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">49</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getValue() {<br></span><span style="color: #008080;">50</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> value;<br></span><span style="color: #008080;">51</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">52</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> isTure() {<br></span><span style="color: #008080;">53</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> isTure;<br></span><span style="color: #008080;">54</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">55</span> }</renminmony></renminmony></renminmony></pre><br></div>

<p>运行结果如下：<br>保险箱共有20张人民币！<br>第6张是假币，被销毁<br>第12张是假币，被销毁<br>第17张是假币，被销毁<br>保险箱现有真人民币17张，总价值是：<br>1700元</p>
<p>　　迭代器优点之一：能够快速遍历集合。</p>
<p>　　看下面的例子就能感觉出它的快速优势：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.iterator;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Iterator;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.LinkedList;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> TestSpeed {<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 8</span>         LinkedList<string> list = <span style="color: #0000ff;">new</span> LinkedList<string><span style="color: #000000;">();<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 60000; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">10</span>             list.add(“speed”+<span style="color: #000000;">i);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">12</span>         Iterator<string> iter =<span style="color: #000000;"> list.iterator();<br></span><span style="color: #008080;">13</span>         <span style="color: #0000ff;">long</span> startTime =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">14</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(iter.hasNext()){<br></span><span style="color: #008080;">15</span>             String te =<span style="color: #000000;"> iter.next();<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">long</span> endTime =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">18</span>         <span style="color: #0000ff;">long</span> result = endTime -<span style="color: #000000;"> startTime;<br></span><span style="color: #008080;">19</span>         System.out.println(“使用迭代器遍历集合的时间：”+result+”毫秒”<span style="color: #000000;">);<br></span><span style="color: #008080;">20</span>         startTime =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; list.size(); i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">22</span>             String te =<span style="color: #000000;"> list.get(i);<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">24</span>         endTime =<span style="color: #000000;"> System.currentTimeMillis();<br></span><span style="color: #008080;">25</span>         result = endTime -<span style="color: #000000;"> startTime;<br></span><span style="color: #008080;">26</span>         System.out.println(“使用get()遍历集合的时间：”+result+”毫秒”<span style="color: #000000;">);<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">28</span> }</string></string></string></pre><br></div>

<p>　　迭代器的优点之二：能够实现不重新代码就可以应用于不能的容器类型。比如说原先用的事List编码的，但是后来想把相同的代码用于Set，用迭代器将会显得特别方便。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.iterator;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.HashSet;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Iterator;<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.LinkedList;<br></span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Set;<br></span><span style="color: #008080;"> 9</span><br><span style="color: #008080;">10</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> IteratorTest {<br></span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">12</span>         <span style="color: #008000;">//</span><span style="color: #008000;">List<string> conn = new ArrayList<string>();</string></string></span><br><span style="color: #008080;">13</span>         Set<string> conn = <span style="color: #0000ff;">new</span> HashSet<string><span style="color: #000000;">();<br></span><span style="color: #008080;">14</span>         conn.add(“aaa”<span style="color: #000000;">);<br></span><span style="color: #008080;">15</span>         conn.add(“aaa”<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span>         conn.add(“bbb”<span style="color: #000000;">);<br></span><span style="color: #008080;">17</span>         conn.add(“ccc”<span style="color: #000000;">);<br></span><span style="color: #008080;">18</span>         Iterator<string> iterator =<span style="color: #000000;"> conn.iterator();<br></span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(iterator.hasNext()){<br></span><span style="color: #008080;">20</span>             String a =<span style="color: #000000;"> iterator.next();<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">            System.out.println(a);<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">24</span> }</string></string></string></pre><br></div>

<p>&nbsp;</p>
<p>　　下面讲一讲ListIterator</p>
<p>　　ListIterator是一个更加强大的Iterator的子类型，但是它只能用于各种List类的访问。尽管Iterator只能向前移动，但是ListIterator可以双向移动。他还可以产生相对于迭代器在列表中指向当前位置的前一个和后一个元素的索引，并且还可以用set()方法替换掉它访问过的最后一个元素。你可以通过调用listIterator()方法产生一个指向List开始处的ListIterator，并且还可以通过调用listIterator(n)方法创建一个一开始就指向列表索引为n的元素处的ListIterator。下面的示例演示了所有这些功能：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.iterator;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ListIterator;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ListIteratorTest {<br></span><span style="color: #008080;"> 8</span><br><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;">10</span>         List<integer> list1 = <span style="color: #0000ff;">new</span> ArrayList<integer><span style="color: #000000;">();<br></span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt;= 10; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">            list1.add(i);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">14</span>         List<integer> list2 = <span style="color: #0000ff;">new</span> ArrayList<integer><span style="color: #000000;">();<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt;= 10; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">            list2.add(i);<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">现在将list1的元素反序插入到list2中</span><br><span style="color: #008080;">19</span>         ListIterator<integer> it =<span style="color: #000000;"> list1.listIterator(list1.size());<br></span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(it.hasPrevious()){<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">            list2.add(it.previous());<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">23</span>         <span style="color: #008000;">//</span><span style="color: #008000;">遍历list2</span><br><span style="color: #008080;">24</span>         it =<span style="color: #000000;"> list2.listIterator();<br></span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">while</span><span style="color: #000000;">(it.hasNext()){<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            System.out.println(it.next());<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">29</span> }</integer></integer></integer></integer></integer></pre><br></div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/design-pattern-iterator.html" data-id="ciiy5f4we00bzq1d0fed7keck" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/design-pattern-iterator.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-spring-beanfactory" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/spring-beanfactory.html">spring之BeanFactory</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/spring-beanfactory.html">
      <time datetime="2013-04-13T08:14:00.000Z" itemprop="datePublished">2013-04-13</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/后端/">后端</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　spring的IOC容器能够帮我们自动new对象，对象交给spring管之后我们不用自己手动去new对象了。那么它的原理是什么呢？是怎么实现的呢？下面我来简单的模拟一下spring的机制，相信看完之后就会对spring的原理有一定的了解。</p>
<p>　　spring使用BeanFactory来实例化、配置和管理对象，但是它只是一个接口，里面有一个getBean()方法。我们一般都不直接用BeanFactory，而是用它的实现类<span style="font: 14px/17px 'Times New Roman'; color: #333333; text-transform: none; text-indent: 0px; letter-spacing: normal; word-spacing: 0px; float: none; display: inline !important; white-space: normal; orphans: 2; widows: 2; font-size-adjust: none; font-stretch: normal; background-color: #ffffff; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;">ApplicationContext</span>，这个类会自动解析我们配置的applicationContext.xml，然后根据我们配置的bean来new对象，将new好的对象放进一个Map中，键就是我们bean的id,值就是new的对象。</p>
<p>　　首先我们建立一个BeanFactory接口</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> BeanFactory {<br></span><span style="color: #008080;">4</span> <span style="color: #000000;">    Object getBean(String id);<br></span><span style="color: #008080;">5</span> }</pre><br></div>

<p>　　然后建立一个BeanFactory的实现类ClassPathXmlApplicationContext.java</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.HashMap;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Map;<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.dom4j.Document;<br></span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.dom4j.DocumentException;<br></span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.dom4j.Element;<br></span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.dom4j.io.SAXReader;<br></span><span style="color: #008080;">11</span><br><span style="color: #008080;">12</span><br><span style="color: #008080;">13</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ClassPathXmlApplicationContext <span style="color: #0000ff;">implements</span><span style="color: #000000;"> BeanFactory {<br></span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">private</span> Map<string, object=""> beans = <span style="color: #0000ff;">new</span> HashMap<string, object=""><span style="color: #000000;">();<br></span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> ClassPathXmlApplicationContext(String fileName) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception{<br></span><span style="color: #008080;">16</span>         SAXReader reader = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SAXReader();<br></span><span style="color: #008080;">17</span>         Document document = reader.read(<span style="color: #0000ff;">this</span><span style="color: #000000;">.getClass().getClassLoader().getResourceAsStream(fileName));<br></span><span style="color: #008080;">18</span>         List<element> elements = document.selectNodes(“/beans/bean”<span style="color: #000000;">);<br></span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Element e : elements) {<br></span><span style="color: #008080;">20</span>             String id = e.attributeValue(“id”<span style="color: #000000;">);<br></span><span style="color: #008080;">21</span>             String value = e.attributeValue(“class”<span style="color: #000000;">);<br></span><span style="color: #008080;">22</span>             Object o =<span style="color: #000000;"> Class.forName(value).newInstance();<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">            beans.put(id, o);<br></span><span style="color: #008080;">24</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">26</span><br><span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Object getBean(String id) {<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> beans.get(id);<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">30</span><br><span style="color: #008080;">31</span> }</element></string,></string,></pre><br></div>

<p>　　然后配置applicationContext.xml</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">&lt;?</span><span style="color: #ff00ff;">xml version=”1.0” encoding=”UTF-8”</span><span style="color: #0000ff;">?&gt;</span><br><span style="color: #008080;">2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">=”c”</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">=”com.spring.Car”</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">4</span>      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">bean </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">=”p”</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">=”com.spring.Plane”</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">bean</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">5</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">beans</span><span style="color: #0000ff;">&gt;</span></pre><br></div>

<p>创建类的时候顺便演示一下工厂模式，其实BeanFactory它也是一种工厂模式的。</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> Moveable {<br></span><span style="color: #008080;">4</span>     <span style="color: #0000ff;">void</span><span style="color: #000000;"> run();<br></span><span style="color: #008080;">5</span> }</pre><br></div><br><div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Car <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Moveable{<br></span><span style="color: #008080;">4</span><br><span style="color: #008080;">5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run(){<br></span><span style="color: #008080;">6</span>         System.out.println(“拖着四个轮子满街跑car&middot;&middot;&middot;&middot;&middot;”<span style="color: #000000;">);<br></span><span style="color: #008080;">7</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">8</span> }</pre><br></div><br><div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;">2</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Plane <span style="color: #0000ff;">implements</span><span style="color: #000000;"> Moveable{<br></span><span style="color: #008080;">4</span><br><span style="color: #008080;">5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> run() {<br></span><span style="color: #008080;">6</span>         System.out.println(“拖着翅膀天空飞plane……”<span style="color: #000000;">);<br></span><span style="color: #008080;">7</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">8</span><br><span style="color: #008080;">9</span> }</pre><br></div>

<p>&nbsp;</p>
<p>现在来看一看效果吧，写一个类测试一下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.spring;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.dom4j.DocumentException;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Test {<br></span><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span>     <span style="color: #008000;">/<em>*</em></span><br><span style="color: #008080;"> 8</span> <span style="color: #008000;">      </span><span style="color: #808080;">@param</span><span style="color: #008000;"> args<br></span><span style="color: #008080;"> 9</span> <span style="color: #008000;">     <em> </em></span><span style="color: #808080;">@throws</span><span style="color: #008000;"> DocumentException<br></span><span style="color: #008080;">10</span>      <span style="color: #008000;">/</span><br><span style="color: #008080;">11</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {<br></span><span style="color: #008080;">12</span>         BeanFactory factory = <span style="color: #0000ff;">new</span> ClassPathXmlApplicationContext(“applicationContext.xml”<span style="color: #000000;">);<br></span><span style="color: #008080;">13</span>         Object o = factory.getBean(“c”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span>         Moveable m =<span style="color: #000000;"> (Moveable)o;<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">        m.run();<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">17</span><br><span style="color: #008080;">18</span> }</pre><br></div>

<p>由于Map容器里面保存的是Object类型，所以通过getBean()方法取出来的对象要强制类型转换。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/spring-beanfactory.html" data-id="ciiy5f4pu001oq1d0op804ctn" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/spring-beanfactory.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-design-pattern-adapter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/04/design-pattern-adapter.html">适配器模式之单接口适配器</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/04/design-pattern-adapter.html">
      <time datetime="2013-04-12T06:48:00.000Z" itemprop="datePublished">2013-04-12</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　在java中，除了<a href="http://www.cnblogs.com/liuling/archive/2013/04/12/adapter.html" target="_blank" rel="external">对象适配器</a>外，还有一种更常见的适配器，即单接口适配器，单接口适配器可以让用户更加方便的使用该接口。</p>
<p>　　例如，java.awt.event包中的MouseListener接口一共定义了五个方法：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> mouseClicked(MouseEvent arg0) {}<br></span><span style="color: #008080;">2</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> mouseEntered(MouseEvent arg0) {}<br></span><span style="color: #008080;">3</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> mouseExited(MouseEvent arg0) {}<br></span><span style="color: #008080;">4</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> mousePressed(MouseEvent arg0) {}<br></span><span style="color: #008080;">5</span> <span style="color: #0000ff;">void</span> mouseReleased(MouseEvent arg0) {}</pre><br></div>

<p>　　当需要一个实现MouseListener接口的类的对象时，那么在编写创建改对象时，该类必须实现MouseListener接口中的全部方法，但是往往用户仅仅需要实现该接口中的某一个方法，这样的话就出现了很多无用代码。</p>
<p>　　如果使用单接口适配器的话就可以减少代码的编写，可以让用户专心的实现所需要的方法。</p>
<p>　　<span style="color: #ff0000;">针对一个接口的单接口适配器就是已经实现了该接口的类，并对接口中的每个方法都给出了一个默认的实现。<span style="color: #000000;">比如，java.awt.event包中的MouseAdapter就是MouseListener接口中的单接口适配器，将MouseListener接口中的五个方法全部实现为不进行任何操作，即这五个方法体中没有任何语句。</span></span></p>
<p><span style="color: #ff0000;"><span style="color: #000000;">　　当用户再需要一个实现MouseListener接口的类的实例时，只需要编写一个MouseAdapter的子类即可，并在子类中重写自己需要的接口方法即可。例如：</span></span></p>
<p><span style="color: #ff0000;"><span style="color: #000000;">　　</span></span></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.adatpe;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.event.MouseAdapter;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.awt.event.MouseEvent;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> HandleEvent <span style="color: #0000ff;">extends</span><span style="color: #000000;"> MouseAdapter {<br></span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> mousePressed(MouseEvent arg0) {<br></span><span style="color: #008080;"> 9</span>         <span style="color: #008000;">//</span><span style="color: #008000;"> TODO Auto-generated method stub</span><br><span style="color: #008080;">10</span>         <span style="color: #0000ff;">super</span><span style="color: #000000;">.mousePressed(arg0);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">12</span><br><span style="color: #008080;">13</span> }</pre><br></div>

<p>&nbsp;</p>
<p><span style="color: #ff0000;"><span style="color: #000000;">　　这样就没有必要实现接口的所有方法了，减少了很多无用代码。</span></span></p>
<p><span style="color: #ff0000;"><span style="color: #000000;">　　其实在java API中，如果一个接口中方法多于一个时，就针对该接口提供相应的单接口适配器，如人们熟悉的WindowAdapter、KeyAdapter等。</span></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/04/design-pattern-adapter.html" data-id="ciiy5f4wi00c7q1d0guj2wvac" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/04/design-pattern-adapter.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/9/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/11/">Next &raquo;</a>
      </nav>
    </section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新博文</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/人生感悟/">人生感悟</a></p>
              <p class="item-title"><a href="/2015/12/say-bye-to-my-2015.html" class="title">Say bye to my 2015</a></p>
              <p class="item-date"><time datetime="2015-12-25T09:25:10.000Z" itemprop="datePublished">2015-12-25</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/mvp-pattern-android.html" class="title">MVP模式在Android项目中的使用</a></p>
              <p class="item-date"><time datetime="2015-12-23T14:16:04.000Z" itemprop="datePublished">2015-12-23</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/intent-resolving-in-android-m.html" class="title">【译文】Android M中Intent的解析</a></p>
              <p class="item-date"><time datetime="2015-12-04T06:52:06.000Z" itemprop="datePublished">2015-12-04</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/performance-listviews.html" class="title">【译文】高性能ListViews</a></p>
              <p class="item-date"><time datetime="2015-12-02T10:22:14.000Z" itemprop="datePublished">2015-12-02</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/11/android-multi-photo-picker.html" class="title">Android带多选功能的PhotoPicker</a></p>
              <p class="item-date"><time datetime="2015-11-21T07:46:03.000Z" itemprop="datePublished">2015-11-21</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">博文分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/">Framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JNI-amp-NDK/">JNI&amp;NDK</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java基础/">Java基础</a><span class="category-list-count">35</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NoSQL/">NoSQL</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/人生感悟/">人生感悟</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他技术/">其他技术</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构和算法/">数据结构和算法</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">7</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AsyncTask/" style="font-size: 11.54px;">AsyncTask</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/MVP/" style="font-size: 10px;">MVP</a> <a href="/tags/NoSQL/" style="font-size: 13.08px;">NoSQL</a> <a href="/tags/android/" style="font-size: 18.46px;">android</a> <a href="/tags/android-studio/" style="font-size: 10px;">android studio</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/camera/" style="font-size: 10px;">camera</a> <a href="/tags/framework/" style="font-size: 10.77px;">framework</a> <a href="/tags/hadoop/" style="font-size: 14.62px;">hadoop</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/jni/" style="font-size: 13.08px;">jni</a> <a href="/tags/linux/" style="font-size: 16.15px;">linux</a> <a href="/tags/mysql/" style="font-size: 11.54px;">mysql</a> <a href="/tags/redis/" style="font-size: 13.08px;">redis</a> <a href="/tags/spring/" style="font-size: 10.77px;">spring</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/web后端/" style="font-size: 19.23px;">web后端</a> <a href="/tags/内存缓存/" style="font-size: 10px;">内存缓存</a> <a href="/tags/前端/" style="font-size: 13.85px;">前端</a> <a href="/tags/反射/" style="font-size: 10px;">反射</a> <a href="/tags/图片选择/" style="font-size: 10.77px;">图片选择</a> <a href="/tags/多线程/" style="font-size: 17.69px;">多线程</a> <a href="/tags/布局/" style="font-size: 12.31px;">布局</a> <a href="/tags/布局优化/" style="font-size: 10.77px;">布局优化</a> <a href="/tags/开源/" style="font-size: 10.77px;">开源</a> <a href="/tags/断点续传/" style="font-size: 11.54px;">断点续传</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a> <a href="/tags/自定义控件/" style="font-size: 10px;">自定义控件</a> <a href="/tags/解决方案/" style="font-size: 16.92px;">解决方案</a> <a href="/tags/设计模式/" style="font-size: 15.38px;">设计模式</a> <a href="/tags/译文/" style="font-size: 10.77px;">译文</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">博文归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a target="_blank" href="http://blog.daimajia.com">代码家</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.trinea.cn">Trinea</a>
          </li>
        
          <li>
            <a target="_blank" href="https://www.aswifter.com">APP开发者</a>
          </li>
        
          <li>
            <a target="_blank" href="http://blog.seoui.com">笑松小站</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.apkfuns.com">舞影凌风</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.ttfde.org">TTF的家园</a>
          </li>
        
          <li>
            <a target="_blank" href="http://rocko.xyz">Rocko&#39;s blog</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.93sec.cc">教程资源网</a>
          </li>
        
      </ul>
    </div>
  </div>


  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2000 - 2016 Lauren<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script type="text/javascript">
  var duoshuoQuery = {short_name:"liuling07"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>





 <script src="//ajax.lug.ustc.edu.cn/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>