<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>残剑博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Hexo theme - Icarus">
<meta property="og:type" content="website">
<meta property="og:title" content="残剑博客">
<meta property="og:url" content="http://liuling07.github.io/page/7/index.html">
<meta property="og:site_name" content="残剑博客">
<meta property="og:description" content="Hexo theme - Icarus">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="残剑博客">
<meta name="twitter:description" content="Hexo theme - Icarus">
  
  
    <link rel="icon" href="favicon.png">
  
  
 <link href='//fonts.lug.ustc.edu.cn/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
 <link href="//fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">


  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
  

  

  
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo" style="background-image: url(/css/images/logo.png)"></i><span class="site-title">残剑博客</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/css/images/protrait.jpg"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://liuling07.github.io"></form>
        
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/categories">Categories</a></td>
        
          <td><a class="main-nav-link" href="/tags">Tags</a></td>
        
          <td><a class="main-nav-link" href="/about">About</a></td>
        
        <td>
          
            <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://liuling07.github.io"></form>
          
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="/css/images/protrait.jpg">
      <h2 id="name">Lauren</h2>
      <h3 id="title">Android Developer</h3>
      <span id="location"><i class="fa fa-map-marker"></i>Shenzhen, China</span>
      <a id="follow" href="https://github.com/liuling07">FOLLOW</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        135
        <span>posts</span>
      </div>
      <div class="article-info-block">
        32
        <span>tags</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="https://github.com/liuling07" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="http://weibo.com/LaurenLiuling/" target="_blank" title="weibo"><i class="fa fa-weibo"></i></a></td>
          
          <td><a href="https://plus.google.com/u/0/107098505138563589748/" target="_blank" title="google-plus"><i class="fa fa-google-plus"></i></a></td>
          
          <td><a href="http://stackoverflow.com/users/5629327/lauren-liuling" target="_blank" title="stack-overflow"><i class="fa fa-stack-overflow"></i></a></td>
          
          <td><a href="https://twitter.com/lauren_liuLing/" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
          
          <td><a href="https://www.facebook.com/lauren.liuling/" target="_blank" title="facebook"><i class="fa fa-facebook"></i></a></td>
          
          <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
        </tr>
      </table>
    </div>
    
    
  </div>
</aside>

      
      <section id="main">
      <article id="post-page-cache" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/07/page-cache.html">页面的缓存与不缓存设置</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/07/page-cache.html">
      <time datetime="2013-07-24T23:42:00.000Z" itemprop="datePublished">2013-07-25</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/前端/">前端</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　HTML的HTTP协议头信息中控制着页面在几个地方的缓存信息，包括浏览器端，中间缓存服务器端(如：squid等)，Web服务器端。本文讨论头信息 中带缓存控制信息的HTML页面(JSP/Servlet生成好出来的也是HTML页面)在中间缓存服务器中的缓存情况。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HTTP协议中关于缓存的信息头关键字包括Cache-Control(HTTP1.1)，Pragma(HTTP1.0)，last-Modified，Expires等。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HTTP1.0中通过<strong><span style="color: #ff00ff;">Pragma</span> </strong> 控制页面缓存，可以设置：Pragma或no-cache。网上有非常多的文章说明如何控制不让浏览器或中间缓存服务器缓存页面，通常设置的值为no- cache，不过这个值不这么保险，通常还加上Expires置为0来达到目的。但是如我们刻意需要浏览器或缓存服务器缓存住我们的页面这个值则要设置为 Pragma。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HTTP1.1中启用<strong><span style="color: #ff00ff;">Cache-Control</span> </strong> 来控制页面的缓存与否，这里介绍几个常用的参数：</p>
<ul>
<li>no-cache，浏览器和缓存服务器都不应该缓存页面信息；</li>
<li>public，浏览器和缓存服务器都可以缓存页面信息；</li>
<li>no-store，请求和响应的信息都不应该被存储在对方的磁盘系统中；</li>
<li>must-revalidate，对于客户机的每次请求，代理服务器必须想服务器验证缓存是否过时；</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Last-Modified只页面的最后生成时间，GMT格式；</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expires过时期限值，GMT格式，指浏览器或缓存服务器在该时间点后必须从真正的服务器中获取新的页面信息；</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 上面两个值在JSP中设置值为字符型的GMT格式，无法生效，设置long类型才生效；</p>
<p>&nbsp;</p>
<p>下面是一个测试例子：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.servlet;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.PrintWriter;<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.ServletException;<br></span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServlet;<br></span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletRequest;<br></span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletResponse;<br></span><span style="color: #008080;">10</span><br><span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ServletA <span style="color: #0000ff;">extends</span><span style="color: #000000;"> HttpServlet {<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> service(HttpServletRequest request, HttpServletResponse response)<br></span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException, IOException {<br></span><span style="color: #008080;">15</span>         response.setContentType(“text/html”<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span>         <span style="color: #008000;">//</span><span style="color: #008000;">servlet页面默认是不缓存的<br></span><span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">本页面允许在浏览器端或缓存服务器中缓存，时限为20秒。<br></span><span style="color: #008080;">18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">20秒之内重新进入该页面的话不会进入该servlet的</span><br><span style="color: #008080;">19</span>         java.util.Date date = <span style="color: #0000ff;">new</span><span style="color: #000000;"> java.util.Date();<br></span><span style="color: #008080;">20</span>         response.setDateHeader(“Last-Modified”,date.getTime()); <span style="color: #008000;">//</span><span style="color: #008000;">Last-Modified:页面的最后生成时间 </span><br><span style="color: #008080;">21</span>         response.setDateHeader(“Expires”,date.getTime()+20000); <span style="color: #008000;">//</span><span style="color: #008000;">Expires:过时期限值 </span><br><span style="color: #008080;">22</span>         response.setHeader(“Cache-Control”, “public”); <span style="color: #008000;">//</span><span style="color: #008000;">Cache-Control来控制页面的缓存与否,public:浏览器和缓存服务器都可以缓存页面信息；</span><br><span style="color: #008080;">23</span>         response.setHeader(“Pragma”, “Pragma”); <span style="color: #008000;">//</span><span style="color: #008000;">Pragma:设置页面是否缓存，为Pragma则缓存，no-cache则不缓存<br></span><span style="color: #008080;">24</span><br><span style="color: #008080;">25</span>         <span style="color: #008000;">//</span><span style="color: #008000;">不允许浏览器端或缓存服务器缓存当前页面信息。</span><br><span style="color: #008080;">26</span>         <span style="color: #008000;">/<em></em></span><span style="color: #008000;">response.setHeader( “Pragma”, “no-cache” );<br></span><span style="color: #008080;">27</span> <span style="color: #008000;">        response.setDateHeader(“Expires”, 0);<br></span><span style="color: #008080;">28</span> <span style="color: #008000;">        response.addHeader( “Cache-Control”, “no-cache” );//浏览器和缓存服务器都不应该缓存页面信息<br></span><span style="color: #008080;">29</span> <span style="color: #008000;">        response.addHeader( “Cache-Control”, “no-store” );//请求和响应的信息都不应该被存储在对方的磁盘系统中；<br></span><span style="color: #008080;">30</span> <span style="color: #008000;">        response.addHeader( “Cache-Control”, “must-revalidate” );</span><span style="color: #008000;">///</span><span style="color: #008000;">于客户机的每次请求，代理服务器必须想服务器验证缓存是否过时；</span><br><span style="color: #008080;">31</span><br><span style="color: #008080;">32</span>         System.out.println(“进入了servlet”<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span>         response.getWriter().write(“欢迎光临我的主页”<span style="color: #000000;">);<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">35</span><br><span style="color: #008080;">36</span><br><span style="color: #008080;">37</span> }</pre><br></div>

<p>　　如果需要在html页面上设置不缓存，这在<head>标签中加入如下语句：</head></p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">http-equiv</span><span style="color: #0000ff;">=”pragma”</span><span style="color: #ff0000;"> content</span><span style="color: #0000ff;">=”no-cache”</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">2</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">http-equiv</span><span style="color: #0000ff;">=”cache-control”</span><span style="color: #ff0000;"> content</span><span style="color: #0000ff;">=”no-cache”</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">3</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">http-equiv</span><span style="color: #0000ff;">=”expires”</span><span style="color: #ff0000;"> content</span><span style="color: #0000ff;">=”0”</span><span style="color: #0000ff;">&gt;</span>   </pre><br></div>

<p>&nbsp;</p>
<p><strong>附：html页面中meta的作用</strong></p>
<p>　　meta是用来在HTML文档中模拟HTTP协议的响应头报文。meta 标签用于网页的<head>与</head>中，meta 标签的用处很多。meta 的属性有两种：name和http-equiv。name属性主要用于描述网页，对应于content（网页内容），以便于搜索引擎机器人查找、分类（目前几乎所有的搜索引擎都使用网上机器人自动查找meta值来给网页分类）。这其中最重要的是description（站点在搜索引擎上的描述）和keywords（分类关键词），所以应该给每页加一个meta值。比较常用的有以下几个：</p>
<p>　　<strong>name 属性</strong></p>
<p>　　1、<meta name="Generator" contect="">用以说明生成工具（如Microsoft FrontPage 4.0）等；</p>
<p>　　2、<meta name="KEYWords" contect="">向搜索引擎说明你的网页的关键词；</p>
<p>　　3、<meta name="DEscription" contect="">告诉搜索引擎你的站点的主要内容；</p>
<p>　　4、<meta name="Author" contect="你的姓名">告诉搜索引擎你的站点的制作的作者；</p>
<p>　　5、<meta name="Robots" contect="all|none|index|noindex|follow|nofollow"></p>
<p>　　其中的属性说明如下：</p>
<p>　　设定为all：文件将被检索，且页面上的链接可以被查询；</p>
<p>　　设定为none：文件将不被检索，且页面上的链接不可以被查询；</p>
<p>　　设定为index：文件将被检索；</p>
<p>　　设定为follow：页面上的链接可以被查询；</p>
<p>　　设定为noindex：文件将不被检索，但页面上的链接可以被查询；</p>
<p>　　设定为nofollow：文件将不被检索，页面上的链接可以被查询。</p>
<p>　　<strong>http-equiv属性</strong></p>
<p>　　1、&lt;meta http-equiv=”Content-Type” contect=”text/html”;charset=gb_2312-80”&gt;</p>
<p>和 <meta http-equiv="Content-Language" contect="zh-CN">用以说明主页制作所使用的文字以及语言；</p>
<p>　　又如英文是ISO-8859-1字符集，还有BIG5、utf-8、shift-Jis、Euc、Koi8-2等字符集；</p>
<p>　　2、<meta http-equiv="Refresh" contect="n;url=http://yourlink">定时让网页在指定的时间n内，跳转到页面<a href="http://yourlink；" target="_blank" rel="external">http://yourlink；</a></p>
<p>　　3、<meta http-equiv="Expires" contect="Mon,12 May 2001 00:20:00 GMT">可以用于设定网页的到期时间，一旦过期则必须到服务器上重新调用。需要注意的是必须使用GMT时间格式；</p>
<p>　　4、<meta http-equiv="Pragma" contect="no-cache">是用于设定禁止浏览器从本地机的缓存中调阅页面内容，设定后一旦离开网页就无法从Cache中再调出；</p>
<p>　　5、<meta http-equiv="set-cookie" contect="Mon,12 May 2001 00:20:00 GMT">cookie设定，如果网页过期，存盘的cookie将被删除。需要注意的也是必须使用GMT时间格式；</p>
<p>　　6、<meta http-equiv="Pics-label" contect="">网页等级评定，在IE的internet选项中有一项内容设置，可以防止浏览一些受限制的网站，而网站的限制级别就是通过meta属性来设置的；</p>
<p>　　7、<meta http-equiv="windows-Target" contect="_top">强制页面在当前窗口中以独立页面显示，可以防止自己的网页被别人当作一个frame页调用；</p>
<p>　　8、<meta http-equiv="Page-Enter" contect="revealTrans(duration=10,transtion= 50)">和<meta http-equiv="Page-Exit" contect="revealTrans(duration=20，transtion=6)">设定进入和离开页面时的特殊效果，这个功能即FrontPage中的&ldquo;格式/网页过渡&rdquo;，不过所加的页面不能够是一个frame页面。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/07/page-cache.html" data-id="ciiy5f4rb003tq1d06lx73gck" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/07/page-cache.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-order-java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/07/order-java.html">各种排序算法的分析及java实现</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/07/order-java.html">
      <time datetime="2013-07-24T02:04:00.000Z" itemprop="datePublished">2013-07-24</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/数据结构和算法/">数据结构和算法</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　排序一直以来都是让我很头疼的事，以前上《数据结构》打酱油去了，整个学期下来才勉强能写出个冒泡排序。由于下半年要准备工作了，也知道排序算法的重要性（据说是面试必问的知识点），所以又花了点时间重新研究了一下。</p>
<p>　　排序大的分类可以分为两种：内排序和外排序。在排序过程中，全部记录存放在内存，则称为内排序，如果排序过程中需要使用外存，则称为外排序。下面讲的排序都是属于内排序。</p>
<p>　　内排序有可以分为以下几类：</p>
<p>　　(1)、插入排序：直接插入排序、二分法插入排序、希尔排序。</p>
<p>　　(2)、选择排序：简单选择排序、堆排序。</p>
<p>　　(3)、交换排序：冒泡排序、快速排序。</p>
<p>　　(4)、归并排序</p>
<p>　　(5)、基数排序</p>
<p>&nbsp;</p>
<p><strong>一、插入排序</strong></p>
<div>&bull;思想：<span style="font-family: 宋体;">每步将一个待排序的记录，按其顺序码大小插入到前面已经排序的字序列的合适位置，直到全部插入排序完为止。</span></div><br><div>&bull;关键问题：在前面已经排好序的序列中找到合适的插入位置。</div><br><div>&bull;方法：</div><br><div class="O1">&ndash;直接插入排序</div><br><div class="O1">&ndash;二分插入排序</div><br><div class="O1">&ndash;希尔排序</div>

<p>①直接插入排序（从后向前找到合适位置后插入）</p>
<p>　　1、基本思想：<span style="font-family: 宋体;">每步将一个待排序的记录，按其顺序码大小插入到前面已经排序的字序列的合适位置（从后向前找到合适位置后），直到全部插入排序完为止。</span></p>
<p>　　2、实例</p>
<p>　　<img src="http://www.liuling123.com/wp-content/uploads/2015/11/24160822-d0957aa2ca8a4500bfc84dbf36865578.png" alt=""></p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 直接插入排序 {<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1<span style="color: #000000;">};<br></span><span style="color: #008080;"> 7</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;"> 9</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">11</span>         <span style="color: #008000;">//</span><span style="color: #008000;">直接插入排序</span><br><span style="color: #008080;">12</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 1; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">13</span>             <span style="color: #008000;">//</span><span style="color: #008000;">待插入元素</span><br><span style="color: #008080;">14</span>             <span style="color: #0000ff;">int</span> temp =<span style="color: #000000;"> a[i];<br></span><span style="color: #008080;">15</span>             <span style="color: #0000ff;">int</span><span style="color: #000000;"> j;<br></span><span style="color: #008080;">16</span>             <span style="color: #008000;">/<em></em></span><span style="color: #008000;">for (j = i-1; j&gt;=0 &amp;&amp; a[j]&gt;temp; j–) {<br></span><span style="color: #008080;">17</span> <span style="color: #008000;">                //将大于temp的往后移动一位<br></span><span style="color: #008080;">18</span> <span style="color: #008000;">                a[j+1] = a[j];<br></span><span style="color: #008080;">19</span> <span style="color: #008000;">            }</span><span style="color: #008000;">/</span><br><span style="color: #008080;">20</span>             <span style="color: #0000ff;">for</span> (j = i-1; j&gt;=0; j–<span style="color: #000000;">) {<br></span><span style="color: #008080;">21</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">将大于temp的往后移动一位</span><br><span style="color: #008080;">22</span>                 <span style="color: #0000ff;">if</span>(a[j]&gt;<span style="color: #000000;">temp){<br></span><span style="color: #008080;">23</span>                     a[j+1] =<span style="color: #000000;"> a[j];<br></span><span style="color: #008080;">24</span>                 }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">25</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">28</span>             a[j+1] =<span style="color: #000000;"> temp;<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">31</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">32</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">33</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">36</span><br><span style="color: #008080;">37</span> }</pre><br></div>

<p>&nbsp;</p>
<p>　　4、分析</p>
<p>　　直接插入排序是稳定的排序。关于各种算法的稳定性分析可以参考<a href="http://www.cnblogs.com/Braveliu/archive/2013/01/15/2861201.html" target="_blank" rel="external">http://www.cnblogs.com/Braveliu/archive/2013/01/15/2861201.html</a></p>
<p>　　文件初态不同时，直接插入排序所耗费的时间有很大差异。若文件初态为正序，则每个待插入的记录只需要比较一次就能够找到合适的位置插入，故算法的时间复杂度为O(n)，这时最好的情况。若初态为反序，则第i个待插入记录需要比较i+1次才能找到合适位置插入，故时间复杂度为O<span style="font-family: 宋体; font-size: 16px;"><span style="color: black; language: en-US; mso-ascii-font-family: 'Comic Sans MS'; mso-fareast-font-family: 宋体; mso-bidi-font-family: +mn-cs; mso-color-index: 1;">(n</span><span style="color: black; vertical-align: super; language: en-US; mso-ascii-font-family: 'Comic Sans MS'; mso-fareast-font-family: 宋体; mso-bidi-font-family: +mn-cs; mso-color-index: 1; mso-text-raise: 30%;">2</span><span style="color: black; language: en-US; mso-ascii-font-family: 'Comic Sans MS'; mso-fareast-font-family: 宋体; mso-bidi-font-family: +mn-cs; mso-color-index: 1;">)，这时最坏的情况。</span></span></p>
<p><span style="font-family: 宋体; font-size: 16px;"><span style="color: black; language: en-US; mso-ascii-font-family: 'Comic Sans MS'; mso-fareast-font-family: 宋体; mso-bidi-font-family: +mn-cs; mso-color-index: 1;">　　直接插入排序的平均时间复杂度为O(n2)。</span></span></p>
<p><span style="font-family: 宋体; font-size: 16px;"><span style="color: black; language: en-US; mso-ascii-font-family: 'Comic Sans MS'; mso-fareast-font-family: 宋体; mso-bidi-font-family: +mn-cs; mso-color-index: 1;">②二分法插入排序（按二分法找到合适位置插入）</span></span></p>
<p>　　1、基本思想：二分法插入排序的思想和直接插入一样，只是找合适的插入位置的方式不同，这里是按二分法找到合适的位置，<span style="font-family: 宋体;">可以减少比较的次数。</span></p>
<p>　　2、实例</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24162933-28ad5af710d8441d97ee22fddb873a84.jpg" alt=""></p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 二分插入排序 {<br></span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,176,213,227,49,78,34,12,164,11,18,1<span style="color: #000000;">};<br></span><span style="color: #008080;"> 6</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;"> 8</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">10</span>         <span style="color: #008000;">//</span><span style="color: #008000;">二分插入排序</span><br><span style="color: #008080;">11</span> <span style="color: #000000;">        sort(a);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">13</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">14</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">15</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">18</span><br><span style="color: #008080;">19</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> sort(<span style="color: #0000ff;">int</span><span style="color: #000000;">[] a) {<br></span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">21</span>             <span style="color: #0000ff;">int</span> temp =<span style="color: #000000;"> a[i];<br></span><span style="color: #008080;">22</span>             <span style="color: #0000ff;">int</span> left = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">int</span> right = i-1<span style="color: #000000;">;<br></span><span style="color: #008080;">24</span>             <span style="color: #0000ff;">int</span> mid = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">25</span>             <span style="color: #0000ff;">while</span>(left&lt;=<span style="color: #000000;">right){<br></span><span style="color: #008080;">26</span>                 mid = (left+right)/2<span style="color: #000000;">;<br></span><span style="color: #008080;">27</span>                 <span style="color: #0000ff;">if</span>(temp&lt;<span style="color: #000000;">a[mid]){<br></span><span style="color: #008080;">28</span>                     right = mid-1<span style="color: #000000;">;<br></span><span style="color: #008080;">29</span>                 }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">30</span>                     left = mid+1<span style="color: #000000;">;<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">33</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = i-1; j &gt;= left; j–<span style="color: #000000;">) {<br></span><span style="color: #008080;">34</span>                 a[j+1] =<span style="color: #000000;"> a[j];<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">36</span>             <span style="color: #0000ff;">if</span>(left !=<span style="color: #000000;"> i){<br></span><span style="color: #008080;">37</span>                 a[left] =<span style="color: #000000;"> temp;<br></span><span style="color: #008080;">38</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">39</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">41</span> }</pre><br></div>

<p>　　4、分析</p>
<p>　　当然，二分法插入排序也是稳定的。</p>
<p>　　二分插入排序的比较次数与待排序记录的初始状态无关，仅依赖于记录的个数。当n较大时，比直接插入排序的最大比较次数少得多。但大于直接插入排序的最小比较次数。算法的移动次数与直接插入排序算法的相同，最坏的情况为n2/2，最好的情况为n，平均移动次数为O(n2)。</p>
<p>③希尔排序</p>
<p>　　1、基本思想：先取一个小于n的整数d1作为第一个<a href="http://www.cnblogs.com/view/422272.htm" target="_blank" rel="external">增量</a>，把文件的全部记录分成d1个组。所有距离为d1的倍数的记录放在同一个组中。先在各组内进行<a href="http://www.cnblogs.com/view/1193395.htm" target="_blank" rel="external">直接插入排序</a>；然后，取第二个增量d2&lt;d1重复上述的分组和排序，直至所取的增量dt=1(dt&lt;dt-l&lt;&hellip;&lt;d2&lt;d1)，即所有记录放在同一组中进行直接插入排序为止。该方法实质上是一种分组插入方法。</p>
<p>　　2、实例</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24164131-db4877dab9c94b63bcfb2cdf7f9cbf69.png" alt=""></p>
<p>　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">不稳定</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 希尔排序 {<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span><br><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1<span style="color: #000000;">};<br></span><span style="color: #008080;"> 9</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">11</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">13</span>         <span style="color: #008000;">//</span><span style="color: #008000;">希尔排序</span><br><span style="color: #008080;">14</span>         <span style="color: #0000ff;">int</span> d =<span style="color: #000000;"> a.length;<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">while</span>(<span style="color: #0000ff;">true</span><span style="color: #000000;">){<br></span><span style="color: #008080;">16</span>             d = d / 2<span style="color: #000000;">;<br></span><span style="color: #008080;">17</span>             <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> x=0;x<d;x++<span style="color: #000000;">){<br><span style="color: #008080;">18</span>                 <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=x+d;i<a.length;i=i+<span style="color: #000000;">d){<br><span style="color: #008080;">19</span>                     <span style="color: #0000ff;">int</span> temp =<span style="color: #000000;"> a[i];<br></span><span style="color: #008080;">20</span>                     <span style="color: #0000ff;">int</span><span style="color: #000000;"> j;<br></span><span style="color: #008080;">21</span>                     <span style="color: #0000ff;">for</span>(j=i-d;j&gt;=0&amp;&amp;a[j]&gt;temp;j=j-<span style="color: #000000;">d){<br></span><span style="color: #008080;">22</span>                         a[j+d] =<span style="color: #000000;"> a[j];<br></span><span style="color: #008080;">23</span> <span style="color: #000000;">                    }<br></span><span style="color: #008080;">24</span>                     a[j+d] =<span style="color: #000000;"> temp;<br></span><span style="color: #008080;">25</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">27</span>             <span style="color: #0000ff;">if</span>(d == 1<span style="color: #000000;">){<br></span><span style="color: #008080;">28</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">32</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">33</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">34</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">37</span><br><span style="color: #008080;">38</span> }</a.length;i=i+<span></d;x++<span></pre><br></div>

<p>　　4、分析</p>
<p>　　我们知道一次插入排序是稳定的，但在不同的插入排序过程中，相同的元素可能在各自的插入排序中移动，最后其稳定性就会被打乱，所以希尔排序是不稳定的。</p>
<p>　　希尔排序的时间性能优于直接插入排序，原因如下：</p>
<div class="para">　　（1）当文件初态基本有序时直接插入排序所需的比较和移动次数均较少。</div><br><div class="para">　　（2）当n值较小时，n和n2的差别也较小，即直接插入排序的最好时间复杂度O(n)和最坏时间复杂度0(n2)差别不大。</div><br><div class="para">　　（3）在希尔排序开始时增量较大，分组较多，每组的记录数目少，故各组内直接插入较快，后来增量di逐渐缩小，分组数逐渐减少，而各组的记录数目逐渐增多，但由于已经按di-1作为距离排过序，使文件较接近于有序状态，所以新的一趟排序过程也较快。</div><br><div class="para">　　因此，希尔排序在效率上较直接插人排序有较大的改进。</div><br><div class="para">　　希尔排序的平均时间复杂度为O(nlogn)。</div><br><div class="para">&nbsp;</div><br><div class="para">&nbsp;</div><br><div class="para"><strong>二、选择排序</strong></div><br><div class="para"><br><div>&bull;思想：每趟从待排序的记录序列中选择关键字最小的记录放置到已排序表的最前位置，直到全部排完。</div><br><div>&bull;关键问题：在剩余的待排序记录序列中找到最小关键码记录。</div><br><div>&bull;方法：</div><br><div class="O1">&ndash;直接选择排序</div><br><div class="O1">&ndash;堆排序</div><br><div class="O1">&nbsp;</div><br></div><br><div class="para">①简单的选择排序</div><br><div class="para">　　1、基本思想：在要排序的一组数中，选出最小的一个数与第一个位置的数交换；然后在剩下的数当中再找最小的与第二个位置的数交换，如此循环到倒数第二个数和最后一个数比较为止。</div><br><div class="para">　　</div><br><div class="para">　　2、实例</div><br><div class="para"><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24170221-5e84d6b12ea545618b673783789b5803.png" alt=""></div><br><div class="para">&nbsp;</div><br><div class="para">　　3、java实现</div><br><div class="para"><br><div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">不稳定</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 简单的选择排序 {<br></span><span style="color: #008080;"> 5</span><br><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1,8<span style="color: #000000;">};<br></span><span style="color: #008080;"> 8</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">10</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">12</span>         <span style="color: #008000;">//</span><span style="color: #008000;">简单的选择排序</span><br><span style="color: #008080;">13</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">int</span> min =<span style="color: #000000;"> a[i];<br></span><span style="color: #008080;">15</span>             <span style="color: #0000ff;">int</span> n=i; <span style="color: #008000;">//</span><span style="color: #008000;">最小数的索引</span><br><span style="color: #008080;">16</span>             <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j=i+1;j<a.length;j++<span style="color: #000000;">){<br><span style="color: #008080;">17</span>                 <span style="color: #0000ff;">if</span>(a[j]<min){ <span="" style="color: #008000;">//<span style="color: #008000;">找出最小的数</span><br><span style="color: #008080;">18</span>                     min =<span style="color: #000000;"> a[j];<br></span><span style="color: #008080;">19</span>                     n =<span style="color: #000000;"> j;<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">22</span>             a[n] =<span style="color: #000000;"> a[i];<br></span><span style="color: #008080;">23</span>             a[i] =<span style="color: #000000;"> min;<br></span><span style="color: #008080;">24</span><br><span style="color: #008080;">25</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">27</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">29</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">31</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">32</span><br><span style="color: #008080;">33</span> }</min){></a.length;j++<span></pre><br></div>

<p>&nbsp;&nbsp; 　4、分析</p>
<p>　　简单选择排序是不稳定的排序。</p>
<p>　　时间复杂度：T(n)=O(n2)。</p>
<p>&nbsp;</p>
<p>②堆排序</p>
<p>　　1、基本思想：</p>
<p>　　堆排序是一种树形选择排序，是对直接选择排序的有效改进。</p>
<p>　　堆的定义下：具有n个元素的序列 （h1,h2,…,hn),当且仅当满足（hi&gt;=h2i,hi&gt;=2i+1）或（hi&lt;=h2i,hi&lt;=2i+1） (i=1,2,…,n/2)时称之为堆。在这里只讨论满足前者条件的堆。由堆的定义可以看出，堆顶元素（即第一个元素）必为最大项（大顶堆）。完全二 叉树可以很直观地表示堆的结构。堆顶为根，其它为左子树、右子树。</p>
<p>　　思想:初始时把要排序的数的序列看作是一棵顺序存储的二叉树，调整它们的存储序，使之成为一个 堆，这时堆的根节点的数最大。然后将根节点与堆的最后一个节点交换。然后对前面(n-1)个数重新调整使之成为堆。依此类推，直到只有两个节点的堆，并对 它们作交换，最后得到有n个节点的有序序列。从算法描述来看，堆排序需要两个过程，一是建立堆，二是堆顶与堆的最后一个元素交换位置。所以堆排序有两个函数组成。一是建堆的渗透函数，二是反复调用渗透函数实现排序的函数。</p>
<p>　　2、实例</p>
<p>初始序列：46,79,56,38,40,84</p>
<p>　　建堆：</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24170840-a90577e506bf4249bed3f5c5043dd780.png" alt=""></p>
<p>&nbsp;　　交换，从堆中踢出最大数</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24170925-6a709aaccb534ea698f1aa9a184fb28f.png" alt=""></p>
<p>依次类推：最后堆中剩余的最后两个结点交换，踢出一个，排序完成。</p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span> <span style="color: #008000;">//</span><span style="color: #008000;">不稳定</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Arrays;<br></span><span style="color: #008080;"> 4</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HeapSort {<br></span><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64<span style="color: #000000;">};<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">int</span> arrayLength=<span style="color: #000000;">a.length;<br></span><span style="color: #008080;"> 9</span>         <span style="color: #008000;">//</span><span style="color: #008000;">循环建堆  </span><br><span style="color: #008080;">10</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=0;i<arraylength-1;i++<span style="color: #000000;">){<br><span style="color: #008080;">11</span>             <span style="color: #008000;">//</span><span style="color: #008000;">建堆  </span><br><span style="color: #008080;">12</span>             buildMaxHeap(a,arrayLength-1-<span style="color: #000000;">i);<br></span><span style="color: #008080;">13</span>             <span style="color: #008000;">//</span><span style="color: #008000;">交换堆顶和最后一个元素  </span><br><span style="color: #008080;">14</span>             swap(a,0,arrayLength-1-<span style="color: #000000;">i);<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">            System.out.println(Arrays.toString(a));<br></span><span style="color: #008080;">16</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">18</span>     <span style="color: #008000;">//</span><span style="color: #008000;">对data数组从0到lastIndex建大顶堆</span><br><span style="color: #008080;">19</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> buildMaxHeap(<span style="color: #0000ff;">int</span>[] data, <span style="color: #0000ff;">int</span><span style="color: #000000;"> lastIndex){<br></span><span style="color: #008080;">20</span>          <span style="color: #008000;">//</span><span style="color: #008000;">从lastIndex处节点（最后一个节点）的父节点开始 </span><br><span style="color: #008080;">21</span>         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=(lastIndex-1)/2;i&gt;=0;i–<span style="color: #000000;">){<br></span><span style="color: #008080;">22</span>             <span style="color: #008000;">//</span><span style="color: #008000;">k保存正在判断的节点 </span><br><span style="color: #008080;">23</span>             <span style="color: #0000ff;">int</span> k=<span style="color: #000000;">i;<br></span><span style="color: #008080;">24</span>             <span style="color: #008000;">//</span><span style="color: #008000;">如果当前k节点的子节点存在  </span><br><span style="color: #008080;">25</span>             <span style="color: #0000ff;">while</span>(k<em>2+1&lt;=<span style="color: #000000;">lastIndex){<br></span><span style="color: #008080;">26</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">k节点的左子节点的索引 </span><br><span style="color: #008080;">27</span>                 <span style="color: #0000ff;">int</span> biggerIndex=2</em>k+1<span style="color: #000000;">;<br></span><span style="color: #008080;">28</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">如果biggerIndex小于lastIndex，即biggerIndex+1代表的k节点的右子节点存在</span><br><span style="color: #008080;">29</span>                 <span style="color: #0000ff;">if</span>(biggerIndex&lt;<span style="color: #000000;">lastIndex){<br></span><span style="color: #008080;">30</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">若果右子节点的值较大  </span><br><span style="color: #008080;">31</span>                     <span style="color: #0000ff;">if</span>(data[biggerIndex]<data[biggerindex+1<span style="color: #000000;">]){<br><span style="color: #008080;">32</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">biggerIndex总是记录较大子节点的索引  </span><br><span style="color: #008080;">33</span>                         biggerIndex++<span style="color: #000000;">;<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">                    }<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">36</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">如果k节点的值小于其较大的子节点的值  </span><br><span style="color: #008080;">37</span>                 <span style="color: #0000ff;">if</span>(data[k]&lt;<span style="color: #000000;">data[biggerIndex]){<br></span><span style="color: #008080;">38</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">交换他们  </span><br><span style="color: #008080;">39</span> <span style="color: #000000;">                    swap(data,k,biggerIndex);<br></span><span style="color: #008080;">40</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">将biggerIndex赋予k，开始while循环的下一次循环，重新保证k节点的值大于其左右子节点的值  </span><br><span style="color: #008080;">41</span>                     k=<span style="color: #000000;">biggerIndex;<br></span><span style="color: #008080;">42</span>                 }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">43</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">45</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">46</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">47</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">48</span>     <span style="color: #008000;">//</span><span style="color: #008000;">交换</span><br><span style="color: #008080;">49</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> swap(<span style="color: #0000ff;">int</span>[] data, <span style="color: #0000ff;">int</span> i, <span style="color: #0000ff;">int</span><span style="color: #000000;"> j) {<br></span><span style="color: #008080;">50</span>         <span style="color: #0000ff;">int</span> tmp=<span style="color: #000000;">data[i];<br></span><span style="color: #008080;">51</span>         data[i]=<span style="color: #000000;">data[j];<br></span><span style="color: #008080;">52</span>         data[j]=<span style="color: #000000;">tmp;<br></span><span style="color: #008080;">53</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">54</span> }</data[biggerindex+1<span></arraylength-1;i++<span></pre><br></div>

<p>　　4、分析</p>
<p>　　堆排序也是一种不稳定的排序算法。</p>
<p>　　堆排序优于简单选择排序的原因：</p>
<p>　　直接选择排序中，为了从R[1..n]中选出关键字最小的记录，必须进行n-1次比较，然后在R[2..n]中选出关键字最小的记录，又需要做n-2次比较。事实上，后面的n-2次比较中，有许多比较可能在前面的n-1次比较中已经做过，但由于前一趟排序时未保留这些比较结果，所以后一趟排序时又重复执行了这些比较操作。</p>
<p>　　堆排序可通过树形结构保存部分比较结果，可减少比较次数。</p>
<p>　　堆排序的最坏<a href="http://www.cnblogs.com/view/104946.htm" target="_blank">时间复杂度</a>为<strong>O(nlogn)</strong>。堆序的平均性能较接近于最坏性能。由于建初始堆所需的比较次数较多，所以堆排序不适宜于记录数较少的文件。</p>
<p>&nbsp;</p>
<p><strong>三、交换排序</strong></p>
<p>①冒泡排序</p>
<p>　　1、基本思想：在要排序的一组数中，对当前还未排好序的范围内的全部数，自上而下对相邻的两个数依次进行比较和调整，让较大的数往下沉，较小的往上冒。即：每当两相邻的数比较后发现它们的排序与排序要求相反时，就将它们互换。</p>
<p>　　2、实例</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24171547-a3280c1d447746928e4c6fa395843940.png" alt=""></p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">稳定</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 冒泡排序 {<br></span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1,8<span style="color: #000000;">};<br></span><span style="color: #008080;"> 7</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;"> 9</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">11</span>         <span style="color: #008000;">//</span><span style="color: #008000;">冒泡排序</span><br><span style="color: #008080;">12</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">13</span>             <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> j = 0; j<a.length-i-1; j++<span="" style="color: #000000;">){<br><span style="color: #008080;">14</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">这里-i主要是每遍历一次都把最大的i个数沉到最底下去了，没有必要再替换了</span><br><span style="color: #008080;">15</span>                 <span style="color: #0000ff;">if</span>(a[j]&gt;a[j+1<span style="color: #000000;">]){<br></span><span style="color: #008080;">16</span>                     <span style="color: #0000ff;">int</span> temp =<span style="color: #000000;"> a[j];<br></span><span style="color: #008080;">17</span>                     a[j] = a[j+1<span style="color: #000000;">];<br></span><span style="color: #008080;">18</span>                     a[j+1] =<span style="color: #000000;"> temp;<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">21</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">22</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">23</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">25</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">26</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">27</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">28</span> }</a.length-i-1;></pre><br></div>

<p>　　4、分析</p>
<p>　　冒泡排序是一种稳定的排序方法。　</p>
<div>&bull;若文件初状为正序，则一趟起泡就可完成排序，排序码的比较次数为n-1，且没有记录移动，时间复杂度是O(n)</div><br><div>&bull;若文件初态为逆序，则需要n-1趟起泡，每趟进行n-i次排序码的比较，且每次比较都移动三次，比较和移动次数均达到最大值∶O(n2)</div><br><div><br><div>&bull;起泡排序平均时间复杂度为O(n2)</div><br><div>&nbsp;</div><br><div>&nbsp;</div><br><div>②快速排序</div><br><div>　　1、基本思想：选择一个基准元素,通常选择第一个元素或者最后一个元素,通过一趟扫描，将待排序列分成两部分,一部分比基准元素小,一部分大于等于基准元素,此时基准元素在其排好序后的正确位置,然后再用同样的方法递归地排序划分的两部分。</div><br><div>　　</div><br><div>　　2、实例</div><br><div><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24171935-597769220aca4efdb3b155dbe11a5bec.png" alt=""></div><br><div>&nbsp;</div><br><div>　　3、java实现</div><br><div><br><div class="cnblogs_code"><br><pre><span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br><br></span><span style="color: #008000;">//</span><span style="color: #008000;">不稳定</span><br><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 快速排序 {<br>    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br>        </span><span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1,8<span style="color: #000000;">};<br>        System.out.println(</span>“排序之前：”<span style="color: #000000;">);<br>        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br>            System.out.print(a[i]</span>+” “<span style="color: #000000;">);<br>        }<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">快速排序</span><br><span style="color: #000000;">        quick(a);<br>        System.out.println();<br>        System.out.println(</span>“排序之后：”<span style="color: #000000;">);<br>        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br>            System.out.print(a[i]</span>+” “<span style="color: #000000;">);<br>        }<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> quick(<span style="color: #0000ff;">int</span><span style="color: #000000;">[] a) {<br>        </span><span style="color: #0000ff;">if</span>(a.length&gt;0<span style="color: #000000;">){<br>            quickSort(a,</span>0,a.length-1<span style="color: #000000;">);<br>        }<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> quickSort(<span style="color: #0000ff;">int</span>[] a, <span style="color: #0000ff;">int</span> low, <span style="color: #0000ff;">int</span><span style="color: #000000;"> high) {<br>        </span><span style="color: #0000ff;">if</span>(low<high){ <span="" style="color: #008000;">//<span style="color: #008000;">如果不加这个判断递归会无法退出导致堆栈溢出异常</span><br>            <span style="color: #0000ff;">int</span> middle =<span style="color: #000000;"> getMiddle(a,low,high);<br>            quickSort(a, </span>0, middle-1<span style="color: #000000;">);<br>            quickSort(a, middle</span>+1<span style="color: #000000;">, high);<br>        }<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> getMiddle(<span style="color: #0000ff;">int</span>[] a, <span style="color: #0000ff;">int</span> low, <span style="color: #0000ff;">int</span><span style="color: #000000;"> high) {<br>        </span><span style="color: #0000ff;">int</span> temp = a[low];<span style="color: #008000;">//</span><span style="color: #008000;">基准元素</span><br>        <span style="color: #0000ff;">while</span>(low&lt;<span style="color: #000000;">high){<br>            </span><span style="color: #008000;">//</span><span style="color: #008000;">找到比基准元素小的元素位置</span><br>            <span style="color: #0000ff;">while</span>(low<high &&="" a[high]="">=<span style="color: #000000;">temp){<br>                high</span>–<span style="color: #000000;">;<br>            }<br>            a[low] </span>=<span style="color: #000000;"> a[high];<br>            </span><span style="color: #0000ff;">while</span>(low<high &&="" a[low]<="<span" style="color: #000000;">temp){<br>                low++<span style="color: #000000;">;<br>            }<br>            a[high] </span>=<span style="color: #000000;"> a[low];<br>        }<br>        a[low] </span>=<span style="color: #000000;"> temp;<br>        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> low;<br>    }<br>}</span></high></high></high){></pre><br></div>

<p>　　4、分析</p>
<p>　　快速排序是不稳定的排序。</p>
<p>　　快速排序的时间复杂度为O(nlogn)。</p>
<p>　　当n较大时使用快排比较好，当序列基本有序时用快排反而不好。</p>
<p>&nbsp;</p>
<p><strong>四、归并排序</strong></p>
<p>　　1、基本思想:归并（Merge）排序法是将两个（或两个以上）有序表合并成一个新的有序表，即把待排序序列分为若干个子序列，每个子序列是有序的。然后再把有序子序列合并为整体有序序列。</p>
<p>　　2、实例</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24172910-865a3743068a4c9fadce3dddb625e619.png" alt=""></p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #008000;">//</span><span style="color: #008000;">稳定</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 归并排序 {<br></span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,76,13,27,49,78,34,12,64,1,8<span style="color: #000000;">};<br></span><span style="color: #008080;"> 7</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;"> 9</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">11</span>         <span style="color: #008000;">//</span><span style="color: #008000;">归并排序</span><br><span style="color: #008080;">12</span>         mergeSort(a,0,a.length-1<span style="color: #000000;">);<br></span><span style="color: #008080;">13</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">14</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">15</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">16</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">17</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">18</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">19</span><br><span style="color: #008080;">20</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> mergeSort(<span style="color: #0000ff;">int</span>[] a, <span style="color: #0000ff;">int</span> left, <span style="color: #0000ff;">int</span><span style="color: #000000;"> right) {<br></span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">if</span>(left&lt;<span style="color: #000000;">right){<br></span><span style="color: #008080;">22</span>             <span style="color: #0000ff;">int</span> middle = (left+right)/2<span style="color: #000000;">;<br></span><span style="color: #008080;">23</span>             <span style="color: #008000;">//</span><span style="color: #008000;">对左边进行递归</span><br><span style="color: #008080;">24</span> <span style="color: #000000;">            mergeSort(a, left, middle);<br></span><span style="color: #008080;">25</span>             <span style="color: #008000;">//</span><span style="color: #008000;">对右边进行递归</span><br><span style="color: #008080;">26</span>             mergeSort(a, middle+1<span style="color: #000000;">, right);<br></span><span style="color: #008080;">27</span>             <span style="color: #008000;">//</span><span style="color: #008000;">合并</span><br><span style="color: #008080;">28</span> <span style="color: #000000;">            merge(a,left,middle,right);<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">30</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">31</span><br><span style="color: #008080;">32</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> merge(<span style="color: #0000ff;">int</span>[] a, <span style="color: #0000ff;">int</span> left, <span style="color: #0000ff;">int</span> middle, <span style="color: #0000ff;">int</span><span style="color: #000000;"> right) {<br></span><span style="color: #008080;">33</span>         <span style="color: #0000ff;">int</span>[] tmpArr = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span><span style="color: #000000;">[a.length];<br></span><span style="color: #008080;">34</span>         <span style="color: #0000ff;">int</span> mid = middle+1; <span style="color: #008000;">//</span><span style="color: #008000;">右边的起始位置</span><br><span style="color: #008080;">35</span>         <span style="color: #0000ff;">int</span> tmp =<span style="color: #000000;"> left;<br></span><span style="color: #008080;">36</span>         <span style="color: #0000ff;">int</span> third =<span style="color: #000000;"> left;<br></span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">while</span>(left&lt;=middle &amp;&amp; mid&lt;=<span style="color: #000000;">right){<br></span><span style="color: #008080;">38</span>             <span style="color: #008000;">//</span><span style="color: #008000;">从两个数组中选取较小的数放入中间数组</span><br><span style="color: #008080;">39</span>             <span style="color: #0000ff;">if</span>(a[left]&lt;=<span style="color: #000000;">a[mid]){<br></span><span style="color: #008080;">40</span>                 tmpArr[third++] = a[left++<span style="color: #000000;">];<br></span><span style="color: #008080;">41</span>             }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;">42</span>                 tmpArr[third++] = a[mid++<span style="color: #000000;">];<br></span><span style="color: #008080;">43</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">44</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">45</span>         <span style="color: #008000;">//</span><span style="color: #008000;">将剩余的部分放入中间数组</span><br><span style="color: #008080;">46</span>         <span style="color: #0000ff;">while</span>(left&lt;=<span style="color: #000000;">middle){<br></span><span style="color: #008080;">47</span>             tmpArr[third++] = a[left++<span style="color: #000000;">];<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">49</span>         <span style="color: #0000ff;">while</span>(mid&lt;=<span style="color: #000000;">right){<br></span><span style="color: #008080;">50</span>             tmpArr[third++] = a[mid++<span style="color: #000000;">];<br></span><span style="color: #008080;">51</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">52</span>         <span style="color: #008000;">//</span><span style="color: #008000;">将中间数组复制回原数组</span><br><span style="color: #008080;">53</span>         <span style="color: #0000ff;">while</span>(tmp&lt;=<span style="color: #000000;">right){<br></span><span style="color: #008080;">54</span>             a[tmp] = tmpArr[tmp++<span style="color: #000000;">];<br></span><span style="color: #008080;">55</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">56</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">57</span> }</pre><br></div>

<p>　　4、分析</p>
<p>　　归并排序是稳定的排序方法。</p>
<p>　　归并排序的时间复杂度为O(nlogn)。</p>
<p>　　速度仅次于快速排序，为稳定排序算法，一般用于对总体无序，但是各子项相对有序的数列。</p>
<p>&nbsp;</p>
<p><strong>五、基数排序</strong></p>
<p>　　1、基本思想：将所有待比较数值（正整数）统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后,数列就变成一个有序序列。</p>
<p>　　2、实例</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/24173311-1571017618a54d6faf75d652389939df.png" alt=""></p>
<p>　　3、java实现</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.sort;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.ArrayList;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;<br></span><span style="color: #008080;"> 5</span> <span style="color: #008000;">//</span><span style="color: #008000;">稳定</span><br><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> 基数排序 {<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> main(String[] args) {<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">int</span>[] a={49,38,65,97,176,213,227,49,78,34,12,164,11,18,1<span style="color: #000000;">};<br></span><span style="color: #008080;"> 9</span>         System.out.println(“排序之前：”<span style="color: #000000;">);<br></span><span style="color: #008080;">10</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">11</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">12</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">13</span>         <span style="color: #008000;">//</span><span style="color: #008000;">基数排序</span><br><span style="color: #008080;">14</span> <span style="color: #000000;">        sort(a);<br></span><span style="color: #008080;">15</span> <span style="color: #000000;">        System.out.println();<br></span><span style="color: #008080;">16</span>         System.out.println(“排序之后：”<span style="color: #000000;">);<br></span><span style="color: #008080;">17</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; a.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">18</span>             System.out.print(a[i]+” “<span style="color: #000000;">);<br></span><span style="color: #008080;">19</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">20</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">21</span><br><span style="color: #008080;">22</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> sort(<span style="color: #0000ff;">int</span><span style="color: #000000;">[] array) {<br></span><span style="color: #008080;">23</span>         <span style="color: #008000;">//</span><span style="color: #008000;">找到最大数，确定要排序几趟</span><br><span style="color: #008080;">24</span>         <span style="color: #0000ff;">int</span> max = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; array.length; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">26</span>             <span style="color: #0000ff;">if</span>(max&lt;<span style="color: #000000;">array[i]){<br></span><span style="color: #008080;">27</span>                 max =<span style="color: #000000;"> array[i];<br></span><span style="color: #008080;">28</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">30</span>         <span style="color: #008000;">//</span><span style="color: #008000;">判断位数</span><br><span style="color: #008080;">31</span>         <span style="color: #0000ff;">int</span> times = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">32</span>         <span style="color: #0000ff;">while</span>(max&gt;0<span style="color: #000000;">){<br></span><span style="color: #008080;">33</span>             max = max/10<span style="color: #000000;">;<br></span><span style="color: #008080;">34</span>             times++<span style="color: #000000;">;<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">36</span>         <span style="color: #008000;">//</span><span style="color: #008000;">建立十个队列</span><br><span style="color: #008080;">37</span>         List<arraylist> queue = <span style="color: #0000ff;">new</span> ArrayList<arraylist><span style="color: #000000;">();<br></span><span style="color: #008080;">38</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; 10; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">39</span>             ArrayList queue1 = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ArrayList();<br></span><span style="color: #008080;">40</span> <span style="color: #000000;">            queue.add(queue1);<br></span><span style="color: #008080;">41</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">42</span>         <span style="color: #008000;">//</span><span style="color: #008000;">进行times次分配和收集</span><br><span style="color: #008080;">43</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = 0; i &lt; times; i++<span style="color: #000000;">) {<br></span><span style="color: #008080;">44</span>             <span style="color: #008000;">//</span><span style="color: #008000;">分配</span><br><span style="color: #008080;">45</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = 0; j &lt; array.length; j++<span style="color: #000000;">) {<br></span><span style="color: #008080;">46</span>                 <span style="color: #0000ff;">int</span> x = array[j]%(<span style="color: #0000ff;">int</span>)Math.pow(10, i+1)/(<span style="color: #0000ff;">int</span>)Math.pow(10<span style="color: #000000;">, i);<br></span><span style="color: #008080;">47</span>                 ArrayList queue2 =<span style="color: #000000;"> queue.get(x);<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">                queue2.add(array[j]);<br></span><span style="color: #008080;">49</span> <span style="color: #000000;">                queue.set(x,queue2);<br></span><span style="color: #008080;">50</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">51</span>             <span style="color: #008000;">//</span><span style="color: #008000;">收集</span><br><span style="color: #008080;">52</span>             <span style="color: #0000ff;">int</span> count = 0<span style="color: #000000;">;<br></span><span style="color: #008080;">53</span>             <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = 0; j &lt; 10; j++<span style="color: #000000;">) {<br></span><span style="color: #008080;">54</span>                 <span style="color: #0000ff;">while</span>(queue.get(j).size()&gt;0<span style="color: #000000;">){<br></span><span style="color: #008080;">55</span>                     ArrayList<integer> queue3 =<span style="color: #000000;"> queue.get(j);<br></span><span style="color: #008080;">56</span>                     array[count] = queue3.get(0<span style="color: #000000;">);<br></span><span style="color: #008080;">57</span>                     queue3.remove(0<span style="color: #000000;">);<br></span><span style="color: #008080;">58</span>                     count++<span style="color: #000000;">;<br></span><span style="color: #008080;">59</span> <span style="color: #000000;">                }<br></span><span style="color: #008080;">60</span> <span style="color: #000000;">            }<br></span><span style="color: #008080;">61</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">62</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">63</span> }</integer></arraylist></arraylist></pre><br></div>

<p>　　4、分析</p>
<p>　　基数排序是稳定的排序算法。</p>
<p>　　基数排序的时间复杂度为O(d(n+r)),d为位数，r为基数。</p>
<p>&nbsp;</p>
<p><strong>总结：</strong></p>
<p>一、稳定性:</p>
<p>　&nbsp;&nbsp; 稳定：冒泡排序、插入排序、归并排序和基数排序</p>
<p>　　不稳定：选择排序、快速排序、希尔排序、堆排序</p>
<p>二、平均时间复杂度</p>
<p>　　O(n^2):直接插入排序，简单选择排序，冒泡排序。</p>
<p>　　在数据规模较小时（9W内），直接插入排序，简单选择排序差不多。当数据较大时，冒泡排序算法的时间代价最高。<span style="color: #ff0000;">性能为O(n^2)的算法基本上是相邻元素进行比较，基本上都是稳定的</span>。</p>
<p>　　O(nlogn):<span style="color: #000000;">快速排序，归并排序，希尔排序，堆排序。</span></p>
<p>　　其中，快排是最好的， 其次是归并和希尔，堆排序在数据量很大时效果明显。</p>
<p>三、排序算法的选择</p>
<p>　　1.数据规模较小</p>
<p>&nbsp; 　　（1）待排序列基本序的情况下，可以选择<span style="color: #ff0000;"><strong>直接插入排序</strong></span>；</p>
<p>&nbsp; 　　（2）对稳定性不作要求宜用<span style="color: #ff0000;">简单选择排序</span>，对稳定性有要求宜用<span style="color: #ff0000;">插入或冒泡</span></p>
<p>　　2.数据规模不是很大</p>
<p>　　（1）完全可以用内存空间，序列杂乱无序，对稳定性没有要求，<span style="color: #ff0000;"><strong>快速排序</strong></span>，此时要付出log（N）的额外空间。</p>
<p>　　（2）序列本身可能有序，对稳定性有要求，空间允许下，宜用<span style="color: #ff0000;">归并排序</span></p>
<p>　　3.数据规模很大</p>
<p>&nbsp;&nbsp; 　　（1）对稳定性有求，则可考虑<span style="color: #ff0000;">归并排序</span>。</p>
<p>&nbsp;&nbsp;&nbsp; 　　（2）对稳定性没要求，宜用<span style="color: #ff0000;">堆排序</span></p>
<p><span style="color: #000000;">　　4.序列初始基本有序（正序），宜用直接插入，冒泡</span></p>
<p>&nbsp;</p>
<p><span style="color: #000000;">参考资料:</span></p>
<p>　　<a href="http://blog.csdn.net/without0815/article/details/7697916" target="_blank" rel="external">http://blog.csdn.net/without0815/article/details/7697916</a></p></div><p></p>
<div>　　<a href="http://gengning938.blog.163.com/blog/static/128225381201141121326346/" target="_blank" rel="external">http://gengning938.blog.163.com/blog/static/128225381201141121326346/</a></div><br></div><br></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/07/order-java.html" data-id="ciiy5f4rj0047q1d0kxlrbjsl" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/07/order-java.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hdfs-file-zip" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hdfs-file-zip.html">HDFS中文件的压缩与解压</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hdfs-file-zip.html">
      <time datetime="2013-06-19T04:28:00.000Z" itemprop="datePublished">2013-06-19</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　文件的压缩有两大好处：1、可以减少存储文件所需要的磁盘空间；2、可以加速数据在网络和磁盘上的传输。尤其是在处理大数据时，这两大好处是相当重要的。</p>
<p>　　下面是一个使用gzip工具压缩文件的例子。将文件/user/hadoop/aa.txt进行压缩，压缩后为/user/hadoop/text.gz</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.hdfs;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.OutputStream;<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.net.URI;<br></span><span style="color: #008080;"> 7</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.conf.Configuration;<br></span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FSDataInputStream;<br></span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FSDataOutputStream;<br></span><span style="color: #008080;">11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileSystem;<br></span><span style="color: #008080;">12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.Path;<br></span><span style="color: #008080;">13</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.IOUtils;<br></span><span style="color: #008080;">14</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.compress.CompressionCodec;<br></span><span style="color: #008080;">15</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.compress.CompressionCodecFactory;<br></span><span style="color: #008080;">16</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.compress.CompressionInputStream;<br></span><span style="color: #008080;">17</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.compress.CompressionOutputStream;<br></span><span style="color: #008080;">18</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.util.ReflectionUtils;<br></span><span style="color: #008080;">19</span><br><span style="color: #008080;">20</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> CodecTest {<br></span><span style="color: #008080;">21</span>     <span style="color: #008000;">//</span><span style="color: #008000;">压缩文件</span><br><span style="color: #008080;">22</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> compress(String codecClassName) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception{<br></span><span style="color: #008080;">23</span>         Class&lt;?&gt; codecClass =<span style="color: #000000;"> Class.forName(codecClassName);<br></span><span style="color: #008080;">24</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;">25</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;">26</span>         CompressionCodec codec =<span style="color: #000000;"> (CompressionCodec)ReflectionUtils.newInstance(codecClass, conf);<br></span><span style="color: #008080;">27</span>         <span style="color: #008000;">//</span><span style="color: #008000;">指定压缩文件路径</span><br><span style="color: #008080;">28</span>         FSDataOutputStream outputStream = fs.create(<span style="color: #0000ff;">new</span> Path(“/user/hadoop/text.gz”<span style="color: #000000;">));<br></span><span style="color: #008080;">29</span>         <span style="color: #008000;">//</span><span style="color: #008000;">指定要被压缩的文件路径</span><br><span style="color: #008080;">30</span>         FSDataInputStream in = fs.open(<span style="color: #0000ff;">new</span> Path(“/user/hadoop/aa.txt”<span style="color: #000000;">));<br></span><span style="color: #008080;">31</span>         <span style="color: #008000;">//</span><span style="color: #008000;">创建压缩输出流</span><br><span style="color: #008080;">32</span>         CompressionOutputStream out =<span style="color: #000000;"> codec.createOutputStream(outputStream);<br></span><span style="color: #008080;">33</span> <span style="color: #000000;">        IOUtils.copyBytes(in, out, conf);<br></span><span style="color: #008080;">34</span> <span style="color: #000000;">        IOUtils.closeStream(in);<br></span><span style="color: #008080;">35</span> <span style="color: #000000;">        IOUtils.closeStream(out);<br></span><span style="color: #008080;">36</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">37</span><br><span style="color: #008080;">38</span>     <span style="color: #008000;">//</span><span style="color: #008000;">解压缩</span><br><span style="color: #008080;">39</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> uncompress(String fileName) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception{<br></span><span style="color: #008080;">40</span>         Class&lt;?&gt; codecClass = Class.forName(“org.apache.hadoop.io.compress.GzipCodec”<span style="color: #000000;">);<br></span><span style="color: #008080;">41</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;">42</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;">43</span>         CompressionCodec codec =<span style="color: #000000;"> (CompressionCodec)ReflectionUtils.newInstance(codecClass, conf);<br></span><span style="color: #008080;">44</span>         FSDataInputStream inputStream = fs.open(<span style="color: #0000ff;">new</span> Path(“/user/hadoop/text.gz”<span style="color: #000000;">));<br></span><span style="color: #008080;">45</span>          <span style="color: #008000;">//</span><span style="color: #008000;">把text文件里到数据解压，然后输出到控制台  </span><br><span style="color: #008080;">46</span>         InputStream in =<span style="color: #000000;"> codec.createInputStream(inputStream);<br></span><span style="color: #008080;">47</span> <span style="color: #000000;">        IOUtils.copyBytes(in, System.out, conf);<br></span><span style="color: #008080;">48</span> <span style="color: #000000;">        IOUtils.closeStream(in);<br></span><span style="color: #008080;">49</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">50</span><br><span style="color: #008080;">51</span>     <span style="color: #008000;">//</span><span style="color: #008000;">使用文件扩展名来推断二来的codec来对文件进行解压缩</span><br><span style="color: #008080;">52</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> uncompress1(String uri) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;">53</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;">54</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(URI.create(uri), conf);<br></span><span style="color: #008080;">55</span><br><span style="color: #008080;">56</span>         Path inputPath = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(uri);<br></span><span style="color: #008080;">57</span>         CompressionCodecFactory factory = <span style="color: #0000ff;">new</span><span style="color: #000000;"> CompressionCodecFactory(conf);<br></span><span style="color: #008080;">58</span>         CompressionCodec codec =<span style="color: #000000;"> factory.getCodec(inputPath);<br></span><span style="color: #008080;">59</span>         <span style="color: #0000ff;">if</span>(codec == <span style="color: #0000ff;">null</span><span style="color: #000000;">){<br></span><span style="color: #008080;">60</span>             System.out.println(“no codec found for “ +<span style="color: #000000;"> uri);<br></span><span style="color: #008080;">61</span>             System.exit(1<span style="color: #000000;">);<br></span><span style="color: #008080;">62</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">63</span>         String outputUri =<span style="color: #000000;"> CompressionCodecFactory.removeSuffix(uri, codec.getDefaultExtension());<br></span><span style="color: #008080;">64</span>         InputStream in = <span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;">65</span>         OutputStream out = <span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;">66</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;">67</span>             in =<span style="color: #000000;"> codec.createInputStream(fs.open(inputPath));<br></span><span style="color: #008080;">68</span>             out = fs.create(<span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(outputUri));<br></span><span style="color: #008080;">69</span> <span style="color: #000000;">            IOUtils.copyBytes(in, out, conf);<br></span><span style="color: #008080;">70</span>         } <span style="color: #0000ff;">finally</span><span style="color: #000000;">{<br></span><span style="color: #008080;">71</span> <span style="color: #000000;">            IOUtils.closeStream(out);<br></span><span style="color: #008080;">72</span> <span style="color: #000000;">            IOUtils.closeStream(in);<br></span><span style="color: #008080;">73</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">74</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">75</span><br><span style="color: #008080;">76</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {<br></span><span style="color: #008080;">77</span>         <span style="color: #008000;">//</span><span style="color: #008000;">compress(“org.apache.hadoop.io.compress.GzipCodec”);<br></span><span style="color: #008080;">78</span>         <span style="color: #008000;">//</span><span style="color: #008000;">uncompress(“text”);</span><br><span style="color: #008080;">79</span>         uncompress1(“hdfs://master:9000/user/hadoop/text.gz”<span style="color: #000000;">);<br></span><span style="color: #008080;">80</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">81</span><br><span style="color: #008080;">82</span> }</pre><br></div>

<p>&nbsp;</p>
<p>　　首先执行77行进行压缩，压缩后执行第78行进行解压缩，这里解压到标准输出，所以执行78行会再控制台看到文件/user/hadoop/aa.txt的内容。如果执行79行的话会将文件解压到/user/hadoop/text,他是根据/user/hadoop/text.gz的扩展名判断使用哪个解压工具进行解压的。解压后的路径就是去掉扩展名。</p>
<p>　　进行文件压缩后，在执行命令./hadoop fs -ls /user/hadoop/查看文件信息，如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> [hadoop@master bin]$ ./hadoop fs -ls /user/hadoop/<br><span style="color: #008080;">2</span> Found 7<span style="color: #000000;"> items<br></span><span style="color: #008080;">3</span> -rw-r–r–   3 hadoop supergroup   76805248 2013-06-17 23:55 /user/hadoop/<span style="color: #000000;">aa.mp4<br></span><span style="color: #008080;">4</span> -rw-r–r–   3 hadoop supergroup        520 2013-06-17 22:29 /user/hadoop/<span style="color: #000000;">aa.txt<br></span><span style="color: #008080;">5</span> drwxr-xr-x   - hadoop supergroup          0 2013-06-16 17:19 /user/hadoop/<span style="color: #000000;">input<br></span><span style="color: #008080;">6</span> drwxr-xr-x   - hadoop supergroup          0 2013-06-16 19:32 /user/hadoop/<span style="color: #000000;">output<br></span><span style="color: #008080;">7</span> drwxr-xr-x   - hadoop supergroup          0 2013-06-18 17:08 /user/hadoop/<span style="color: #000000;">test<br></span><span style="color: #008080;">8</span> drwxr-xr-x   - hadoop supergroup          0 2013-06-18 19:45 /user/hadoop/<span style="color: #000000;">test1<br></span><span style="color: #008080;">9</span> -rw-r–r–   3 hadoop supergroup         46 2013-06-19 20:09 /user/hadoop/text.gz</pre><br></div>

<p>第4行为压缩之前的文件，大小为520个字节。第9行为压缩后的文件，大小为46个字节。由此可以看出上面讲的压缩的两大好处了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hdfs-file-zip.html" data-id="ciiy5f4vk00ahq1d09eusduad" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hdfs-file-zip.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hdfs-pathfilter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hdfs-pathfilter.html">HDFS中PathFilter类</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hdfs-pathfilter.html">
      <time datetime="2013-06-18T06:04:00.000Z" itemprop="datePublished">2013-06-18</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　在单个操作中处理一批文件，这是很常见的需求。比如说处理日志的MapReduce作业可能需要分析一个月内包含在大量目录中的日志文件。在一个表达式中使用通配符在匹配多个文件时比较方便的，无需列举每个文件和目录来指定输入。hadoop为执行通配提供了两个FIleSystem方法：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">public</span> FileStatus[] globStatus(Path pathPattern) <span style="color: #0000ff;">throw</span><span style="color: #000000;"> IOException<br></span><span style="color: #008080;">2</span> <span style="color: #0000ff;">public</span> FileStatus[] globStatus(Path pathPattern, PathFilter filter) <span style="color: #0000ff;">throw</span> IOException</pre><br></div>

<p>　　globStatus()方法返回与路径想匹配的所有文件的FileStatus对象数组，并按路径排序。hadoop所支持的通配符与Unix bash相同。</p>
<p>　　第二个方法传了一个PathFilter对象作为参数，PathFilter可以进一步对匹配进行限制。PathFilter是一个接口，里面只有一个方法accept(Path path)。</p>
<p>下面看一个例子演示PathFilter的作用：</p>
<p>　　RegexExcludePathFilter.java:该类实现了PathFilter接口，重写了accept方法</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">class</span> RegexExcludePathFilter <span style="color: #0000ff;">implements</span><span style="color: #000000;"> PathFilter{<br></span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">final</span><span style="color: #000000;"> String regex;<br></span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> RegexExcludePathFilter(String regex) {<br></span><span style="color: #008080;"> 4</span>         <span style="color: #0000ff;">this</span>.regex =<span style="color: #000000;"> regex;<br></span><span style="color: #008080;"> 5</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    @Override<br></span><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> accept(Path path) {<br></span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">return</span> !<span style="color: #000000;">path.toString().matches(regex);<br></span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">10</span><br><span style="color: #008080;">11</span> }</pre><br></div>

<p>　　该方法就是打印符合通配的路径：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #008000;">//</span><span style="color: #008000;">通配符的使用</span><br><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> list() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 3</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 4</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 5</span>         <span style="color: #008000;">//</span><span style="color: #008000;">PathFilter是过滤布符合置顶表达式的路径，下列就是把以txt结尾的过滤掉</span><br><span style="color: #008080;"> 6</span>         FileStatus[] status = fs.globStatus(<span style="color: #0000ff;">new</span> Path(“hdfs://master:9000/user/hadoop/test/<em>“),<span style="color: #0000ff;">new</span> RegexExcludePathFilter(“.</em>txt”<span style="color: #000000;">));<br></span><span style="color: #008080;"> 7</span>         <span style="color: #008000;">//</span><span style="color: #008000;">FileStatus[] status = fs.globStatus(new Path(“hdfs:</span><span style="color: #008000;">//</span><span style="color: #008000;">master:9000/user/hadoop/test/*”));</span><br><span style="color: #008080;"> 8</span>         Path[] listedPaths =<span style="color: #000000;"> FileUtil.stat2Paths(status);<br></span><span style="color: #008080;"> 9</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (Path p : listedPaths) {<br></span><span style="color: #008080;">10</span> <span style="color: #000000;">            System.out.println(p);<br></span><span style="color: #008080;">11</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">12</span>     }</pre><br></div>

<p>如果注释第6行，取消第7行的注释，则输出结果如下：<br>hdfs://master:9000/user/hadoop/test/a.txt<br>hdfs://master:9000/user/hadoop/test/b.txt<br>hdfs://master:9000/user/hadoop/test/c.aaa<br>hdfs://master:9000/user/hadoop/test/c.txt<br>hdfs://master:9000/user/hadoop/test/cc.aaa</p>
<p>如果注释第7行，取消第6行的注释，则输出结果如下：</p>
<p>hdfs://master:9000/user/hadoop/test/c.aaa<br>hdfs://master:9000/user/hadoop/test/cc.aaa</p>
<p>&nbsp;</p>
<p>由此可见，PathFilter就是在匹配前面条件之后再加以限制，将匹配PathFilter的路径去除掉。其实由accept方法里面的return !path.toString().matches(regex);可以看出来，就是将匹配的全部去除掉，如果改为return path.toString().matches(regex);就是将匹配regex的Path输出，将不匹配的去除。</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hdfs-pathfilter.html" data-id="ciiy5f4vd00a0q1d065jy5azk" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hdfs-pathfilter.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hdfs-filestatus" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hdfs-filestatus.html">HDFS之FileStatus</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hdfs-filestatus.html">
      <time datetime="2013-06-17T17:25:00.000Z" itemprop="datePublished">2013-06-18</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　 任何文件系统的一个重要特性都是提供其目录结构浏览和检索它所存文件和目录相关信息的功能。FileStatus对象封装了文件系统中文件和目录的元数据，包括文件的长度、块大小、备份数、修改时间、所有者以及权限等信息。</p>
<p>　　FileStatus对象由FileSystem的getFileStatus()方法获得，调用该方法的时候要把文件的Path传进去。</p>
<p>　　例子：打印输出某个文件的所有信息</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.hdfs;<br></span><span style="color: #008080;"> 2</span><br><span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.conf.Configuration;<br></span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FSDataInputStream;<br></span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FSDataOutputStream;<br></span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileStatus;<br></span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileSystem;<br></span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileUtil;<br></span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FsUrlStreamHandlerFactory;<br></span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.Path;<br></span><span style="color: #008080;">11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.IOUtils;<br></span><span style="color: #008080;">12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.util.Progressable;<br></span><span style="color: #008080;">13</span><br><span style="color: #008080;">14</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HdfsTest1 {<br></span><span style="color: #008080;">15</span>     <span style="color: #008000;">//</span><span style="color: #008000;">显示文件所有信息</span><br><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> fileInfo(String path) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;">17</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;">18</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;">19</span>         Path p = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(path);<br></span><span style="color: #008080;">20</span>         <span style="color: #008000;">//</span><span style="color: #008000;">FileStatus对象封装了文件的和目录的额元数据，包括文件长度、块大小、权限等信息</span><br><span style="color: #008080;">21</span>         FileStatus fileStatus =<span style="color: #000000;"> fs.getFileStatus(p);<br></span><span style="color: #008080;">22</span>         System.out.println(“文件路径：”+<span style="color: #000000;">fileStatus.getPath());<br></span><span style="color: #008080;">23</span>         System.out.println(“块的大小：”+<span style="color: #000000;">fileStatus.getBlockSize());<br></span><span style="color: #008080;">24</span>         System.out.println(“文件所有者：”+fileStatus.getOwner()+”:”+<span style="color: #000000;">fileStatus.getGroup());<br></span><span style="color: #008080;">25</span>         System.out.println(“文件权限：”+<span style="color: #000000;">fileStatus.getPermission());<br></span><span style="color: #008080;">26</span>         System.out.println(“文件长度：”+<span style="color: #000000;">fileStatus.getLen());<br></span><span style="color: #008080;">27</span>         System.out.println(“备份数：”+<span style="color: #000000;">fileStatus.getReplication());<br></span><span style="color: #008080;">28</span>         System.out.println(“修改时间：”+<span style="color: #000000;">fileStatus.getModificationTime());<br></span><span style="color: #008080;">29</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">30</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {<br></span><span style="color: #008080;">31</span>         fileInfo(“/user/hadoop/aa.mp4”<span style="color: #000000;">);<br></span><span style="color: #008080;">32</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">33</span><br><span style="color: #008080;">34</span> }</pre><br></div>

<p>输出结果为：</p>
<p>文件路径：hdfs://master:9000/user/hadoop/aa.mp4<br>块的大小：67108864<br>文件所有者：hadoop:supergroup<br>文件权限：rw-r–r–<br>文件长度：76805248<br>备份数：3<br>修改时间：1371484526483</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hdfs-filestatus.html" data-id="ciiy5f4vi00acq1d0nkv5frvp" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hdfs-filestatus.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hdfs-javaapi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hdfs-javaapi.html">HDFS中JAVA API的使用</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hdfs-javaapi.html">
      <time datetime="2013-06-17T06:21:00.000Z" itemprop="datePublished">2013-06-17</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　HDFS是一个分布式文件系统，既然是文件系统，就可以对其文件进行操作，比如说新建文件、删除文件、读取文件内容等操作。下面记录一下使用JAVA API对HDFS中的文件进行操作的过程。</p>
<p>　　对分HDFS中的文件操作主要涉及一下几个类：</p>
<p>　　Configuration类：该类的对象封转了客户端或者服务器的配置。</p>
<p>　　FileSystem类：该类的对象是一个文件系统对象，可以用该对象的一些方法来对文件进行操作。FileSystem fs = FileSystem.get(conf);通过FileSystem的静态方法get获得该对象。</p>
<p>　　FSDataInputStream和FSDataOutputStream：这两个类是HDFS中的输入输出流。分别通过FileSystem的open方法和create方法获得。</p>
<p>　　具体如何对文件操作清下下面例子：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">  1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> com.hdfs;<br></span><span style="color: #008080;">  2</span><br><span style="color: #008080;">  3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.FileInputStream;<br></span><span style="color: #008080;">  4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;<br></span><span style="color: #008080;">  5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;<br></span><span style="color: #008080;">  6</span><br><span style="color: #008080;">  7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.conf.Configuration;<br></span><span style="color: #008080;">  8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FSDataOutputStream;<br></span><span style="color: #008080;">  9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileStatus;<br></span><span style="color: #008080;"> 10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.FileSystem;<br></span><span style="color: #008080;"> 11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.fs.Path;<br></span><span style="color: #008080;"> 12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.apache.hadoop.io.IOUtils;<br></span><span style="color: #008080;"> 13</span><br><span style="color: #008080;"> 14</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HdfsTest {<br></span><span style="color: #008080;"> 15</span><br><span style="color: #008080;"> 16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建新文件</span><br><span style="color: #008080;"> 17</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> createFile(String dst , <span style="color: #0000ff;">byte</span>[] contents) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 18</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 19</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 20</span>         Path dstPath = <span style="color: #0000ff;">new</span> Path(dst); <span style="color: #008000;">//</span><span style="color: #008000;">目标路径<br></span><span style="color: #008080;"> 21</span>         <span style="color: #008000;">//</span><span style="color: #008000;">打开一个输出流</span><br><span style="color: #008080;"> 22</span>         FSDataOutputStream outputStream =<span style="color: #000000;"> fs.create(dstPath);<br></span><span style="color: #008080;"> 23</span> <span style="color: #000000;">        outputStream.write(contents);<br></span><span style="color: #008080;"> 24</span> <span style="color: #000000;">        outputStream.close();<br></span><span style="color: #008080;"> 25</span> <span style="color: #000000;">        fs.close();<br></span><span style="color: #008080;"> 26</span>         System.out.println(“文件创建成功！”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 27</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 28</span><br><span style="color: #008080;"> 29</span>     <span style="color: #008000;">//</span><span style="color: #008000;">上传本地文件</span><br><span style="color: #008080;"> 30</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> uploadFile(String src,String dst) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 31</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 32</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 33</span>         Path srcPath = <span style="color: #0000ff;">new</span> Path(src); <span style="color: #008000;">//</span><span style="color: #008000;">原路径</span><br><span style="color: #008080;"> 34</span>         Path dstPath = <span style="color: #0000ff;">new</span> Path(dst); <span style="color: #008000;">//</span><span style="color: #008000;">目标路径<br></span><span style="color: #008080;"> 35</span>         <span style="color: #008000;">//</span><span style="color: #008000;">调用文件系统的文件复制函数,前面参数是指是否删除原文件，true为删除，默认为false</span><br><span style="color: #008080;"> 36</span>         fs.copyFromLocalFile(<span style="color: #0000ff;">false</span><span style="color: #000000;">,srcPath, dstPath);<br></span><span style="color: #008080;"> 37</span><br><span style="color: #008080;"> 38</span>         <span style="color: #008000;">//</span><span style="color: #008000;">打印文件路径</span><br><span style="color: #008080;"> 39</span>         System.out.println(“Upload to “+conf.get(“fs.default.name”<span style="color: #000000;">));<br></span><span style="color: #008080;"> 40</span>         System.out.println(“————list files————“+”\n”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 41</span>         FileStatus [] fileStatus =<span style="color: #000000;"> fs.listStatus(dstPath);<br></span><span style="color: #008080;"> 42</span>         <span style="color: #0000ff;">for</span><span style="color: #000000;"> (FileStatus file : fileStatus)<br></span><span style="color: #008080;"> 43</span> <span style="color: #000000;">        {<br></span><span style="color: #008080;"> 44</span> <span style="color: #000000;">            System.out.println(file.getPath());<br></span><span style="color: #008080;"> 45</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;"> 46</span> <span style="color: #000000;">        fs.close();<br></span><span style="color: #008080;"> 47</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 48</span><br><span style="color: #008080;"> 49</span>     <span style="color: #008000;">//</span><span style="color: #008000;">文件重命名</span><br><span style="color: #008080;"> 50</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> rename(String oldName,String newName) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 51</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 52</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 53</span>         Path oldPath = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(oldName);<br></span><span style="color: #008080;"> 54</span>         Path newPath = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(newName);<br></span><span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">boolean</span> isok =<span style="color: #000000;"> fs.rename(oldPath, newPath);<br></span><span style="color: #008080;"> 56</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(isok){<br></span><span style="color: #008080;"> 57</span>             System.out.println(“rename ok!”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 58</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;"> 59</span>             System.out.println(“rename failure”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 60</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;"> 61</span> <span style="color: #000000;">        fs.close();<br></span><span style="color: #008080;"> 62</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 63</span>     <span style="color: #008000;">//</span><span style="color: #008000;">删除文件</span><br><span style="color: #008080;"> 64</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> delete(String filePath) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 65</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 66</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 67</span>         Path path = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(filePath);<br></span><span style="color: #008080;"> 68</span>         <span style="color: #0000ff;">boolean</span> isok =<span style="color: #000000;"> fs.deleteOnExit(path);<br></span><span style="color: #008080;"> 69</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(isok){<br></span><span style="color: #008080;"> 70</span>             System.out.println(“delete ok!”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 71</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;"> 72</span>             System.out.println(“delete failure”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 73</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;"> 74</span> <span style="color: #000000;">        fs.close();<br></span><span style="color: #008080;"> 75</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 76</span><br><span style="color: #008080;"> 77</span>     <span style="color: #008000;">//</span><span style="color: #008000;">创建目录</span><br><span style="color: #008080;"> 78</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> mkdir(String path) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 79</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 80</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 81</span>         Path srcPath = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(path);<br></span><span style="color: #008080;"> 82</span>         <span style="color: #0000ff;">boolean</span> isok =<span style="color: #000000;"> fs.mkdirs(srcPath);<br></span><span style="color: #008080;"> 83</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;">(isok){<br></span><span style="color: #008080;"> 84</span>             System.out.println(“create dir ok!”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 85</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{<br></span><span style="color: #008080;"> 86</span>             System.out.println(“create dir failure”<span style="color: #000000;">);<br></span><span style="color: #008080;"> 87</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;"> 88</span> <span style="color: #000000;">        fs.close();<br></span><span style="color: #008080;"> 89</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;"> 90</span><br><span style="color: #008080;"> 91</span>     <span style="color: #008000;">//</span><span style="color: #008000;">读取文件的内容</span><br><span style="color: #008080;"> 92</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> readFile(String filePath) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException{<br></span><span style="color: #008080;"> 93</span>         Configuration conf = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Configuration();<br></span><span style="color: #008080;"> 94</span>         FileSystem fs =<span style="color: #000000;"> FileSystem.get(conf);<br></span><span style="color: #008080;"> 95</span>         Path srcPath = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Path(filePath);<br></span><span style="color: #008080;"> 96</span>         InputStream in = <span style="color: #0000ff;">null</span><span style="color: #000000;">;<br></span><span style="color: #008080;"> 97</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br></span><span style="color: #008080;"> 98</span>             in =<span style="color: #000000;"> fs.open(srcPath);<br></span><span style="color: #008080;"> 99</span>             IOUtils.copyBytes(in, System.out, 4096, <span style="color: #0000ff;">false</span>); <span style="color: #008000;">//</span><span style="color: #008000;">复制到标准输出流</span><br><span style="color: #008080;">100</span>         } <span style="color: #0000ff;">finally {<br><span style="color: #008080;">101</span> <span style="color: #000000;">            IOUtils.closeStream(in);<br></span><span style="color: #008080;">102</span> <span style="color: #000000;">        }<br></span><span style="color: #008080;">103</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">104</span><br><span style="color: #008080;">105</span><br><span style="color: #008080;">106</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> main(String[] args) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {<br></span><span style="color: #008080;">107</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试上传文件<br></span><span style="color: #008080;">108</span>         <span style="color: #008000;">//</span><span style="color: #008000;">uploadFile(“D:\c.txt”, “/user/hadoop/test/“);<br></span><span style="color: #008080;">109</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试创建文件</span><br><span style="color: #008080;">110</span>         <span style="color: #008000;">/<em></em></span><span style="color: #008000;">byte[] contents =  “hello world 世界你好\n”.getBytes();<br></span><span style="color: #008080;">111</span> <span style="color: #008000;">        createFile(“/user/hadoop/test1/d.txt”,contents);</span><span style="color: #008000;">/</span><br><span style="color: #008080;">112</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试重命名<br></span><span style="color: #008080;">113</span>         <span style="color: #008000;">//</span><span style="color: #008000;">rename(“/user/hadoop/test/d.txt”, “/user/hadoop/test/dd.txt”);<br></span><span style="color: #008080;">114</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试删除文件<br></span><span style="color: #008080;">115</span>         <span style="color: #008000;">//</span><span style="color: #008000;">delete(“test/dd.txt”); </span><span style="color: #008000;">//</span><span style="color: #008000;">使用相对路径<br></span><span style="color: #008080;">116</span>         <span style="color: #008000;">//</span><span style="color: #008000;">delete(“test1”);    </span><span style="color: #008000;">//</span><span style="color: #008000;">删除目录<br></span><span style="color: #008080;">117</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试新建目录<br></span><span style="color: #008080;">118</span>         <span style="color: #008000;">//</span><span style="color: #008000;">mkdir(“test1”);<br></span><span style="color: #008080;">119</span>         <span style="color: #008000;">//</span><span style="color: #008000;">测试读取文件</span><br><span style="color: #008080;">120</span>         readFile(“test1/d.txt”<span style="color: #000000;">);<br></span><span style="color: #008080;">121</span> <span style="color: #000000;">    }<br></span><span style="color: #008080;">122</span><br><span style="color: #008080;">123</span> }</span></pre><br></div>

<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hdfs-javaapi.html" data-id="ciiy5f4vf00a7q1d0c11lmrzv" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hdfs-javaapi.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hadoop-install" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hadoop-install.html">hadoop集群环境的搭建</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hadoop-install.html">
      <time datetime="2013-06-16T04:59:00.000Z" itemprop="datePublished">2013-06-16</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 今天终于把hadoop集群环境给搭建起来了，能够运行单词统计的示例程序了。</p>
<p>集群信息如下：</p>
<table style="width: 574px;" border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="73"><br><br>主机名<br><br></td><br><td valign="top" width="94"><br><br>Hadoop角色<br><br></td><br><td valign="top" width="151"><br><br>Hadoop jps命令结果<br><br></td><br><td valign="top" width="132"><br><br>Hadoop用户<br><br></td><br><td valign="top" width="123"><br><br>Hadoop安装目录<br><br></td><br></tr><br><tr><br><td valign="top" width="73"><br><br>master<br><br></td><br><td valign="top" width="94"><br><br>Master<br><br>slaves<br><br></td><br><td valign="top" width="151"><br><br>NameNode<br><br>DataNode<br><br>JobTracker<br><br>TaskTracker<br><br>SecondaryNameNode<br><br></td><br><td rowspan="3" valign="top" width="132"><br><br>创建相同的用户的组名：hadoop。<br><br>安装hadoop-0.20.2时使用hadoop用户，并且hadoop的文件夹归属也是hadoop：hadoop<br><br></td><br><td rowspan="3" valign="top" width="123"><br><br>/opt/hadoop<br><br></td><br></tr><br><tr><br><td valign="top" width="73"><br><br>slave1<br><br></td><br><td valign="top" width="94"><br><br>slaves<br><br></td><br><td valign="top" width="151"><br><br>DataNode<br><br>TaskTracker<br><br></td><br></tr><br><tr><br><td valign="top" width="73"><br><br>slave2<br><br></td><br><td valign="top" width="94"><br><br>slaves<br><br></td><br><td valign="top" width="151"><br><br>DataNode<br><br>TaskTracker<br><br></td><br></tr><br></tbody><br></table>

<p>　　注：master即使master又是slave.</p>
<p>搭建步骤如下：</p>
<p>　　一、首先是搞好master</p>
<p>　　1、创建用户组</p>
<p>　　　　groupadd hadoop&nbsp; 添加一个组</p>
<p>　　　　useradd hadoop -g hadoop&nbsp; 添加用户</p>
<p>　　2、jdk的安装</p>
<p>　　　　这里安装的版本是jdk-7u9-linux-i586.tar.gz ，使用 tar -zsvf&nbsp;jdk-7u9-linux-i586.tar.gz&nbsp; -C /opt/&nbsp; 命令将其解压到/opt目录下，并将解压后的文件夹jdk-7u9-linux-i586改名为java.</p>
<p>　　　　jdk安装好就要配置环境变量了，使用vi /etc/profile命令编辑添加如下内容：</p>
<p>　　　　export JAVA_HOME=/opt/java/jdk<br>　　　　exprot PATH=$JAVA_HOME/bin:$PATH</p>
<p>　　　　配置好之后要用命令source /etc/profile使配置文件生效，这样jdk就安装完毕了。安装完之后不要忘了将所有者设置为hadoop。</p>
<p>使用命令chown -R hadoop:hadoop java/</p>
<p>　　3.hadoop的安装</p>
<p>　　　　hadoop的版本是hadoop-0.20.2.tar.gz，也把它解压到/opt目录下面，改名为hadoop。</p>
<p>　　　　hadoop也要设置环境变量，使用vi /etc/profile命令编辑添加如下内容：</p>
<p>　　　　export HADOOP_HOME=/opt/hadoop</p>
<p>　　　　export PATH=$HADOOP_HOME/bin:$PATH</p>
<p>　　　　同样也要执行source /etc/profile使配置文件生效,然后执行命令使用命令chown -R hadoop:hadoop hadoop/将其所有者改为hadoop</p>
<p>　　4、修改地址解析文件/etc/hosts，加入</p>
<p>　　　　192.168.137.110 master</p>
<p>　　　　192.168.137.111 slave1</p>
<p>　　　　192.168.137.112 slave2</p>
<p>　　5、修改hadoop的配置文件</p>
<p>　　首先切换到hadoop用户，su hadoop</p>
<p>　　①修改hadoop目录下的conf/hadoop-env.sh文件</p>
<p>　　　　加入java的安装路径export JAVA_HOME=/opt/java/jdk</p>
<p>　　②把hadoop目录下的conf/core-site.xml文件修改成如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 2</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>hadoop.tmp.dir<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 3</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/hadoop<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 6</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>fs.default.name<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 7</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>hdfs://master:9000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">10</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>dfs.name.dir<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">11</span>   <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/hadoop/name<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">12</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span> </pre><br></div>

<p>　　③把hadoop目录下的conf/ hdfs-site.xml文件修改成如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">2</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>dfs.replication<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>3<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>dfs.data.dir<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/hadoop/data<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">8</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span></pre><br></div>

<p>　　④把hadoop目录下的conf/ mapred-site.xml文件修改成如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>mapred.job.tracker<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>master:9001<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 6</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>mapred.system.dir<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/hadoop/mapred_system<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">10</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span>mapred.local.dir<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">name</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">11</span>     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span>/hadoop/mapred_local<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">value</span><span style="color: #0000ff;">&gt;</span><br><span style="color: #008080;">12</span> <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span></pre><br></div>

<p>　　⑤把hadoop目录下的conf/ masters文件修改成如下：</p>
<p>　　　　master</p>
<p>　　⑥把hadoop目录下的conf/ slaves文件修改成如下：</p>
<p>　　　　master</p>
<p>　　　　slave1</p>
<p>　　　　slave2</p>
<p>　　6、复制虚拟机</p>
<p>　　　&nbsp;&nbsp;&nbsp;我使用Virtual Box的克隆功能，将主机master完全克隆两份:slave1和slave2，并修改相应的主机名和IP地址，这样就可以简单地保持hadoop环境基本配置相同。</p>
<p>　　7、SSH设置无密码验证</p>
<p>　　　&nbsp;&nbsp; 切换到Hadoop用户，在Hadoop家目录下面创建.ssh目录，并在master节点上生成密钥对：ssh-keygen -t rsa -P ‘’ -f ~/.ssh/id_rsa&nbsp;&nbsp;&nbsp;。然后一直按[Enter]键，按默认的选项生成密钥对保存在.ssh/id_rsa文件中。</p>
<p>　　　　然后执行如下命令：</p>
<p>$ ssh ~/.ssh</p>
<p>$ cp id_rsa.pub authorized_keys</p>
<p>$ scp authorized_keys slave1:/home/hadoop/.ssh</p>
<p>$ scp authorized_keys slave2:/home/hadoop/.ssh</p>
<p>　　　　执行远程复制文件的时候记得要把slave1和slave2的防火墙关掉。复制完毕后记得要到slave1和slave2去修改该文件的权限。</p>
<p>从master向slave1和slave2发起SSH连接，第一次登录时需要输入密码，以后就不需要了。</p>
<p>$ ssh slave1</p>
<p>$ ssh slave2</p>
<p>我们只需要配置从master向slaves发起SSH连接不需要密码就可以了，但这样只能在master（即在主机master）启动或关闭hadoop服务。</p>
<p>　　8、运行hadoop</p>
<p>　　　　使用Hadoop用户，切换到hadoop/bin目录下</p>
<p>　　　　格式化分布式文件系统./hadoop namenode -format</p>
<p>　　　　执行命令./start-all.sh启动hadoop</p>
<p>　　　　在master上执行jps命令查看运行的进程如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #000000;">[hadoop@master hadoop]$ jps<br>3200 SecondaryNameNode<br>3271 JobTracker<br>3370 TaskTracker<br>3002 NameNode<br>3106 DataNode<br>5687 Jps</span></pre><br></div>

<p>　　　　在slave1和slave2上执行jps结果如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #000000;">[hadoop@slave1 ~]$ jps<br>1477 DataNode<br>3337 Jps<br>1547 TaskTracker</span></pre><br></div>

<p>　　　　访问<a href="http://ubuntu:50070/" target="_blank" rel="external">http://master:50070</a>可以查看分布式文件系统的状态</p>
<p>　　9、运行单词统计程序</p>
<p>　　　　WordCount是hadoop自带的实例，统计一批文本文件中各单词出现的资料，输出到指定的output目录中，输出目录如果已经存在会报错。</p>
<div class="cnblogs_code"><br><pre><span style="color: #000000;">$ cd /opt/hadoop<br>$ hadoop fs -mkdir input<br>$ hadoop fs -copyFromLocal /opt/hadoop/<em>.txt input/<br>$ hadoop jar hadoop-0.20.2-examples.jar wordcount input output<br>$ hadoop fs -cat output/</em>    #最后查看结果</span></pre><br></div>

<p>运行结果如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #000000;">13/06/16 19:32:26 INFO input.FileInputFormat: Total input paths to process : 4<br>13/06/16 19:32:26 INFO mapred.JobClient: Running job: job_201306161739_0002<br>13/06/16 19:32:27 INFO mapred.JobClient:  map 0% reduce 0%<br>13/06/16 19:32:35 INFO mapred.JobClient:  map 50% reduce 0%<br>13/06/16 19:32:36 INFO mapred.JobClient:  map 100% reduce 0%<br>13/06/16 19:32:47 INFO mapred.JobClient:  map 100% reduce 100%<br>13/06/16 19:32:49 INFO mapred.JobClient: Job complete: job_201306161739_0002<br>13/06/16 19:32:49 INFO mapred.JobClient: Counters: 18<br>13/06/16 19:32:49 INFO mapred.JobClient:   Job Counters<br>13/06/16 19:32:49 INFO mapred.JobClient:     Launched reduce tasks=1<br>13/06/16 19:32:49 INFO mapred.JobClient:     Rack-local map tasks=2<br>13/06/16 19:32:49 INFO mapred.JobClient:     Launched map tasks=4<br>13/06/16 19:32:49 INFO mapred.JobClient:     Data-local map tasks=2<br>13/06/16 19:32:49 INFO mapred.JobClient:   FileSystemCounters<br>13/06/16 19:32:49 INFO mapred.JobClient:     FILE_BYTES_READ=179182<br>13/06/16 19:32:49 INFO mapred.JobClient:     HDFS_BYTES_READ=363457<br>13/06/16 19:32:49 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=358510<br>13/06/16 19:32:49 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=133548<br>13/06/16 19:32:49 INFO mapred.JobClient:   Map-Reduce Framework<br>13/06/16 19:32:49 INFO mapred.JobClient:     Reduce input groups=10500<br>13/06/16 19:32:49 INFO mapred.JobClient:     Combine output records=10840<br>13/06/16 19:32:49 INFO mapred.JobClient:     Map input records=8968<br>13/06/16 19:32:49 INFO mapred.JobClient:     Reduce shuffle bytes=179200<br>13/06/16 19:32:49 INFO mapred.JobClient:     Reduce output records=10500<br>13/06/16 19:32:49 INFO mapred.JobClient:     Spilled Records=21680<br>13/06/16 19:32:49 INFO mapred.JobClient:     Map output bytes=524840<br>13/06/16 19:32:49 INFO mapred.JobClient:     Combine input records=47258<br>13/06/16 19:32:49 INFO mapred.JobClient:     Map output records=47258<br>13/06/16 19:32:49 INFO mapred.JobClient:     Reduce input records=10840</span></pre><br></div>

<p>　　运行该程序一定得注意将slave1和slave2的防火墙给关闭，否则会报异常的。</p>
<p>　　</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hadoop-install.html" data-id="ciiy5f4vp00apq1d065mb2t88" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hadoop-install.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-hadoop-datanode-noroutetohostexception" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/hadoop-datanode-noroutetohostexception.html">hadoop中datanode无法启动，报Caused by: java.net.NoRouteToHostException: No route to host</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/hadoop-datanode-noroutetohostexception.html">
      <time datetime="2013-06-10T10:42:00.000Z" itemprop="datePublished">2013-06-10</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Hadoop/">Hadoop</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　今天把hadoop环境给搭起来了，在master上面启动hadoop后，jps查看进程，SecondaryNameNode&nbsp;NameNode Jps&nbsp;DataNode&nbsp;JobTracker&nbsp;TaskTracker都没问题。但是去<a href="http://192.168.137.110:50070/dfshealth.jsp" target="_blank" rel="external">http://master:50070/dfshealth.jsp</a>查看，live nodes为0。所以我到slave1和slave2上面去执行jps查看进程，结果都没有datanode进程，也就是说datanode没有启动成功，所以我就到logs里面去执行less hadoop-hadoop-datanode-slave2.log，发现报错的内容如下：</p>
<div class="cnblogs_code"><br><pre><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">13</span>,<span style="color: #800080;">637</span><span style="color: #000000;"> INFO org.apache.hadoop.hdfs.server.datanode.DataNode: STARTUP_MSG:<br></span><span style="color: #008000;">/<em></em></span><span style="color: #008000;"><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>STARTUP_MSG: Starting DataNode<br>STARTUP_MSG:   host = slave2/192.168.137.112<br>STARTUP_MSG:   args = []<br>STARTUP_MSG:   version = 0.20.2<br>STARTUP_MSG:   build = </span><span style="color: #008000; text-decoration: underline;"><a href="https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20" target="_blank" rel="external">https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20</a></span><span style="color: #008000;"> -r 911707; compiled by ‘chrisdo’ on Fri Feb 19 08:07:34 UTC 2010<br><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><em>*</em></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span><span style="color: #008000;">*/</span><br><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">14</span>,<span style="color: #800080;">931</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">0</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">15</span>,<span style="color: #800080;">932</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">1</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">16</span>,<span style="color: #800080;">934</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">2</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">17</span>,<span style="color: #800080;">952</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">3</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">18</span>,<span style="color: #800080;">954</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">4</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">19</span>,<span style="color: #800080;">957</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">5</span><span style="color: #000000;"> time(s).<br></span><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">20</span>,<span style="color: #800080;">959</span> INFO org.apache.hadoop.ipc.Client: Retrying connect to server: master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span>. Already tried <span style="color: #800080;">6</span> time(s).<br><span style="color: #800080;">2013</span>-<span style="color: #800080;">06</span>-<span style="color: #800080;">11</span> <span style="color: #800080;">02</span>:<span style="color: #800080;">22</span>:<span style="color: #800080;">23</span>,<span style="color: #800080;">978</span> ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Call to master/<span style="color: #800080;">192.168</span>.<span style="color: #800080;">137.110</span>:<span style="color: #800080;">9000</span><span style="color: #000000;"> failed on local exception: java.net.NoRouteToHostException: No route to host<br>        at org.apache.hadoop.ipc.Client.wrapException(Client.java:</span><span style="color: #800080;">775</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.Client.call(Client.java:</span><span style="color: #800080;">743</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:</span><span style="color: #800080;">220</span><span style="color: #000000;">)<br>        at $Proxy4.getProtocolVersion(Unknown Source)<br>        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:</span><span style="color: #800080;">359</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:</span><span style="color: #800080;">346</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:</span><span style="color: #800080;">383</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:</span><span style="color: #800080;">314</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:</span><span style="color: #800080;">291</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNode.java:</span><span style="color: #800080;">269</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.</span><init>(DataNode.java:<span style="color: #800080;">216</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode.java:</span><span style="color: #800080;">1283</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:</span><span style="color: #800080;">1238</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:</span><span style="color: #800080;">1246</span><span style="color: #000000;">)<br>        at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:</span><span style="color: #800080;">1368</span><span style="color: #000000;">)<br>Caused by: java.net.NoRouteToHostException: No route to host<br>        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)<br>        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:</span><span style="color: #800080;">692</span><span style="color: #000000;">)<br>        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:</span><span style="color: #800080;">206</span><span style="color: #000000;">)<br>        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:</span><span style="color: #800080;">404</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:</span><span style="color: #800080;">304</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.Client$Connection.access$</span><span style="color: #800080;">1700</span>(Client.java:<span style="color: #800080;">176</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.Client.getConnection(Client.java:</span><span style="color: #800080;">860</span><span style="color: #000000;">)<br>        at org.apache.hadoop.ipc.Client.call(Client.java:</span><span style="color: #800080;">720</span><span style="color: #000000;">)<br>        … </span><span style="color: #800080;">13</span> more</init></pre><br></div>

<p>由此文件可以看出，它无法与matser建立连接，所以我想应该是master的防火墙没有关闭，于是关闭master的防火墙，问题就解决了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/hadoop-datanode-noroutetohostexception.html" data-id="ciiy5f4vs00auq1d01bavvuhu" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/hadoop-datanode-noroutetohostexception.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/解决方案/">解决方案</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-linux-java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/linux-java.html">linux中搭建java开发环境</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/linux-java.html">
      <time datetime="2013-06-07T05:59:00.000Z" itemprop="datePublished">2013-06-07</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>　　今天试着在Linux下面搭建java开发环境，现总结一下具体步骤。</p>
<p>1、JDK的安装<br>执行下面命令安装JDK（首先创建/opt/java目录）<br>tar -xvf jdk-7u9-linux-i586.tar.gz -C /opt/java</p>
<p>ln -s /opt/java/jdk1.7.0_09 /opt/java/jdk 创建一个链接</p>
<p>vi /etc/frofile&nbsp;&nbsp; 设置环境变量</p>
<p>export JAVA_HOME=/opt/java/jdk<br>exprot PATH=$JAVA_HOME/bin:$PATH<br>相当于重新设置PATH=JAVA_HOME/bin+PATH</p>
<p>配置好之后要用命令source /etc/profile<br>执行java -version 命令测试一下jdk是否安装成功</p>
<p>2、tomcat的安装<br>解压安装<br>tar -xvf apache-tomcat-6.0.10.tar.gz -C /opt/tomcat/<br>&nbsp;ln -s /opt/tomcat/apache-tomcat-6.0.10 /opt/tomcat/tomcat6.0 创建一个链接<br>然后 cd /opt/tomcat/tomcat6.0/bin<br>执行./startup.sh<br>再打开浏览器测试一下,输入http:localhost:8080，看有没有那个猫的页面出来，有的话就说明安装成功了。</p>
<p>3、eclipse的安装<br>解压，gunzip eclipse-java-juno-SR2-linux-gtk.tar.gz<br>安装&nbsp; tar -xvf eclipse-java-juno-SR2-linux-gtk.tar -C /opt<br>然后去图形界面进入/opt/eclipse目录，运行eclipse，就可以打开eclipse界面了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/linux-java.html" data-id="ciiy5f4sp0061q1d034oktr5a" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/linux-java.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web后端/">web后端</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-linux-64-32" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/06/linux-64-32.html">查看系统是64位还是32位</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2013/06/linux-64-32.html">
      <time datetime="2013-06-07T04:22:00.000Z" itemprop="datePublished">2013-06-07</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>查看系统是64位还是32位:</p>
<p>0&gt;$ uname -m<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 若是i386 或 i686 则是32位kernel<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x86_64 则是 64位kernel</p>
<p>1、getconf LONG_BIT or getconf WORD_BIT</p>
<p>例如：</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/2009081411163843.jpg" alt="如何查看Linux系统是64位还是32位  - 冷月夜2008 - 冷月夜2008的博客"></p>
<p>2、file /bin/ls</p>
<p>例如：</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/2009081411183440.jpg" alt="如何查看Linux系统是64位还是32位  - 冷月夜2008 - 冷月夜2008的博客"></p>
<p>查看linux的版本:</p>
<p><img src="http://www.liuling123.com/wp-content/uploads/2015/11/2009081411423253.jpg" alt="如何查看Linux系统是64位还是32位  - 冷月夜2008 - 冷月夜2008的博客"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://liuling07.github.io/2013/06/linux-64-32.html" data-id="ciiy5f4sx006cq1d0hxgysqsn" class="article-share-link">Share</a>
      
        <a href="http://liuling07.github.io/2013/06/linux-64-32.html#ds-thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
      </nav>
    </section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新博文</h3>
    <div class="widget">
      <ul id="recent-post" class="no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/人生感悟/">人生感悟</a></p>
              <p class="item-title"><a href="/2015/12/say-bye-to-my-2015.html" class="title">Say bye to my 2015</a></p>
              <p class="item-date"><time datetime="2015-12-25T09:25:10.000Z" itemprop="datePublished">2015-12-25</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/mvp-pattern-android.html" class="title">MVP模式在Android项目中的使用</a></p>
              <p class="item-date"><time datetime="2015-12-23T14:16:04.000Z" itemprop="datePublished">2015-12-23</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/intent-resolving-in-android-m.html" class="title">【译文】Android M中Intent的解析</a></p>
              <p class="item-date"><time datetime="2015-12-04T06:52:06.000Z" itemprop="datePublished">2015-12-04</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/12/performance-listviews.html" class="title">【译文】高性能ListViews</a></p>
              <p class="item-date"><time datetime="2015-12-02T10:22:14.000Z" itemprop="datePublished">2015-12-02</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a></p>
              <p class="item-title"><a href="/2015/11/android-multi-photo-picker.html" class="title">Android带多选功能的PhotoPicker</a></p>
              <p class="item-date"><time datetime="2015-11-21T07:46:03.000Z" itemprop="datePublished">2015-11-21</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">博文分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Framework/">Framework</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JNI-amp-NDK/">JNI&amp;NDK</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java基础/">Java基础</a><span class="category-list-count">35</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NoSQL/">NoSQL</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/人生感悟/">人生感悟</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他技术/">其他技术</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构和算法/">数据结构和算法</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a><span class="category-list-count">7</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AsyncTask/" style="font-size: 11.54px;">AsyncTask</a> <a href="/tags/LruCache/" style="font-size: 10px;">LruCache</a> <a href="/tags/MVP/" style="font-size: 10px;">MVP</a> <a href="/tags/NoSQL/" style="font-size: 13.08px;">NoSQL</a> <a href="/tags/android/" style="font-size: 18.46px;">android</a> <a href="/tags/android-studio/" style="font-size: 10px;">android studio</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/camera/" style="font-size: 10px;">camera</a> <a href="/tags/framework/" style="font-size: 10.77px;">framework</a> <a href="/tags/hadoop/" style="font-size: 14.62px;">hadoop</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/jni/" style="font-size: 13.08px;">jni</a> <a href="/tags/linux/" style="font-size: 16.15px;">linux</a> <a href="/tags/mysql/" style="font-size: 11.54px;">mysql</a> <a href="/tags/redis/" style="font-size: 13.08px;">redis</a> <a href="/tags/spring/" style="font-size: 10.77px;">spring</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/web后端/" style="font-size: 19.23px;">web后端</a> <a href="/tags/内存缓存/" style="font-size: 10px;">内存缓存</a> <a href="/tags/前端/" style="font-size: 13.85px;">前端</a> <a href="/tags/反射/" style="font-size: 10px;">反射</a> <a href="/tags/图片选择/" style="font-size: 10.77px;">图片选择</a> <a href="/tags/多线程/" style="font-size: 17.69px;">多线程</a> <a href="/tags/布局/" style="font-size: 12.31px;">布局</a> <a href="/tags/布局优化/" style="font-size: 10.77px;">布局优化</a> <a href="/tags/开源/" style="font-size: 10.77px;">开源</a> <a href="/tags/断点续传/" style="font-size: 11.54px;">断点续传</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a> <a href="/tags/自定义控件/" style="font-size: 10px;">自定义控件</a> <a href="/tags/解决方案/" style="font-size: 16.92px;">解决方案</a> <a href="/tags/设计模式/" style="font-size: 15.38px;">设计模式</a> <a href="/tags/译文/" style="font-size: 10.77px;">译文</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">博文归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap widget-list">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a target="_blank" href="http://blog.daimajia.com">代码家</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.trinea.cn">Trinea</a>
          </li>
        
          <li>
            <a target="_blank" href="https://www.aswifter.com">APP开发者</a>
          </li>
        
          <li>
            <a target="_blank" href="http://blog.seoui.com">笑松小站</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.apkfuns.com">舞影凌风</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.ttfde.org">TTF的家园</a>
          </li>
        
          <li>
            <a target="_blank" href="http://rocko.xyz">Rocko&#39;s blog</a>
          </li>
        
          <li>
            <a target="_blank" href="http://www.93sec.cc">教程资源网</a>
          </li>
        
      </ul>
    </div>
  </div>


  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2000 - 2016 Lauren<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script type="text/javascript">
  var duoshuoQuery = {short_name:"liuling07"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>





 <script src="//ajax.lug.ustc.edu.cn/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>